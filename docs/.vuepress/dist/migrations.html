<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Base de datos: Migraciones | Documentación de Laravel en Español</title>
    <meta name="description" content="Documentación de Laravel en Español">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:300,700|Miriam+Libre">
    
    <link rel="preload" href="/assets/css/0.styles.0cc2d3c3.css" as="style"><link rel="preload" href="/assets/js/app.bf22240a.js" as="script"><link rel="preload" href="/assets/js/50.5cb081e0.js" as="script"><link rel="prefetch" href="/assets/js/10.8a8a99df.js"><link rel="prefetch" href="/assets/js/11.ec476e2f.js"><link rel="prefetch" href="/assets/js/12.6db1eb13.js"><link rel="prefetch" href="/assets/js/13.92d78bb5.js"><link rel="prefetch" href="/assets/js/14.1a0ad5f1.js"><link rel="prefetch" href="/assets/js/15.abc982c9.js"><link rel="prefetch" href="/assets/js/16.7cf1a759.js"><link rel="prefetch" href="/assets/js/17.4abfc664.js"><link rel="prefetch" href="/assets/js/18.85b19837.js"><link rel="prefetch" href="/assets/js/19.8c9dfcd5.js"><link rel="prefetch" href="/assets/js/2.dcb6cf45.js"><link rel="prefetch" href="/assets/js/20.c1b9de54.js"><link rel="prefetch" href="/assets/js/21.469ffab3.js"><link rel="prefetch" href="/assets/js/22.2d14e150.js"><link rel="prefetch" href="/assets/js/23.7a4dcc9a.js"><link rel="prefetch" href="/assets/js/24.534e59f1.js"><link rel="prefetch" href="/assets/js/25.eaac1c07.js"><link rel="prefetch" href="/assets/js/26.8e9180e0.js"><link rel="prefetch" href="/assets/js/27.2cd2ace8.js"><link rel="prefetch" href="/assets/js/28.9f7dcf6d.js"><link rel="prefetch" href="/assets/js/29.06a87f0d.js"><link rel="prefetch" href="/assets/js/3.b62bf0b4.js"><link rel="prefetch" href="/assets/js/30.b03f86ec.js"><link rel="prefetch" href="/assets/js/31.edce81f6.js"><link rel="prefetch" href="/assets/js/32.6657300b.js"><link rel="prefetch" href="/assets/js/33.8dc49209.js"><link rel="prefetch" href="/assets/js/34.03cbee56.js"><link rel="prefetch" href="/assets/js/35.5439db2e.js"><link rel="prefetch" href="/assets/js/36.83d5a264.js"><link rel="prefetch" href="/assets/js/37.4066824e.js"><link rel="prefetch" href="/assets/js/38.c3fe05aa.js"><link rel="prefetch" href="/assets/js/39.52ef8667.js"><link rel="prefetch" href="/assets/js/4.bd0ebba2.js"><link rel="prefetch" href="/assets/js/40.2c54d702.js"><link rel="prefetch" href="/assets/js/41.775bc6e1.js"><link rel="prefetch" href="/assets/js/42.6541d60b.js"><link rel="prefetch" href="/assets/js/43.20091aea.js"><link rel="prefetch" href="/assets/js/44.75b71ccc.js"><link rel="prefetch" href="/assets/js/45.6b36a3a8.js"><link rel="prefetch" href="/assets/js/46.6ea236af.js"><link rel="prefetch" href="/assets/js/47.0e0ee374.js"><link rel="prefetch" href="/assets/js/48.b6beb9b8.js"><link rel="prefetch" href="/assets/js/49.ae33b521.js"><link rel="prefetch" href="/assets/js/5.2c350d8b.js"><link rel="prefetch" href="/assets/js/51.3e0281e2.js"><link rel="prefetch" href="/assets/js/52.e1fae1d6.js"><link rel="prefetch" href="/assets/js/53.0a9d4aed.js"><link rel="prefetch" href="/assets/js/54.55bc9113.js"><link rel="prefetch" href="/assets/js/55.e964fdb4.js"><link rel="prefetch" href="/assets/js/56.3abed8a0.js"><link rel="prefetch" href="/assets/js/57.df09269b.js"><link rel="prefetch" href="/assets/js/58.3ce37458.js"><link rel="prefetch" href="/assets/js/59.7a840aeb.js"><link rel="prefetch" href="/assets/js/6.6fce793d.js"><link rel="prefetch" href="/assets/js/60.b4fe788b.js"><link rel="prefetch" href="/assets/js/61.e45356bb.js"><link rel="prefetch" href="/assets/js/62.0d75cf78.js"><link rel="prefetch" href="/assets/js/63.0ecae205.js"><link rel="prefetch" href="/assets/js/64.90fb2c2d.js"><link rel="prefetch" href="/assets/js/65.7c476002.js"><link rel="prefetch" href="/assets/js/66.802dee8b.js"><link rel="prefetch" href="/assets/js/67.ae965c66.js"><link rel="prefetch" href="/assets/js/68.220c04d8.js"><link rel="prefetch" href="/assets/js/69.bf607b92.js"><link rel="prefetch" href="/assets/js/7.b956f78c.js"><link rel="prefetch" href="/assets/js/70.dea3d878.js"><link rel="prefetch" href="/assets/js/71.1f786e34.js"><link rel="prefetch" href="/assets/js/72.4bd65b39.js"><link rel="prefetch" href="/assets/js/73.414b29bd.js"><link rel="prefetch" href="/assets/js/74.b5ab4f13.js"><link rel="prefetch" href="/assets/js/75.f12fbb27.js"><link rel="prefetch" href="/assets/js/76.a140d22b.js"><link rel="prefetch" href="/assets/js/77.2595933c.js"><link rel="prefetch" href="/assets/js/78.46bb4eff.js"><link rel="prefetch" href="/assets/js/79.c549a0e3.js"><link rel="prefetch" href="/assets/js/8.3be12d8d.js"><link rel="prefetch" href="/assets/js/80.1b9cd731.js"><link rel="prefetch" href="/assets/js/81.6aa05825.js"><link rel="prefetch" href="/assets/js/9.60a01cba.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0cc2d3c3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Documentación de Laravel en Español</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Primeros Pasos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Conceptos De Arquitectura</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Fundamentos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Frontend</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Seguridad</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Profundizando</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Bases De Datos</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/database.html" class="sidebar-link">Bases de Datos: Primeros Pasos</a></li><li><a href="/queries.html" class="sidebar-link">Base de datos: Constructor de Consultas (Query Builder)</a></li><li><a href="/pagination.html" class="sidebar-link">Base de datos: Paginación</a></li><li><a href="/migrations.html" class="active sidebar-link">Base de datos: Migraciones</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/migrations.html#introduccion" class="sidebar-link">Introducción</a></li><li class="sidebar-sub-header"><a href="/migrations.html#generando-migraciones" class="sidebar-link">Generando Migraciones</a></li><li class="sidebar-sub-header"><a href="/migrations.html#estructura-de-migracion" class="sidebar-link">Estructura de Migración</a></li><li class="sidebar-sub-header"><a href="/migrations.html#ejecutando-migraciones" class="sidebar-link">Ejecutando Migraciones</a></li><li class="sidebar-sub-header"><a href="/migrations.html#tablas" class="sidebar-link">Tablas</a></li><li class="sidebar-sub-header"><a href="/migrations.html#columnas" class="sidebar-link">Columnas</a></li><li class="sidebar-sub-header"><a href="/migrations.html#indices" class="sidebar-link">Índices</a></li></ul></li><li><a href="/seeding.html" class="sidebar-link">Base de datos: Seeding</a></li><li><a href="/redis.html" class="sidebar-link">Redis</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>ORM Eloquent</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Pruebas</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Paquetes oficiales</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><div><h1 id="base-de-datos-migraciones"><a class="header-anchor" href="#base-de-datos-migraciones" aria-hidden="true">#</a> Base de datos: Migraciones</h1> <ul><li><a href="#introduction">Introducción</a></li> <li><a href="#generating-migrations">Generando Migraciones</a></li> <li><a href="#migration-structure">Estructura de Migración</a></li> <li><a href="#running-migrations">Ejecutando Migraciones</a> <ul><li><a href="#rolling-back-migrations">Reversando Migraciones</a></li></ul></li> <li><a href="#tables">Tablas</a> <ul><li><a href="#creating-tables">Creando Tablas</a></li> <li><a href="#renaming-and-dropping-tables">Renombrando / Eliminando Tablas</a></li></ul></li> <li><a href="#columns">Columnas</a> <ul><li><a href="#creating-columns">Creando Columnas</a></li> <li><a href="#column-modifiers">Modificadores de Columna</a></li> <li><a href="#modifying-columns">Modificando Columnas</a></li> <li><a href="#dropping-columns">Eliminando Columnas</a></li></ul></li> <li><a href="#indexes">Índices</a> <ul><li><a href="#creating-indexes">Creación de Índices</a></li> <li><a href="#renaming-indexes">Renombrando Índices</a></li> <li><a href="#dropping-indexes">Eliminando Índices</a></li> <li><a href="#foreign-key-constraints">Restricciones de Clave Foránea</a></li></ul></li></ul> <p><a name="introduction"></a></p> <h2 id="introduccion"><a class="header-anchor" href="#introduccion" aria-hidden="true">#</a> Introducción</h2> <p>Las migraciones son como el control de versión para tu base de datos, permiten que tu equipo modifique y comparta fácilmente el esquema de base de datos de la aplicación. Las migraciones son emparejadas típicamente con el constructor de esquema de Laravel para construir fácilmente el esquema de base de datos de tu aplicación. Si inclusive has tenido que decirle a un miembro de equipo que agregue una columna manualmente a sus esquemas de bases de datos local, has encarado el problema que solucionan las migraciones de base de datos.</p> <p>La clase <a href="/docs/%7B%7Bversion%7D%7D/facades">facade</a> <code>Schema</code> de Laravel proporciona soporte de base de datos orientado a la programación orientada a objetos para la creación y manipulación de tablas a través de todos los sistemas de bases de datos soportados por Laravel.</p> <p><a name="generating-migrations"></a></p> <h2 id="generando-migraciones"><a class="header-anchor" href="#generando-migraciones" aria-hidden="true">#</a> Generando Migraciones</h2> <p>Para crear una migración, usa el <a href="/docs/%7B%7Bversion%7D%7D/artisan">comando Artisan</a> <code>make:migration</code>:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code>php artisan make<span class="token punctuation">:</span>migration create_users_table
</code></pre></div><p>La nueva migración estará ubicada en tu directorio <code>database/migrations</code>. Cada nombre de archivo de migración contiene una marca de tiempo la cual permite que Laravel determine el orden de las migraciones.</p> <p>Las opciones <code>--table</code> y <code>--create</code> también pueden ser usadas para indicar el nombre de la tabla y si la migración estará creando una nueva tabla. Estas opciones rellenan previamente el archivo stub de migración generado con la tabla especificada:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code>php artisan make<span class="token punctuation">:</span>migration create_users_table <span class="token operator">--</span>create<span class="token operator">=</span>users

php artisan make<span class="token punctuation">:</span>migration add_votes_to_users_table <span class="token operator">--</span>table<span class="token operator">=</span>users
</code></pre></div><p>Si prefieres especificar una ruta de directorio de salida personalizada para la migración generada, puedes usar la opción <code>--path</code> al momento de ejecutar el comando <code>make:migration</code>. La ruta de directorio dada debe ser relativa a la ruta de directorio base de tu aplicación.</p> <p><a name="migration-structure"></a></p> <h2 id="estructura-de-migracion"><a class="header-anchor" href="#estructura-de-migracion" aria-hidden="true">#</a> Estructura de Migración</h2> <p>Una clase de migración contiene dos métodos: <code>up</code> y <code>down</code>. El método <code>up</code> es usado para agregar nuevas tablas, columnas, o índices para tu base de datos, mientras el método <code>down</code> debería reversar las operaciones ejecutadas por el método <code>up</code>.</p> <p>Dentro de ambos métodos puedes usar el constructor de esquema de Laravel para crear y modificar expresivamente las tablas. Para aprender sobre todos los métodos disponibles en el constructor <code>Schema</code>, <a href="#creating-tables">inspecciona su documentación</a>. Por ejemplo, este ejemplo de migración crea una tabla <code>flights</code>:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Schema</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Schema<span class="token punctuation">\</span>Blueprint</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Database<span class="token punctuation">\</span>Migrations<span class="token punctuation">\</span>Migration</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">CreateFlightsTable</span> <span class="token keyword">extends</span> <span class="token class-name">Migration</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Run the migrations.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">up</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'flights'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Blueprint <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">bigIncrements</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'airline'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">timestamps</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
    * Reverse the migrations.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">down</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">drop</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'flights'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p><a name="running-migrations"></a></p> <h2 id="ejecutando-migraciones"><a class="header-anchor" href="#ejecutando-migraciones" aria-hidden="true">#</a> Ejecutando Migraciones</h2> <p>Para ejecutar todas tus maravillosas migraciones, ejecuta el comando Artisan <code>migrate</code>:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code>php artisan migrate
</code></pre></div><div class="danger custom-block"><p class="custom-block-title">Nota</p> <p>Si estás usando <a href="/docs/%7B%7Bversion%7D%7D/homestead">La máquina virtual de Homestead</a>, deberías ejecutar este comando desde dentro de tu máquina virtual.</p></div></div> <h4 id="forzando-las-migraciones-para-ejecutar-en-produccion"><a href="#forzando-las-migraciones-para-ejecutar-en-produccion" aria-hidden="true" class="header-anchor">#</a> Forzando las Migraciones para Ejecutar en Producción</h4> <p>Algunas operaciones de migración son destructivas, lo que significa que pueden causar que pierdas tus datos. Con el propósito de protegerte de ejecutar estos comandos contra tu base de datos de producción, recibirás un mensaje de confirmación antes que los comandos sean ejecutados. Para forzar que los comandos se ejecuten sin retardo, usa el indicador <code>--force</code>.</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan migrate <span class="token operator">--</span>force
</code></pre></div><p><a name="rolling-back-migrations"></a></p> <h3 id="reversando-migraciones"><a href="#reversando-migraciones" aria-hidden="true" class="header-anchor">#</a> Reversando Migraciones</h3> <p>Para reversar la operación de migración más reciente, puedes usar el comando <code>rollback</code>. Este comando reversa el último &quot;lote&quot; de migraciones, los cuales pueden incluir archivos de migración múltiples.</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan migrate<span class="token punctuation">:</span>rollback
</code></pre></div><p>Puedes reversar un número limitado de migraciones proporcionando la opción <code>step</code> al comando <code>rollback</code>. Por ejemplo, el siguiente comando revertirá los cinco &quot;lotes&quot; de migraciones más recientes:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan migrate<span class="token punctuation">:</span>rollback <span class="token operator">--</span>step<span class="token operator">=</span><span class="token number">5</span>
</code></pre></div><p>El comando <code>migrate:reset</code> revertirá todas las migraciones de tu aplicación:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan migrate<span class="token punctuation">:</span>reset
</code></pre></div><h4 id="rollback-migrate-en-un-unico-comando"><a href="#rollback-migrate-en-un-unico-comando" aria-hidden="true" class="header-anchor">#</a> Rollback &amp; Migrate En un Único Comando</h4> <p>El comando <code>migrate:refresh</code> reversará todas tus migraciones y después ejecutará el comando <code>migrate</code>. Este comando vuelve a crear efectivamente tu base de datos entera:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan migrate<span class="token punctuation">:</span>refresh

<span class="token comment">// Refresh the database and run all database seeds...</span>
php artisan migrate<span class="token punctuation">:</span>refresh <span class="token operator">--</span>seed
</code></pre></div><p>Puedes reversar y volver a migrar un número limitado de migraciones proporcionando la opción <code>step</code> al comando <code>refresh</code>. Por ejemplo, el siguiente comando revertirá y volverá a migrar las cinco migraciones más recientes:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan migrate<span class="token punctuation">:</span>refresh <span class="token operator">--</span>step<span class="token operator">=</span><span class="token number">5</span>
</code></pre></div><h4 id="eliminando-todas-las-tablas-y-migrar"><a href="#eliminando-todas-las-tablas-y-migrar" aria-hidden="true" class="header-anchor">#</a> Eliminando Todas las Tablas y Migrar</h4> <p>El comando <code>migrate:fresh</code> eliminará todas las tablas de la base de datos y después ejecutará el comando <code>migrate</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan migrate<span class="token punctuation">:</span>fresh

php artisan migrate<span class="token punctuation">:</span>fresh <span class="token operator">--</span>seed
</code></pre></div><p><a name="tables"></a></p> <h2 id="tablas"><a href="#tablas" aria-hidden="true" class="header-anchor">#</a> Tablas</h2> <p><a name="creating-tables"></a></p> <h3 id="creando-tablas"><a href="#creando-tablas" aria-hidden="true" class="header-anchor">#</a> Creando Tablas</h3> <p>Para crear una nueva tabla en la base de datos, usa el método <code>create</code> en la clase facade <code>Schema</code>. El método <code>create</code> acepta dos argumentos. El primero es el nombre de la tabla, mientras que el segundo es una <code>Closure</code> la cual recibe un objeto de la clase <code>Blueprint</code> que puede ser usado para definir la nueva tabla:</p> <div class="language-php extra-class"><pre class="language-php"><code>Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Blueprint <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">bigIncrements</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Al momento de crear la tabla, puedes usar cualquiera de <a href="#creating-columns">los métodos de columna</a> del constructor de esquemas para definir las columnas de la tabla.</p> <h4 id="inspeccionando-la-tabla-existencia-de-columna"><a href="#inspeccionando-la-tabla-existencia-de-columna" aria-hidden="true" class="header-anchor">#</a> Inspeccionando la Tabla / Existencia de Columna</h4> <p>Puedes inspeccionar fácilmente la existencia de una tabla o columna usando los métodos <code>hasTable</code> y <code>hasColumn</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">hasTable</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">hasColumn</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'email'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="conexion-de-base-de-datos-opciones-de-tabla"><a href="#conexion-de-base-de-datos-opciones-de-tabla" aria-hidden="true" class="header-anchor">#</a> Conexión de Base de Datos &amp; Opciones de Tabla</h4> <p>Si quieres ejecutar una operación de esquema en una conexión de base de datos que no es tu conexión predeterminada, usa el método <code>connection</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">connection</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Blueprint <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">bigIncrements</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Puedes usar los siguientes comandos en el constructor de esquema para definir las opciones de tabla:</p> <table><thead><tr><th>Comando</th> <th>Descripción</th></tr></thead> <tbody><tr><td><code>$table-&gt;engine = 'InnoDB';</code></td> <td>Especifica el motor de almacenamiento de la tabla. (Sólo en MySQL).</td></tr> <tr><td><code>$table-&gt;charset = 'utf8';</code></td> <td>Especifica un conjunto de caracteres. (Sólo en MySQL).</td></tr> <tr><td><code>$table-&gt;collation = 'utf8_unicode_ci';</code></td> <td>Especifica un orden predeterminado para la tabla. (Sólo en MySQL)</td></tr> <tr><td><code>$table-&gt;temporary();</code></td> <td>Crea una tabla temporal (excepto en SQL Server).</td></tr></tbody></table> <p><a name="renaming-and-dropping-tables"></a></p> <h3 id="renombrando-eliminando-tablas"><a href="#renombrando-eliminando-tablas" aria-hidden="true" class="header-anchor">#</a> Renombrando / Eliminando Tablas</h3> <p>Para renombrar una tabla de base de datos existente, usa el método <code>rename</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">rename</span><span class="token punctuation">(</span><span class="token variable">$from</span><span class="token punctuation">,</span> <span class="token variable">$to</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Para eliminar una tabla existente, puedes usar los métodos <code>drop</code> o <code>dropIfExists</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">drop</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dropIfExists</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="renombrando-tablas-con-claves-foraneas"><a href="#renombrando-tablas-con-claves-foraneas" aria-hidden="true" class="header-anchor">#</a> Renombrando Tablas con Claves Foráneas</h4> <p>Antes de renombrar una tabla, deberías verificar que cualquiera de las restricciones de clave foránea en la tabla tenga un nombre explícito en tus archivos de migración en caso de permitir que Laravel asigne un nombre basado en la convención. De otra manera, el nombre de restricción de clave foránea se referirá al nombre que tenía la tabla.</p> <p><a name="columns"></a></p> <h2 id="columnas"><a href="#columnas" aria-hidden="true" class="header-anchor">#</a> Columnas</h2> <p><a name="creating-columns"></a></p> <h3 id="creando-columnas"><a href="#creando-columnas" aria-hidden="true" class="header-anchor">#</a> Creando Columnas</h3> <p>El método <code>table</code> en la clase facade <code>Schema</code> puede ser usado para actualizar tablas existentes. Igual que el método <code>create</code> acepta dos argumentos: el nombre de la tabla y una <code>Closure</code> que recibe una instancia de la clase <code>Blueprint</code> que puedes usar para agregar columnas a la tabla:</p> <div class="language-php extra-class"><pre class="language-php"><code>Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Blueprint <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="tipos-de-columna-permitidos"><a href="#tipos-de-columna-permitidos" aria-hidden="true" class="header-anchor">#</a> Tipos de Columna Permitidos</h4> <p>El constructor de esquema contiene una variedad de tipos de columna que puedes especificar al momento de construir tus tablas:</p> <table><thead><tr><th>Comando</th> <th>Descripción</th></tr></thead> <tbody><tr><td><code>$table-&gt;bigIncrements('id');</code></td> <td>Tipo de columna equivalente a Auto-incremento UNSIGNED BIGINT (clave primaria).</td></tr> <tr><td><code>$table-&gt;bigInteger('votes');</code></td> <td>Tipo de columna equivalente a BIGINT equivalent.</td></tr> <tr><td><code>$table-&gt;binary('data');</code></td> <td>Tipo de columna equivalente a BLOB.</td></tr> <tr><td><code>$table-&gt;boolean('confirmed');</code></td> <td>Tipo de columna equivalente a BOOLEAN.</td></tr> <tr><td><code>$table-&gt;char('name', 100);</code></td> <td>Tipo de columna equivalente a CHAR con una longitud opcional.</td></tr> <tr><td><code>$table-&gt;date('created_at');</code></td> <td>Tipo de columna equivalente a DATE.</td></tr> <tr><td><code>$table-&gt;dateTime('created_at');</code></td> <td>Tipo de columna equivalente a DATETIME.</td></tr> <tr><td><code>$table-&gt;dateTimeTz('created_at');</code></td> <td>Tipo de columna equivalente a DATETIME (con hora de la zona).</td></tr> <tr><td><code>$table-&gt;decimal('amount', 8, 2);</code></td> <td>Tipo de columna equivalente a DECIMAL con una precisión (el total de dígitos) y escala de dígitos decimales.</td></tr> <tr><td><code>$table-&gt;double('amount', 8, 2);</code></td> <td>Tipo de columna equivalente a DOUBLE con una precisión (el total de dígitos) y escala de dígitos decimales.</td></tr> <tr><td><code>$table-&gt;enum('level', ['easy', 'hard']);</code></td> <td>Tipo de columna equivalente a ENUM.</td></tr> <tr><td><code>$table-&gt;float('amount', 8, 2);</code></td> <td>Tipo de columna equivalente a FLOAT con una precisión (el total de dígitos) y escala de dígitos decimales.</td></tr> <tr><td><code>$table-&gt;geometry('positions');</code></td> <td>Tipo de columna equivalente a GEOMETRY.</td></tr> <tr><td><code>$table-&gt;geometryCollection('positions');</code></td> <td>Tipo de columna equivalente a GEOMETRYCOLLECTION.</td></tr> <tr><td><code>$table-&gt;increments('id');</code></td> <td>Tipo de columna equivalente a Auto-incremento UNSIGNED INTEGER (clave primaria).</td></tr> <tr><td><code>$table-&gt;integer('votes');</code></td> <td>Tipo de columna equivalente a INTEGER.</td></tr> <tr><td><code>$table-&gt;ipAddress('visitor');</code></td> <td>Tipo de columna equivalente a dirección IP.</td></tr> <tr><td><code>$table-&gt;json('options');</code></td> <td>Tipo de columna equivalente a JSON.</td></tr> <tr><td><code>$table-&gt;jsonb('options');</code></td> <td>Tipo de columna equivalente a JSONB.</td></tr> <tr><td><code>$table-&gt;lineString('positions');</code></td> <td>Tipo de columna equivalente a LINESTRING.</td></tr> <tr><td><code>$table-&gt;longText('description');</code></td> <td>Tipo de columna equivalente a LONGTEXT.</td></tr> <tr><td><code>$table-&gt;macAddress('device');</code></td> <td>Tipo de columna equivalente a dirección MAC.</td></tr> <tr><td><code>$table-&gt;mediumIncrements('id');</code></td> <td>Tipo de columna equivalente a Auto-incremento UNSIGNED MEDIUMINT (clave primaria).</td></tr> <tr><td><code>$table-&gt;mediumInteger('votes');</code></td> <td>Tipo de columna equivalente a MEDIUMINT.</td></tr> <tr><td><code>$table-&gt;mediumText('description');</code></td> <td>Tipo de columna equivalente a MEDIUMTEXT.</td></tr> <tr><td><code>$table-&gt;morphs('taggable');</code></td> <td>Agrega los tipos de columna equivalente a UNSIGNED INTEGER <code>taggable_id</code> y VARCHAR <code>taggable_type</code>.</td></tr> <tr><td><code>$table-&gt;multiLineString('positions');</code></td> <td>Tipo de columna equivalente a MULTILINESTRING.</td></tr> <tr><td><code>$table-&gt;multiPoint('positions');</code></td> <td>Tipo de columna equivalente a MULTIPOINT.</td></tr> <tr><td><code>$table-&gt;multiPolygon('positions');</code></td> <td>Tipo de columna equivalente a MULTIPOLYGON.</td></tr> <tr><td><code>$table-&gt;nullableMorphs('taggable');</code></td> <td>Permite que la columna <code>morphs()</code> acepte una versión de valor nulo.</td></tr> <tr><td><code>$table-&gt;nullableTimestamps();</code></td> <td>Método Alias de <code>timestamps()</code>.</td></tr> <tr><td><code>$table-&gt;point('position');</code></td> <td>Tipo de columna equivalente a POINT.</td></tr> <tr><td><code>$table-&gt;polygon('positions');</code></td> <td>Tipo de columna equivalente a POLYGON.</td></tr> <tr><td><code>$table-&gt;rememberToken();</code></td> <td>Permite nulos en el tipo de columna equivalente a VARCHAR(100) <code>remember_token</code>.</td></tr> <tr><td><code>$table-&gt;set('flavors', ['strawberry', 'vanilla']);</code></td> <td>Establece una columna equivalente.</td></tr> <tr><td><code>$table-&gt;smallIncrements('id');</code></td> <td>Tipo de columna equivalente a Auto-incremento UNSIGNED SMALLINT (clave primaria).</td></tr> <tr><td><code>$table-&gt;smallInteger('votes');</code></td> <td>Tipo de columna equivalente a SMALLINT.</td></tr> <tr><td><code>$table-&gt;softDeletes();</code></td> <td>Permite nulos en el tipo de columna equivalente a TIMESTAMP <code>deleted_at</code> para eliminaciones.</td></tr> <tr><td><code>$table-&gt;softDeletesTz();</code></td> <td>Permite nulos en el tipo de columna equivalente a TIMESTAMP <code>deleted_at</code> (con la hora de la zona) para eliminaciones.</td></tr> <tr><td><code>$table-&gt;string('name', 100);</code></td> <td>Tipo de columna equivalente a VARCHAR con una longitud opcional.</td></tr> <tr><td><code>$table-&gt;text('description');</code></td> <td>Tipo de columna equivalente a TEXT.</td></tr> <tr><td><code>$table-&gt;time('sunrise');</code></td> <td>Tipo de columna equivalente a TIME.</td></tr> <tr><td><code>$table-&gt;timeTz('sunrise');</code></td> <td>Tipo de columna equivalente a TIME (con la hora de la zona).</td></tr> <tr><td><code>$table-&gt;timestamp('added_on');</code></td> <td>Tipo de columna equivalente a TIMESTAMP.</td></tr> <tr><td><code>$table-&gt;timestampTz('added_on');</code></td> <td>Tipo de columna equivalente a TIMESTAMP (con la hora de la zona).</td></tr> <tr><td><code>$table-&gt;timestamps();</code></td> <td>Permite nulos en las columnas equivalentes TIMESTAMP <code>created_at</code> y <code>updated_at</code>.</td></tr> <tr><td><code>$table-&gt;timestampsTz();</code></td> <td>Permite nulos en las columnas equivalentes TIMESTAMP <code>created_at</code> y <code>updated_at</code> (con la hora de la zona).</td></tr> <tr><td><code>$table-&gt;tinyIncrements('id');</code></td> <td>Tipo de columna equivalente a Auto-incremento UNSIGNED TINYINT (clave primaria).</td></tr> <tr><td><code>$table-&gt;tinyInteger('votes');</code></td> <td>Tipo de columna equivalente a TINYINT.</td></tr> <tr><td><code>$table-&gt;unsignedBigInteger('votes');</code></td> <td>Tipo de columna equivalente a UNSIGNED BIGINT.</td></tr> <tr><td><code>$table-&gt;unsignedDecimal('amount', 8, 2);</code></td> <td>Tipo de columna equivalente a UNSIGNED DECIMAL con una precisión (total de dígitos) escala (dígitos decimales).</td></tr> <tr><td><code>$table-&gt;unsignedInteger('votes');</code></td> <td>Tipo de columna equivalente a UNSIGNED INTEGER.</td></tr> <tr><td><code>$table-&gt;unsignedMediumInteger('votes');</code></td> <td>Tipo de columna equivalente a UNSIGNED MEDIUMINT.</td></tr> <tr><td><code>$table-&gt;unsignedSmallInteger('votes');</code></td> <td>Tipo de columna equivalente a UNSIGNED SMALLINT.</td></tr> <tr><td><code>$table-&gt;unsignedTinyInteger('votes');</code></td> <td>Tipo de columna equivalente a UNSIGNED TINYINT.</td></tr> <tr><td><code>$table-&gt;uuid('id');</code></td> <td>Tipo de columna equivalente a UUID.</td></tr> <tr><td><code>$table-&gt;year('birth_year');</code></td> <td>Tipo de columna equivalente a YEAR.</td></tr></tbody></table> <p><a name="column-modifiers"></a></p> <h3 id="modificadores-de-columna"><a href="#modificadores-de-columna" aria-hidden="true" class="header-anchor">#</a> Modificadores de Columna</h3> <p>Además de los tipos de columna listados anteriormente, hay varios &quot;modificadores&quot; de columna que puedes usar al momento de agregar una columna a la tabla de base de datos. Por ejemplo, para hacer que la columna &quot;acepte valores nulos&quot;, puedes usar el método <code>nullable</code>.</p> <div class="language-php extra-class"><pre class="language-php"><code>Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Blueprint <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Debajo está una lista con todos los modificadores de columna disponibles. Esta lista no incluye los <a href="#creating-indexes">modificadores de índice</a>:</p> <table><thead><tr><th>Modificador</th> <th>Descripción</th></tr></thead> <tbody><tr><td><code>-&gt;after('column')</code></td> <td>Coloca la columna &quot;después de&quot; otra columna (MySQL)</td></tr> <tr><td><code>-&gt;autoIncrement()</code></td> <td>Establece las columnas tipo INTEGER como auto-incremento (clave primaria)</td></tr> <tr><td><code>-&gt;charset('utf8')</code></td> <td>Especifica un conjunto de caracteres para la columna (MySQL)</td></tr> <tr><td><code>-&gt;collation('utf8_unicode_ci')</code></td> <td>Especifica un ordenamiento para la columna (MySQL/SQL Server)</td></tr> <tr><td><code>-&gt;comment('my comment')</code></td> <td>Agrega un comentario a una columna (MySQL/PostgreSQL)</td></tr> <tr><td><code>-&gt;default($value)</code></td> <td>Especifica un valor &quot;predeterminado&quot; para la columna</td></tr> <tr><td><code>-&gt;first()</code></td> <td>Coloca la columna al &quot;principio&quot; en la tabla (MySQL)</td></tr> <tr><td><code>-&gt;nullable($value = true)</code></td> <td>Permite que valores NULL (por defecto) sean insertados dentro de la columna</td></tr> <tr><td><code>-&gt;storedAs($expression)</code></td> <td>Crea una columna almacenada generada por la expresión (MySQL)</td></tr> <tr><td><code>-&gt;unsigned()</code></td> <td>Establece las columnas tipo INTEGER como UNSIGNED (MySQL)</td></tr> <tr><td><code>-&gt;useCurrent()</code></td> <td>Establece las columnas tipo TIMESTAMP para usar CURRENT_TIMESTAMP como valor predeterminado</td></tr> <tr><td><code>-&gt;virtualAs($expression)</code></td> <td>Crea una columna virtual generada por la expresión (MySQL)</td></tr> <tr><td><code>-&gt;generatedAs($expression)</code></td> <td>Crea una columna de identidad con opciones de secuencia especificadas (PostgreSQL)</td></tr> <tr><td><code>-&gt;always()</code></td> <td>Define la prioridad de los valores de secuencia sobre la entrada para una columna de identidad (PostgreSQL)</td></tr></tbody></table> <p><a name="modifying-columns"></a></p> <h3 id="modificando-columnas"><a href="#modificando-columnas" aria-hidden="true" class="header-anchor">#</a> Modificando Columnas</h3> <h4 id="prerequisitos"><a href="#prerequisitos" aria-hidden="true" class="header-anchor">#</a> Prerequisitos</h4> <p>Antes de modificar una columna, asegúrate de agregar la dependencia <code>doctrine/dbal</code> a tu archivo <code>composer.json</code>. La biblioteca DBAL de Doctrine es usada para determinar el estado actual de la columna y crear las consultas SQL necesarias para hacer los ajustes especificados a la columna:</p> <div class="language-php extra-class"><pre class="language-php"><code>composer <span class="token keyword">require</span> doctrine<span class="token operator">/</span>dbal
</code></pre></div><h4 id="actualizando-los-atributos-de-columna"><a href="#actualizando-los-atributos-de-columna" aria-hidden="true" class="header-anchor">#</a> Actualizando los atributos de Columna</h4> <p>El método <code>change</code> permite que modifiques algunos tipos de columna existentes a un nuevo tipo o modifiques los atributos de la columna. Por ejemplo, puedes querer aumentar el tamaño de una columna tipo cadena. Para ver el método <code>change</code> en acción, vamos a aumentar el tamaño de la columna <code>name</code> de 25 a 50 caracteres:</p> <div class="language-php extra-class"><pre class="language-php"><code>Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Blueprint <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>También podríamos modificar una columna para que acepte valores nulos:</p> <div class="language-php extra-class"><pre class="language-php"><code>Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Blueprint <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">change</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="danger custom-block"><p class="custom-block-title">Nota</p> <p>Solamente los siguientes tipos de columna pueden ser &quot;cambiados&quot;: bigInteger, binary, boolean, date, dateTime, dateTimeTz, decimal, integer, json, longText, mediumText, smallInteger, string, text, time, unsignedBigInteger, unsignedInteger y unsignedSmallInteger.</p></div> <h4 id="renombrando-columnas"><a href="#renombrando-columnas" aria-hidden="true" class="header-anchor">#</a> Renombrando Columnas</h4> <p>Para renombrar una columna, puedes usar el método <code>renameColumn</code> en el constructor de esquemas. Antes de renombrar una columna, asegúrate de agregar la dependencia <code>doctrine/dbal</code> a tu archivo <code>composer.json</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Blueprint <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">renameColumn</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'from'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'to'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="danger custom-block"><p class="custom-block-title">Nota</p> <p>Renombrar alguna columna en una tabla que también tiene una columna de tipo <code>enum</code> no es soportado actualmente.</p></div> <p><a name="dropping-columns"></a></p> <h3 id="eliminando-columnas"><a href="#eliminando-columnas" aria-hidden="true" class="header-anchor">#</a> Eliminando Columnas</h3> <p>Para eliminar una columna, usa el método <code>dropColumn</code> en el constructor de esquemas. Antes de eliminar columnas de una base de datos SQLite, necesitarás agregar la dependencia <code>doctrine/dbal</code> a tu archivo <code>composer.json</code> y ejecutar el comando <code>composer update</code> en tu terminal para instalar la biblioteca:</p> <div class="language-php extra-class"><pre class="language-php"><code>Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Blueprint <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dropColumn</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Puedes eliminar múltiples columnas de una tabla al pasar un arreglo de nombres de columna al método <code>dropColumn</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Blueprint <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dropColumn</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'votes'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'avatar'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'location'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="danger custom-block"><p class="custom-block-title">Nota</p> <p>Eliminar o modificar múltiples columnas dentro de una sola migración al momento de usar una base de datos SQLite no está soportado.</p></div> <h4 id="alias-de-comandos-disponibles"><a href="#alias-de-comandos-disponibles" aria-hidden="true" class="header-anchor">#</a> Alias de Comandos Disponibles</h4> <table><thead><tr><th>Comando</th> <th>Descripción</th></tr></thead> <tbody><tr><td><code>$table-&gt;dropMorphs('morphable');</code></td> <td>Elimina las columnas <code>morphable_id</code> y <code>morphable_type</code>.</td></tr> <tr><td><code>$table-&gt;dropRememberToken();</code></td> <td>Eliminar la columna <code>remember_token</code>.</td></tr> <tr><td><code>$table-&gt;dropSoftDeletes();</code></td> <td>Eliminar la columna <code>deleted_at</code>.</td></tr> <tr><td><code>$table-&gt;dropSoftDeletesTz();</code></td> <td>Alias del método <code>dropSoftDeletes()</code>.</td></tr> <tr><td><code>$table-&gt;dropTimestamps();</code></td> <td>Eliminar las columnas <code>created_at</code> y <code>updated_at</code>.</td></tr> <tr><td><code>$table-&gt;dropTimestampsTz();</code></td> <td>Alias del método <code>dropTimestamps()</code>.</td></tr></tbody></table> <p><a name="indexes"></a></p> <h2 id="indices"><a href="#indices" aria-hidden="true" class="header-anchor">#</a> Índices</h2> <p><a name="creating-indexes"></a></p> <h3 id="creando-indices"><a href="#creando-indices" aria-hidden="true" class="header-anchor">#</a> Creando Índices</h3> <p>El constructor de esquemas soporta varios tipos de índices. Primero, veamos un ejemplo que especifica que los valores de una columna deben ser únicos. Para crear el índice, podemos encadenar el método <code>unique</code> en la definición de columna:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Alternativamente, puedes crear el índice después de la definición de la columna. Por ejemplo:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Incluso puedes pasar un arreglo de columnas a un método de índice para crear un índice compuesto (o combinado) :</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'account_id'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'created_at'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Laravel generará automáticamente un nombre de índice razonable, pero puedes pasar un segundo argumento al método para especificar el nombre por ti mismo.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'unique_email'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="tipos-de-indice-disponibles"><a href="#tipos-de-indice-disponibles" aria-hidden="true" class="header-anchor">#</a> Tipos de Índice Disponibles</h4> <p>Cada método de índice acepta un segundo argumento opcional para especificar el nombre del índice. Si se omite, el nombre se derivará de los nombres de la tabla y la(s) columna(s).</p> <table><thead><tr><th>Comando</th> <th>Descripción</th></tr></thead> <tbody><tr><td><code>$table-&gt;primary('id');</code></td> <td>Agrega una clave primaria.</td></tr> <tr><td><code>$table-&gt;primary(['id', 'parent_id']);</code></td> <td>Agrega claves compuestas.</td></tr> <tr><td><code>$table-&gt;unique('email');</code></td> <td>Agrega un índice único.</td></tr> <tr><td><code>$table-&gt;index('state');</code></td> <td>Agrega un índice con valores repetidos.</td></tr> <tr><td><code>$table-&gt;spatialIndex('location');</code></td> <td>Agrega un índice espacial. (excepto SQLite)</td></tr></tbody></table> <h4 id="longitudes-de-indices-mysql-mariadb"><a href="#longitudes-de-indices-mysql-mariadb" aria-hidden="true" class="header-anchor">#</a> Longitudes de Índices &amp; MySQL / MariaDB</h4> <p>Laravel usa el conjunto de caracteres <code>utf8mb4</code> por defecto, el cual incluye soporte para almacenar &quot;emojis&quot; en la base de datos. Si estás ejecutando una versión de MySQL más antigua que la versión 5.7.7 o más vieja que la versión 10.2.2 de MariaDB, puedes que necesites configurar manualmente la longitud de cadena predeterminada generada por las migraciones con el propósito de que MySQL cree los índices para estos. Puedes configurar esto ejecutando el método <code>Schema::defaultStringLength</code> dentro de tu <code>AppServiceProvider</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Schema</span><span class="token punctuation">;</span>

<span class="token comment">/**
* Bootstrap any application services.
*
* @return void
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">defaultStringLength</span><span class="token punctuation">(</span><span class="token number">191</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Alternativamente, puedes habilitar la opción <code>innodb_large_prefix</code> para tu base de datos. Debes referirte a la documentación de tu base de datos para conocer las instrucciones de cómo habilitar ésta apropiadamente.</p> <p><a name="renaming-indexes"></a></p> <h3 id="renombrando-indices"><a href="#renombrando-indices" aria-hidden="true" class="header-anchor">#</a> Renombrando Índices</h3> <p>Para renombrar un índice, puedes usar el método <code>renameIndex</code>. Este método acepta el nombre del índice actual como primer argumento y el nombre deseado como segundo argumento:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">renameIndex</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'from'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'to'</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="dropping-indexes"></a></p> <h3 id="eliminando-indices"><a href="#eliminando-indices" aria-hidden="true" class="header-anchor">#</a> Eliminando Índices</h3> <p>Para eliminar un índice, debes especificar el nombre del índice. De forma predeterminada, Laravel asigna automáticamente un nombre razonable para los índices. Concatena el nombre de la tabla, el nombre de la columna indexada y el tipo de índice. Aquí están algunos ejemplos:</p> <table><thead><tr><th>Comando</th> <th>Descripción</th></tr></thead> <tbody><tr><td><code>$table-&gt;dropPrimary('users_id_primary');</code></td> <td>Eliminar una clave primaria de la tabla &quot;users&quot;.</td></tr> <tr><td><code>$table-&gt;dropUnique('users_email_unique');</code></td> <td>Elimina un índice único de la tabla &quot;users&quot;.</td></tr> <tr><td><code>$table-&gt;dropIndex('geo_state_index');</code></td> <td>Elimina un índice básico de la tabla &quot;geo&quot;.</td></tr> <tr><td><code>$table-&gt;dropSpatialIndex('geo_location_spatialindex');</code></td> <td>Elimina un índice espacial de la tabla &quot;geo&quot; (excepto SQLite).</td></tr></tbody></table> <p>Si pasas un arreglo de columnas dentro de un método que elimina los índices, el nombre de índice convencional será generado basado en el nombre de la tabla, columnas y tipo de clave:</p> <div class="language-php extra-class"><pre class="language-php"><code>Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'geo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Blueprint <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dropIndex</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'state'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Drops index 'geo_state_index'</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="foreign-key-constraints"></a></p> <h3 id="restricciones-de-clave-foranea"><a href="#restricciones-de-clave-foranea" aria-hidden="true" class="header-anchor">#</a> Restricciones de Clave Foránea</h3> <p>Laravel también proporciona soporte para la creación de restricciones de clave foránea, las cuales son usadas para forzar la integridad referencial a nivel de base de datos.  Por ejemplo, vamos a definir una columna <code>user_id</code> en la tabla <code>posts</code> que referencia la columna <code>id</code> en una tabla <code>users</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'posts'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>Blueprint <span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">unsignedBigInteger</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user_id'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">foreign</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user_id'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">references</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>También puedes especificar la acción deseada para las propiedades &quot;on delete&quot; y &quot;on update&quot; de la restricción:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">foreign</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user_id'</span><span class="token punctuation">)</span>
      <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">references</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span>
      <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">onDelete</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'cascade'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Para eliminar una clave foránea, puedes usar el método <code>dropForeign</code>. Las restricciones de clave foránea usan la misma convención de nombres que los índices. Así, concatenaremos el nombre de la tabla y el de columna en la restricción luego agrega el sufijo &quot;_foreign&quot; al nombre:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dropForeign</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'posts_user_id_foreign'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>O, puedes pasar un arreglo de valores el cual usará automáticamente el nombre de restricción convencional al momento de eliminar:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">dropForeign</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'user_id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Puedes habilitar o deshabilitar las restricciones de clave foránea dentro de tus migraciones usando los siguientes métodos:</p> <div class="language-php extra-class"><pre class="language-php"><code>Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">enableForeignKeyConstraints</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">disableForeignKeyConstraints</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="danger custom-block"><p class="custom-block-title">Nota</p> <p>SQLite deshabilita las restricciones de clave foránea de forma predeterminada. Al usar SQLite, asegúrese de <a href="/docs/%7B%7Bversion%7D%7D/database#configuration">habilitar el soporte de clave foránea</a> en la configuración de tu base de datos antes de intentar crearlos en sus migraciones.</p></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pagination.html" class="prev">
          Base de datos: Paginación
        </a></span> <span class="next"><a href="/seeding.html">
          Base de datos: Seeding
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.bf22240a.js" defer></script><script src="/assets/js/50.5cb081e0.js" defer></script>
  </body>
</html>
