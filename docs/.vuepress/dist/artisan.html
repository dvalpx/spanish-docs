<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Consola Artisan | Documentación de Laravel en Español</title>
    <meta name="description" content="Documentación de Laravel en Español">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:300,700|Miriam+Libre">
    
    <link rel="preload" href="/assets/css/0.styles.0cc2d3c3.css" as="style"><link rel="preload" href="/assets/js/app.bf22240a.js" as="script"><link rel="preload" href="/assets/js/9.60a01cba.js" as="script"><link rel="prefetch" href="/assets/js/10.8a8a99df.js"><link rel="prefetch" href="/assets/js/11.ec476e2f.js"><link rel="prefetch" href="/assets/js/12.6db1eb13.js"><link rel="prefetch" href="/assets/js/13.92d78bb5.js"><link rel="prefetch" href="/assets/js/14.1a0ad5f1.js"><link rel="prefetch" href="/assets/js/15.abc982c9.js"><link rel="prefetch" href="/assets/js/16.7cf1a759.js"><link rel="prefetch" href="/assets/js/17.4abfc664.js"><link rel="prefetch" href="/assets/js/18.85b19837.js"><link rel="prefetch" href="/assets/js/19.8c9dfcd5.js"><link rel="prefetch" href="/assets/js/2.dcb6cf45.js"><link rel="prefetch" href="/assets/js/20.c1b9de54.js"><link rel="prefetch" href="/assets/js/21.469ffab3.js"><link rel="prefetch" href="/assets/js/22.2d14e150.js"><link rel="prefetch" href="/assets/js/23.7a4dcc9a.js"><link rel="prefetch" href="/assets/js/24.534e59f1.js"><link rel="prefetch" href="/assets/js/25.eaac1c07.js"><link rel="prefetch" href="/assets/js/26.8e9180e0.js"><link rel="prefetch" href="/assets/js/27.2cd2ace8.js"><link rel="prefetch" href="/assets/js/28.9f7dcf6d.js"><link rel="prefetch" href="/assets/js/29.06a87f0d.js"><link rel="prefetch" href="/assets/js/3.b62bf0b4.js"><link rel="prefetch" href="/assets/js/30.b03f86ec.js"><link rel="prefetch" href="/assets/js/31.edce81f6.js"><link rel="prefetch" href="/assets/js/32.6657300b.js"><link rel="prefetch" href="/assets/js/33.8dc49209.js"><link rel="prefetch" href="/assets/js/34.03cbee56.js"><link rel="prefetch" href="/assets/js/35.5439db2e.js"><link rel="prefetch" href="/assets/js/36.83d5a264.js"><link rel="prefetch" href="/assets/js/37.4066824e.js"><link rel="prefetch" href="/assets/js/38.c3fe05aa.js"><link rel="prefetch" href="/assets/js/39.52ef8667.js"><link rel="prefetch" href="/assets/js/4.bd0ebba2.js"><link rel="prefetch" href="/assets/js/40.2c54d702.js"><link rel="prefetch" href="/assets/js/41.775bc6e1.js"><link rel="prefetch" href="/assets/js/42.6541d60b.js"><link rel="prefetch" href="/assets/js/43.20091aea.js"><link rel="prefetch" href="/assets/js/44.75b71ccc.js"><link rel="prefetch" href="/assets/js/45.6b36a3a8.js"><link rel="prefetch" href="/assets/js/46.6ea236af.js"><link rel="prefetch" href="/assets/js/47.0e0ee374.js"><link rel="prefetch" href="/assets/js/48.b6beb9b8.js"><link rel="prefetch" href="/assets/js/49.ae33b521.js"><link rel="prefetch" href="/assets/js/5.2c350d8b.js"><link rel="prefetch" href="/assets/js/50.5cb081e0.js"><link rel="prefetch" href="/assets/js/51.3e0281e2.js"><link rel="prefetch" href="/assets/js/52.e1fae1d6.js"><link rel="prefetch" href="/assets/js/53.0a9d4aed.js"><link rel="prefetch" href="/assets/js/54.55bc9113.js"><link rel="prefetch" href="/assets/js/55.e964fdb4.js"><link rel="prefetch" href="/assets/js/56.3abed8a0.js"><link rel="prefetch" href="/assets/js/57.df09269b.js"><link rel="prefetch" href="/assets/js/58.3ce37458.js"><link rel="prefetch" href="/assets/js/59.7a840aeb.js"><link rel="prefetch" href="/assets/js/6.6fce793d.js"><link rel="prefetch" href="/assets/js/60.b4fe788b.js"><link rel="prefetch" href="/assets/js/61.e45356bb.js"><link rel="prefetch" href="/assets/js/62.0d75cf78.js"><link rel="prefetch" href="/assets/js/63.0ecae205.js"><link rel="prefetch" href="/assets/js/64.90fb2c2d.js"><link rel="prefetch" href="/assets/js/65.7c476002.js"><link rel="prefetch" href="/assets/js/66.802dee8b.js"><link rel="prefetch" href="/assets/js/67.ae965c66.js"><link rel="prefetch" href="/assets/js/68.220c04d8.js"><link rel="prefetch" href="/assets/js/69.bf607b92.js"><link rel="prefetch" href="/assets/js/7.b956f78c.js"><link rel="prefetch" href="/assets/js/70.dea3d878.js"><link rel="prefetch" href="/assets/js/71.1f786e34.js"><link rel="prefetch" href="/assets/js/72.4bd65b39.js"><link rel="prefetch" href="/assets/js/73.414b29bd.js"><link rel="prefetch" href="/assets/js/74.b5ab4f13.js"><link rel="prefetch" href="/assets/js/75.f12fbb27.js"><link rel="prefetch" href="/assets/js/76.a140d22b.js"><link rel="prefetch" href="/assets/js/77.2595933c.js"><link rel="prefetch" href="/assets/js/78.46bb4eff.js"><link rel="prefetch" href="/assets/js/79.c549a0e3.js"><link rel="prefetch" href="/assets/js/8.3be12d8d.js"><link rel="prefetch" href="/assets/js/80.1b9cd731.js"><link rel="prefetch" href="/assets/js/81.6aa05825.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0cc2d3c3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Documentación de Laravel en Español</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Primeros Pasos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Conceptos De Arquitectura</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Fundamentos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Frontend</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Seguridad</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Profundizando</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/artisan.html" class="active sidebar-link">Consola Artisan</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/artisan.html#introduccion" class="sidebar-link">Introducción</a></li><li class="sidebar-sub-header"><a href="/artisan.html#escritura-de-comandos" class="sidebar-link">Escritura de Comandos</a></li><li class="sidebar-sub-header"><a href="/artisan.html#definicion-de-expectativas-de-entrada" class="sidebar-link">Definición de Expectativas de Entrada</a></li><li class="sidebar-sub-header"><a href="/artisan.html#entrada-y-salida-e-s-de-comandos" class="sidebar-link">Entrada y salida (E/S) de Comandos</a></li><li class="sidebar-sub-header"><a href="/artisan.html#registro-de-comandos" class="sidebar-link">Registro de Comandos</a></li><li class="sidebar-sub-header"><a href="/artisan.html#ejecucion-de-comandos-de-forma-programatica" class="sidebar-link">Ejecución de Comandos de Forma Programática</a></li></ul></li><li><a href="/broadcasting.html" class="sidebar-link">Broadcasting</a></li><li><a href="/cache.html" class="sidebar-link">Caché</a></li><li><a href="/collections.html" class="sidebar-link">Collecciones</a></li><li><a href="/events.html" class="sidebar-link">Eventos</a></li><li><a href="/filesystem.html" class="sidebar-link">Almacenamiento De Archivos</a></li><li><a href="/helpers.html" class="sidebar-link">Helpers</a></li><li><a href="/mail.html" class="sidebar-link">Correos Electrónicos</a></li><li><a href="/notifications.html" class="sidebar-link">Notificaciones</a></li><li><a href="/packages.html" class="sidebar-link">Desarrollo de Paquetes</a></li><li><a href="/queues.html" class="sidebar-link">Colas De Trabajo</a></li><li><a href="/scheduling.html" class="sidebar-link">Programación de tareas</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Bases De Datos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>ORM Eloquent</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Pruebas</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Paquetes oficiales</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><div><h1 id="consola-artisan"><a class="header-anchor" href="#consola-artisan" aria-hidden="true">#</a> Consola Artisan</h1> <ul><li><a href="#introduction">Introducción</a> <ul><li><a href="#tinker">Tinker (REPL)</a></li></ul></li> <li><a href="#writing-commands">Escritura de Comandos</a> <ul><li><a href="#generating-commands">Generación de Comandos</a></li> <li><a href="#command-structure">Estructura de un Comando</a></li> <li><a href="#closure-commands">Comandos de Función Anónima (Closure)</a></li></ul></li> <li><a href="#defining-input-expectations">Definición de Expectativas de Entrada</a> <ul><li><a href="#arguments">Argumentos</a></li> <li><a href="#options">Opciones</a></li> <li><a href="#input-arrays">Arreglos como entradas</a></li> <li><a href="#input-descriptions">Descripciones de Entrada </a></li></ul></li> <li><a href="#command-io">Entrada/Salida de Comandos</a> <ul><li><a href="#retrieving-input">Recuperación de Entradas</a></li> <li><a href="#prompting-for-input">Solicitud de Entradas</a></li> <li><a href="#writing-output">Escritura de Salida</a></li></ul></li> <li><a href="#registering-commands">Registro de Comandos</a></li> <li><a href="#programmatically-executing-commands">Ejecución de Comandos de Forma Programática</a> <ul><li><a href="#calling-commands-from-other-commands">Llamando Comandos Desde Otros Comandos</a></li></ul></li></ul> <p><a name="introduction"></a></p> <h2 id="introduccion"><a class="header-anchor" href="#introduccion" aria-hidden="true">#</a> Introducción</h2> <p>Artisan es la interfaz de línea de comando incluida con Laravel. Provee un número de comandos útiles que pueden ayudarte mientras construyes tu aplicación. Para ver una lista de todos los comandos Artisan disponibles, puedes usar el comando <code>list</code>:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code>php artisan list
</code></pre></div><p>También cada comando incluye una &quot;ayuda&quot; en pantalla, la cual muestra y describe los argumentos y opciones disponibles. Para ver una pantalla de ayuda, coloca <code>help</code> antes del nombre del comando:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code>php artisan help migrate
</code></pre></div><h3 id="tinker-repl"><a class="header-anchor" href="#tinker-repl" aria-hidden="true">#</a> Tinker REPL</h3> <p>Todas las aplicaciones de Laravel incluyen Tinker, un REPL desarrollado usando el paquete <a href="https://github.com/bobthecow/psysh" target="_blank" rel="noopener noreferrer">PsySH<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Tinker te permite interactuar con toda tu aplicación de Laravel en la línea de comando, incluyendo el ORM Eloquent, colas de trabajo, eventos, entre otros. Para entrar en el entorno de Tinker, ejecuta el comando de Artisan <code>tinker</code>:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code>php artisan tinker
</code></pre></div><p>Puedes publicar el archivo de configuración de Tinker usando el comando vendor:publish:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code>php artisan vendor<span class="token punctuation">:</span>publish <span class="token operator">--</span>provider<span class="token operator">=</span><span class="token double-quoted-string string">&quot;Laravel\Tinker\TinkerServiceProvider&quot;</span>
</code></pre></div><h4 id="lista-blanca-de-comandos"><a class="header-anchor" href="#lista-blanca-de-comandos" aria-hidden="true">#</a> Lista Blanca de Comandos</h4> <p>Tinker utiliza una lista blanca para determinar qué comandos de Artisan pueden ejecutarse dentro de su shell. Por defecto, puedes ejecutar los comandos <code>clear-compiled</code>, <code>down</code>, <code>env</code>, <code>inspire</code>, <code>migrate</code>, <code>optimize</code> y <code>up</code>. Si deseas hacer una lista blanca de más comandos, puede agregarlos al arreglo <code>command</code> en tu archivo de configuración <code>tinker.php</code>:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token single-quoted-string string">'commands'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token comment">// App\Console\Commands\ExampleCommand::class,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="lista-negra-de-alias"><a class="header-anchor" href="#lista-negra-de-alias" aria-hidden="true">#</a> Lista Negra de Alias</h4> <p>Por lo general, Tinker automáticamente asigna alias a las clases según las necesites en Tinker. Sin embargo, es posible que desees que nunca se agreguen alias a algunas clases. Puedes lograr esto listando las clases en el arreglo <code>dont_alias</code> de tu archivo de configuración <code>tinker.php</code>:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token single-quoted-string string">'dont_alias'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    App\<span class="token package">User</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p><a name="writing-commands"></a></p> <h2 id="escritura-de-comandos"><a class="header-anchor" href="#escritura-de-comandos" aria-hidden="true">#</a> Escritura de Comandos</h2> <p>Además de los comandos proporcionados por Artisan, también puedes crear tus propios comandos personalizados. Los comandos son típicamente almacenados en el directorio <code>app/Console/Commands</code>; sin embargo, eres libre de escoger tu propia ubicación de almacenamiento, siempre y cuando tus comandos puedan ser cargados por Composer.</p> <p><a name="generating-commands"></a></p> <h3 id="generacion-de-comandos"><a class="header-anchor" href="#generacion-de-comandos" aria-hidden="true">#</a> Generación de Comandos</h3> <p>Para crear un nuevo comando, usa el comando Artisan <code>make:command</code>. Este comando creará una nueva clase de comando en el directorio <code>app/Console/Commands</code>. No te preocupes si este directorio no existe en tu aplicación, pues éste será creado la primera vez que ejecutes el comando Artisan <code>make:command</code>. El comando generado incluirá el conjunto de propiedades y métodos por defecto que están presentes en todos los comandos:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code>php artisan make<span class="token punctuation">:</span>command SendEmails
</code></pre></div><p><a name="command-structure"></a></p> <h3 id="estructura-de-un-comando"><a class="header-anchor" href="#estructura-de-un-comando" aria-hidden="true">#</a> Estructura de un Comando</h3> <p>Después de generar tu comando, debes rellenar las propiedades <code>signature</code> y <code>description</code> de la clase, las cuales serán usadas cuando se muestra tu comando en la pantalla <code>list</code>. El método <code>handle</code> será llamado cuando tu comando es ejecutado. Puedes colocar tu lógica del comando en este método.</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Para una mayor reutilización del código, es una buena práctica mantener ligeros tus comandos de consola y dejar que se remitan a los servicios de aplicaciones para llevar a cabo sus tareas. En el siguiente ejemplo, toma en cuenta que inyectamos una clase de servicio para hacer el &quot;trabajo pesado&quot; de enviar los correos electrónicos.</p></div></div> <p>Echemos un vistazo a un comando de ejemplo. Observa que podemos inyectar cualquier dependencia que necesitemos en el método <code>handle()</code> del comando. El <a href="/docs/%7B%7Bversion%7D%7D/container">contenedor de servicios</a> de Laravel automáticamente inyectará todas las dependencias cuyos tipos (interfaces y/o clases) estén asignados en los parámetros del constructor (type-hinting):</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Console<span class="token punctuation">\</span>Commands</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>DripEmailer</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Console<span class="token punctuation">\</span>Command</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">SendEmails</span> <span class="token keyword">extends</span> <span class="token class-name">Command</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * The name and signature of the console command.
    *
    * @var string
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$signature</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'email:send {user}'</span><span class="token punctuation">;</span>

    <span class="token comment">/**
    * The console command description.
    *
    * @var string
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$description</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'Send drip e-mails to a user'</span><span class="token punctuation">;</span>

    <span class="token comment">/**
    * Create a new command instance.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">parent</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">__construct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
    * Execute the console command.
    *
    * @param  \App\DripEmailer  $drip
    * @return mixed
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span>DripEmailer <span class="token variable">$drip</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$drip</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">send</span><span class="token punctuation">(</span>User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">argument</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p><a name="closure-commands"></a></p> <h3 id="comandos-usando-una-funcion-anonima-closure"><a href="#comandos-usando-una-funcion-anonima-closure" aria-hidden="true" class="header-anchor">#</a> Comandos usando una función anónima (Closure)</h3> <p>Los comandos basados en Closure proporcionan una alternativa para definir comandos de consola como clases. De la misma manera que los Closures de rutas son una alternativa para los controladores, piensa en los Closures de comandos como una alternativa a las clases de comandos. Dentro del método <code>commands</code> de tu archivo <code>app/Console/Kernel.php</code>, Laravel carga el archivo <code>routes/console.php</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Register the Closure based commands for the application.
*
* @return void
*/</span>
<span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function">commands</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">require</span> <span class="token function">base_path</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'routes/console.php'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Aunque este archivo no define rutas HTTP, define los puntos de entrada (rutas) a tu aplicación basados en consola. Dentro de este archivo, puedes definir todas sus rutas basadas en Closure usando el método <code>Artisan::command</code>. El método <code>command</code> acepta dos argumentos: la <a href="#defining-input-expectations">firma del comando</a> y un Closure, el cual recibe los argumentos y opciones de los comandos:</p> <div class="language-php extra-class"><pre class="language-php"><code>Artisan<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'build {project}'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$project</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;Building <span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$project</span><span class="token punctuation">}</span></span>!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>El Closure está vinculado a la instancia del comando subyacente, así tienes acceso completo a todos los métodos helper a los que normalmente podrías acceder en una clase de comando completa.</p> <h4 id="determinacion-de-tipos-type-hinting-de-dependencias"><a href="#determinacion-de-tipos-type-hinting-de-dependencias" aria-hidden="true" class="header-anchor">#</a> Determinación de tipos (Type-Hinting) de Dependencias</h4> <p>Además de recibir los argumentos y opciones de tu comando, en los Closures de comandos puedes también determinar los tipos de las dependencias adicionales que te gustaría resolver del <a href="/docs/%7B%7Bversion%7D%7D/container">contenedor de servicios</a>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>User</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>DripEmailer</span><span class="token punctuation">;</span>

Artisan<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email:send {user}'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>DripEmailer <span class="token variable">$drip</span><span class="token punctuation">,</span> <span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$drip</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">send</span><span class="token punctuation">(</span>User<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="descripciones-de-un-closure-de-comando"><a href="#descripciones-de-un-closure-de-comando" aria-hidden="true" class="header-anchor">#</a> Descripciones de un Closure de Comando</h4> <p>Al definir un comando basado en Closure, puedes usar el método <code>describe</code> para agregar una descripción al comando. Esta descripción será mostrada cuando ejecutes los comandos <code>php artisan list</code> o <code>php artisan help</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>Artisan<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'build {project}'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$project</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token double-quoted-string string">&quot;Building <span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$project</span><span class="token punctuation">}</span></span>!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">describe</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Build the project'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="defining-input-expectations"></a></p> <h2 id="definicion-de-expectativas-de-entrada"><a href="#definicion-de-expectativas-de-entrada" aria-hidden="true" class="header-anchor">#</a> Definición de Expectativas de Entrada</h2> <p>Al escribir comandos de consola, es común recopilar información del usuario a través de argumentos u opciones. Laravel hace que sea muy conveniente definir la entrada que esperas del usuario usando la propiedad <code>signature</code> en tus comandos. La propiedad <code>signature</code> te permite definir el nombre, los argumentos y las opciones para el comando en una sintaxis tipo ruta simple y expresiva.</p> <p><a name="arguments"></a></p> <h3 id="argumentos"><a href="#argumentos" aria-hidden="true" class="header-anchor">#</a> Argumentos</h3> <p>Todos los argumentos y opciones suministrados por el usuario están envueltos en llaves. En el siguiente ejemplo, el comando define un argumento <strong>obligatorio</strong> <code>user</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* The name and signature of the console command.
*
* @var string
*/</span>
<span class="token keyword">protected</span> <span class="token variable">$signature</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'email:send {user}'</span><span class="token punctuation">;</span>
</code></pre></div><p>También puedes hacer que los argumentos sean opcionales y definir valores predeterminados para los argumentos:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Optional argument...</span>
email<span class="token punctuation">:</span>send <span class="token punctuation">{</span>user<span class="token operator">?</span><span class="token punctuation">}</span>

<span class="token comment">// Optional argument with default value...</span>
email<span class="token punctuation">:</span>send <span class="token punctuation">{</span>user<span class="token operator">=</span>foo<span class="token punctuation">}</span>
</code></pre></div><p><a name="options"></a></p> <h3 id="opciones"><a href="#opciones" aria-hidden="true" class="header-anchor">#</a> Opciones</h3> <p>Las opciones, como los argumentos, son otra forma de entrada de usuario. Las opciones son prefijadas por dos guiones (<code>--</code>) cuando se especifican en la línea de comando. Hay dos tipos de opciones: aquellas que reciben un valor y las que no. Las opciones que no reciban un valor se comportarán como un &quot;interruptor&quot; booleano. Echemos un vistazo a un ejemplo de este tipo de opción:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* The name and signature of the console command.
*
* @var string
*/</span>
<span class="token keyword">protected</span> <span class="token variable">$signature</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'email:send {user} {--queue}'</span><span class="token punctuation">;</span>
</code></pre></div><p>En este ejemplo, la opción <code>--queue</code> puede ser especificada cuando ejecutas el comando Artisan. Si la opción <code>--queue</code> es pasada, su valor será <code>true</code>. En caso contrario, el valor será <code>false</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan email<span class="token punctuation">:</span>send <span class="token number">1</span> <span class="token operator">--</span>queue
</code></pre></div><p><a name="options-with-values"></a></p> <h4 id="opciones-con-valores"><a href="#opciones-con-valores" aria-hidden="true" class="header-anchor">#</a> Opciones Con Valores</h4> <p>Vamos a ver una opción que espera un valor. Si el usuario debe especificar un valor para una opción, agrega como sufijo el signo <code>=</code> al nombre de la opción:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* The name and signature of the console command.
*
* @var string
*/</span>
<span class="token keyword">protected</span> <span class="token variable">$signature</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'email:send {user} {--queue=}'</span><span class="token punctuation">;</span>
</code></pre></div><p>En este ejemplo, el usuario puede pasar un valor para la opción, de esta manera:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan email<span class="token punctuation">:</span>send <span class="token number">1</span> <span class="token operator">--</span>queue<span class="token operator">=</span><span class="token keyword">default</span>
</code></pre></div><p>Puedes asignar valores por defecto a las opciones especificando el valor predeterminado después del nombre de la opción. Si ningún valor es pasado por el usuario, el valor por defecto será usado:</p> <div class="language-php extra-class"><pre class="language-php"><code>email<span class="token punctuation">:</span>send <span class="token punctuation">{</span>user<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">--</span>queue<span class="token operator">=</span><span class="token keyword">default</span><span class="token punctuation">}</span>
</code></pre></div><p><a name="option-shortcuts"></a></p> <h4 id="atajos-de-opciones"><a href="#atajos-de-opciones" aria-hidden="true" class="header-anchor">#</a> Atajos de opciones</h4> <p>Para asignar un atajo cuando defines una opción, puedes especificarlo antes del nombre de la opción y usar un delimitador <code>|</code> para separar el atajo del nombre completo de la opción:</p> <div class="language-php extra-class"><pre class="language-php"><code>email<span class="token punctuation">:</span>send <span class="token punctuation">{</span>user<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">--</span>Q<span class="token operator">|</span>queue<span class="token punctuation">}</span>
</code></pre></div><p><a name="input-arrays"></a></p> <h3 id="arreglos-como-entradas"><a href="#arreglos-como-entradas" aria-hidden="true" class="header-anchor">#</a> Arreglos como entradas</h3> <p>Si deseas definir argumentos u opciones para esperar entradas de arreglos, puedes usar el carácter <code>*</code>. Primero, vamos a ver un ejemplo que especifica un arreglo como argumento:</p> <div class="language-php extra-class"><pre class="language-php"><code>email<span class="token punctuation">:</span>send <span class="token punctuation">{</span>user<span class="token operator">*</span><span class="token punctuation">}</span>
</code></pre></div><p>Al llamar a este método, los argumentos <code>user</code> pueden pasarse en orden a la línea de comando. Por ejemplo, el siguiente comando establecerá el valor de <code>user</code> como <code>['foo', 'bar']</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan email<span class="token punctuation">:</span>send foo bar
</code></pre></div><p>Al definir una opción que espera un arreglo como entrada, cada valor de la opción pasado al comando debería ser prefijado con el nombre de la opción:</p> <div class="language-php extra-class"><pre class="language-php"><code>    email<span class="token punctuation">:</span>send <span class="token punctuation">{</span>user<span class="token punctuation">}</span> <span class="token punctuation">{</span><span class="token operator">--</span>id<span class="token operator">=</span><span class="token operator">*</span><span class="token punctuation">}</span>

    php artisan email<span class="token punctuation">:</span>send <span class="token operator">--</span>id<span class="token operator">=</span><span class="token number">1</span> <span class="token operator">--</span>id<span class="token operator">=</span><span class="token number">2</span>
</code></pre></div><p><a name="input-descriptions"></a></p> <h3 id="descripciones-de-entrada"><a href="#descripciones-de-entrada" aria-hidden="true" class="header-anchor">#</a> Descripciones de Entrada</h3> <p>Puedes asignar descripciones para los argumentos y opciones de entrada separando el parámetro de la opción usando dos puntos <code>:</code>. Si necesitas un poco más de espacio para definir tu comando, no dudes en extender la definición a través de múltiples líneas:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* The name and signature of the console command.
*
* @var string
*/</span>
<span class="token keyword">protected</span> <span class="token variable">$signature</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'email:send
                        {user : The ID of the user}
                        {--queue= : Whether the job should be queued}'</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="command-io"></a></p> <h2 id="entrada-y-salida-e-s-de-comandos"><a href="#entrada-y-salida-e-s-de-comandos" aria-hidden="true" class="header-anchor">#</a> Entrada y salida (E/S) de Comandos</h2> <p><a name="retrieving-input"></a></p> <h3 id="recuperacion-de-entrada"><a href="#recuperacion-de-entrada" aria-hidden="true" class="header-anchor">#</a> Recuperación de Entrada</h3> <p>Cuando tu comando es ejecutado, obviamente necesitarás acceder a los valores de los argumentos y opciones aceptados por tu comando. Para ello, puedes usar los métodos <code>argument</code> y <code>option</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Execute the console command.
*
* @return mixed
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$userId</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">argument</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Si necesitas recuperar todos los argumentos como un arreglo, llama al método <code>arguments</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$arguments</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">arguments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Las opciones pueden ser recuperadas con tanta facilidad como argumentos utilizando el método <code>option</code>. Para recuperar todas las opciones como un arreglo, llama al método <code>options</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Retrieve a specific option...</span>
<span class="token variable">$queueName</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">option</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'queue'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Retrieve all options...</span>
<span class="token variable">$options</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">options</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Si el argumento o la opción no existe, será retornado <code>null</code>.</p> <p><a name="prompting-for-input"></a></p> <h3 id="solicitud-de-entrada"><a href="#solicitud-de-entrada" aria-hidden="true" class="header-anchor">#</a> Solicitud de Entrada</h3> <p>Además de mostrar salidas, puedes también pedir al usuario que proporcione información durante la ejecución del comando. El método <code>ask</code> le indicará al usuario la pregunta dada, aceptará su entrada, y luego devolverá la entrada del usuario a tu comando:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Execute the console command.
*
* @return mixed
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$name</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">ask</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'What is your name?'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>El método <code>secret</code> es similar a <code>ask</code>, pero la entrada del usuario no será visible para ellos cuando la escriban en la consola. Este método es útil cuando se solicita información confidencial tal como una contraseña:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$password</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">secret</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'What is the password?'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="pedir-confirmacion"><a href="#pedir-confirmacion" aria-hidden="true" class="header-anchor">#</a> Pedir confirmación</h4> <p>Si necesitas pedirle al usuario una simple confirmación, puedes usar el método <code>confirm</code>. Por defecto, este método devolverá <code>false</code>. Sin embargo, si el usuario ingresa <code>y</code> o <code>yes</code> en respuesta a la solicitud, el método devolverá <code>true</code>.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">confirm</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Do you wish to continue?'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="autocompletado"><a href="#autocompletado" aria-hidden="true" class="header-anchor">#</a> Autocompletado</h4> <p>El método <code>anticipate</code> puede ser usado para proporcionar autocompletado para posibles opciones. El usuario aún puede elegir cualquier respuesta, independientemente de las sugerencias de autocompletado:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$name</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">anticipate</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'What is your name?'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'Taylor'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Dayle'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="preguntas-de-seleccion-multiple"><a href="#preguntas-de-seleccion-multiple" aria-hidden="true" class="header-anchor">#</a> Preguntas de selección múltiple</h4> <p>Si necesitas darle al usuario un conjunto de opciones predefinadas, puedes usar el método <code>choice</code>. Puedes establecer el índice del valor predeterminado del arreglo que se devolverá si no se escoge ninguna opción:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$name</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">choice</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'What is your name?'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'Taylor'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Dayle'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$defaultIndex</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="writing-output"></a></p> <h3 id="escritura-de-salida"><a href="#escritura-de-salida" aria-hidden="true" class="header-anchor">#</a> Escritura de Salida</h3> <p>Para enviar datos de salida a la consola, usa los métodos <code>line</code>, <code>info</code>, <code>comment</code>, <code>question</code> y <code>error</code>. Cada uno de estos métodos usará colores ANSI apropiados para su propósito. Por ejemplo, vamos a mostrar alguna información general al usuario. Normalmente, el método <code>info</code> se mostrará en la consola como texto verde:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Execute the console command.
*
* @return mixed
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Display this on the screen'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Para mostrar un mensaje de error, usa el método <code>error</code>. El texto del mensaje de error es típicamente mostrado en rojo:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Something went wrong!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Si desea mostrar la salida de consola sin color, usa el método <code>line</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">line</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Display this on the screen'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="disenos-de-tabla"><a href="#disenos-de-tabla" aria-hidden="true" class="header-anchor">#</a> Diseños de tabla</h4> <p>El método <code>table</code> hace que sea fácil formatear correctamente varias filas / columnas de datos. Simplemente pasa los encabezados y filas al método. El ancho y la altura se calcularán dinámicamente en función de los datos dados:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$headers</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'Name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Email'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token variable">$users</span> <span class="token operator">=</span> App\<span class="token package">User</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">toArray</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token variable">$headers</span><span class="token punctuation">,</span> <span class="token variable">$users</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="barras-de-progreso"><a href="#barras-de-progreso" aria-hidden="true" class="header-anchor">#</a> Barras de progreso</h4> <p>Para tareas de larga ejecución, podría ser útil mostrar un indicador de progreso. Usando el objeto de salida, podemos iniciar, avanzar y detener la Barra de Progreso. Primero, define el número total de pasos por los que el proceso pasará. Luego, avanza la barra de progreso después de procesar cada elemento:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$users</span> <span class="token operator">=</span> App\<span class="token package">User</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$bar</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">output</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">createProgressBar</span><span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$users</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$bar</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$users</span> <span class="token keyword">as</span> <span class="token variable">$user</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">performTask</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token variable">$bar</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">advance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token variable">$bar</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">finish</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Para opciones más avanzadas, verifica la <a href="https://symfony.com/doc/current/components/console/helpers/progressbar.html" target="_blank" rel="noopener noreferrer">documentación del componente Progress Bar de Symfony<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p><a name="registering-commands"></a></p> <h2 id="registro-de-comandos"><a href="#registro-de-comandos" aria-hidden="true" class="header-anchor">#</a> Registro de Comandos</h2> <p>Debido a la llamada al método <code>load</code> en el método <code>commands</code> del kernel de tu consola, todos los comandos dentro del directorio <code>app/Console/Commands</code> se registrarán automáticamente con Artisan. De hecho, puedes realizar llamadas adicionales al método <code>load</code> para escanear otros directorios en busca de comandos Artisan:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Register the commands for the application.
*
* @return void
*/</span>
<span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function">commands</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token constant">__DIR__</span><span class="token punctuation">.</span><span class="token single-quoted-string string">'/Commands'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token constant">__DIR__</span><span class="token punctuation">.</span><span class="token single-quoted-string string">'/MoreCommands'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>También puedes registrar comandos manualmente agregando su nombre de clase en la propiedad <code>$commands</code> de tu archivo <code>app/Console/Kernel.php</code>. Cuando Artisan arranca, todos los comandos listados en esta propiedad serán resueltos por el <a href="/docs/%7B%7Bversion%7D%7D/container">contenedor de servicios</a> y serán registrados con Artisan:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">protected</span> <span class="token variable">$commands</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    Commands\<span class="token package">SendEmails</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="programmatically-executing-commands"></a></p> <h2 id="ejecucion-de-comandos-de-forma-programatica"><a href="#ejecucion-de-comandos-de-forma-programatica" aria-hidden="true" class="header-anchor">#</a> Ejecución de Comandos de Forma Programática</h2> <p>En ocasiones, es posible que desees ejecutar un comando de Artisan fuera de la interfaz de línea de comandos (CLI). Por ejemplo, puedes desear ejecutar un comando Artisan de una ruta o controlador. Puedes usar el método <code>call</code> en el facade <code>Artisan</code> para lograr esto. El método <code>call</code> acepta el nombre o la clase del comando como primer argumento y un arreglo de parámetros del comando como segundo argumento. El código de salida será devuelto:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/foo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$exitCode</span> <span class="token operator">=</span> Artisan<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email:send'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'user'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'--queue'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'default'</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Alternativamente, puedes pasar todo el comando de Artisan para el metodo <code>call</code> como una cadena:</p> <div class="language-php extra-class"><pre class="language-php"><code>Artisan<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email:send 1 --queue=default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Usando el método <code>queue</code> en el facade <code>Artisan</code>, puedes incluso poner en cola comandos Artisan para ser procesados en segundo plano por tus <a href="/docs/%7B%7Bversion%7D%7D/queues">queue workers</a>. Antes de usar este método, asegurate que tengas configurado tu cola y se esté ejecutando un oyente de cola (queue listener):</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/foo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    Artisan<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email:send'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'user'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'--queue'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'default'</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>También puedes especificar la conexión o cola a la que debes enviar el comando Artisan:</p> <div class="language-php extra-class"><pre class="language-php"><code>Artisan<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email:send'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'user'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'--queue'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'default'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">onConnection</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'redis'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">onQueue</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'commands'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="pasando-valores-de-tipo-arreglo"><a href="#pasando-valores-de-tipo-arreglo" aria-hidden="true" class="header-anchor">#</a> Pasando valores de tipo Arreglo</h4> <p>Si tu comando define una opción que acepta un arreglo, puedes pasar un arreglo de valores a la opción:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/foo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$exitCode</span> <span class="token operator">=</span> Artisan<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email:send'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'user'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'--id'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">13</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="pasando-valores-booleanos"><a href="#pasando-valores-booleanos" aria-hidden="true" class="header-anchor">#</a> Pasando valores Booleanos</h4> <p>Si necesitas especificar el valor de una opción que no acepta valores de tipo cadena, tal como la opción <code>--force</code> en el comando <code>migrate:refresh</code>, debes pasar <code>true</code> o <code>false</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$exitCode</span> <span class="token operator">=</span> Artisan<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'migrate:refresh'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'--force'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="calling-commands-from-other-commands"></a></p> <h3 id="llamado-de-comandos-desde-otros-comandos"><a href="#llamado-de-comandos-desde-otros-comandos" aria-hidden="true" class="header-anchor">#</a> Llamado de Comandos Desde Otros Comandos</h3> <p>Algunas veces puedes desear llamar otros comandos desde un comando Artisan existente. Puedes hacerlo usando el método <code>call</code>. Este método acepta el nombre del comando y un arreglo de parámetros del comando:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Execute the console command.
*
* @return mixed
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">handle</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email:send'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'user'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'--queue'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'default'</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Si deseas llamar a otro comando de consola y eliminar toda su salida, puedes usar el método <code>callSilent</code>. Este método tiene la misma firma que el método <code>call</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">callSilent</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email:send'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'user'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'--queue'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'default'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/passwords.html" class="prev">
          Restablecimiento de contraseñas
        </a></span> <span class="next"><a href="/broadcasting.html">
          Broadcasting
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.bf22240a.js" defer></script><script src="/assets/js/9.60a01cba.js" defer></script>
  </body>
</html>
