<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Programación de tareas | Documentación de Laravel en Español</title>
    <meta name="description" content="Documentación de Laravel en Español">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:300,700|Miriam+Libre">
    
    <link rel="preload" href="/assets/css/0.styles.0cc2d3c3.css" as="style"><link rel="preload" href="/assets/js/app.bf22240a.js" as="script"><link rel="preload" href="/assets/js/68.220c04d8.js" as="script"><link rel="prefetch" href="/assets/js/10.8a8a99df.js"><link rel="prefetch" href="/assets/js/11.ec476e2f.js"><link rel="prefetch" href="/assets/js/12.6db1eb13.js"><link rel="prefetch" href="/assets/js/13.92d78bb5.js"><link rel="prefetch" href="/assets/js/14.1a0ad5f1.js"><link rel="prefetch" href="/assets/js/15.abc982c9.js"><link rel="prefetch" href="/assets/js/16.7cf1a759.js"><link rel="prefetch" href="/assets/js/17.4abfc664.js"><link rel="prefetch" href="/assets/js/18.85b19837.js"><link rel="prefetch" href="/assets/js/19.8c9dfcd5.js"><link rel="prefetch" href="/assets/js/2.dcb6cf45.js"><link rel="prefetch" href="/assets/js/20.c1b9de54.js"><link rel="prefetch" href="/assets/js/21.469ffab3.js"><link rel="prefetch" href="/assets/js/22.2d14e150.js"><link rel="prefetch" href="/assets/js/23.7a4dcc9a.js"><link rel="prefetch" href="/assets/js/24.534e59f1.js"><link rel="prefetch" href="/assets/js/25.eaac1c07.js"><link rel="prefetch" href="/assets/js/26.8e9180e0.js"><link rel="prefetch" href="/assets/js/27.2cd2ace8.js"><link rel="prefetch" href="/assets/js/28.9f7dcf6d.js"><link rel="prefetch" href="/assets/js/29.06a87f0d.js"><link rel="prefetch" href="/assets/js/3.b62bf0b4.js"><link rel="prefetch" href="/assets/js/30.b03f86ec.js"><link rel="prefetch" href="/assets/js/31.edce81f6.js"><link rel="prefetch" href="/assets/js/32.6657300b.js"><link rel="prefetch" href="/assets/js/33.8dc49209.js"><link rel="prefetch" href="/assets/js/34.03cbee56.js"><link rel="prefetch" href="/assets/js/35.5439db2e.js"><link rel="prefetch" href="/assets/js/36.83d5a264.js"><link rel="prefetch" href="/assets/js/37.4066824e.js"><link rel="prefetch" href="/assets/js/38.c3fe05aa.js"><link rel="prefetch" href="/assets/js/39.52ef8667.js"><link rel="prefetch" href="/assets/js/4.bd0ebba2.js"><link rel="prefetch" href="/assets/js/40.2c54d702.js"><link rel="prefetch" href="/assets/js/41.775bc6e1.js"><link rel="prefetch" href="/assets/js/42.6541d60b.js"><link rel="prefetch" href="/assets/js/43.20091aea.js"><link rel="prefetch" href="/assets/js/44.75b71ccc.js"><link rel="prefetch" href="/assets/js/45.6b36a3a8.js"><link rel="prefetch" href="/assets/js/46.6ea236af.js"><link rel="prefetch" href="/assets/js/47.0e0ee374.js"><link rel="prefetch" href="/assets/js/48.b6beb9b8.js"><link rel="prefetch" href="/assets/js/49.ae33b521.js"><link rel="prefetch" href="/assets/js/5.2c350d8b.js"><link rel="prefetch" href="/assets/js/50.5cb081e0.js"><link rel="prefetch" href="/assets/js/51.3e0281e2.js"><link rel="prefetch" href="/assets/js/52.e1fae1d6.js"><link rel="prefetch" href="/assets/js/53.0a9d4aed.js"><link rel="prefetch" href="/assets/js/54.55bc9113.js"><link rel="prefetch" href="/assets/js/55.e964fdb4.js"><link rel="prefetch" href="/assets/js/56.3abed8a0.js"><link rel="prefetch" href="/assets/js/57.df09269b.js"><link rel="prefetch" href="/assets/js/58.3ce37458.js"><link rel="prefetch" href="/assets/js/59.7a840aeb.js"><link rel="prefetch" href="/assets/js/6.6fce793d.js"><link rel="prefetch" href="/assets/js/60.b4fe788b.js"><link rel="prefetch" href="/assets/js/61.e45356bb.js"><link rel="prefetch" href="/assets/js/62.0d75cf78.js"><link rel="prefetch" href="/assets/js/63.0ecae205.js"><link rel="prefetch" href="/assets/js/64.90fb2c2d.js"><link rel="prefetch" href="/assets/js/65.7c476002.js"><link rel="prefetch" href="/assets/js/66.802dee8b.js"><link rel="prefetch" href="/assets/js/67.ae965c66.js"><link rel="prefetch" href="/assets/js/69.bf607b92.js"><link rel="prefetch" href="/assets/js/7.b956f78c.js"><link rel="prefetch" href="/assets/js/70.dea3d878.js"><link rel="prefetch" href="/assets/js/71.1f786e34.js"><link rel="prefetch" href="/assets/js/72.4bd65b39.js"><link rel="prefetch" href="/assets/js/73.414b29bd.js"><link rel="prefetch" href="/assets/js/74.b5ab4f13.js"><link rel="prefetch" href="/assets/js/75.f12fbb27.js"><link rel="prefetch" href="/assets/js/76.a140d22b.js"><link rel="prefetch" href="/assets/js/77.2595933c.js"><link rel="prefetch" href="/assets/js/78.46bb4eff.js"><link rel="prefetch" href="/assets/js/79.c549a0e3.js"><link rel="prefetch" href="/assets/js/8.3be12d8d.js"><link rel="prefetch" href="/assets/js/80.1b9cd731.js"><link rel="prefetch" href="/assets/js/81.6aa05825.js"><link rel="prefetch" href="/assets/js/9.60a01cba.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0cc2d3c3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Documentación de Laravel en Español</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Primeros Pasos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Conceptos De Arquitectura</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Fundamentos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Frontend</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Seguridad</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Profundizando</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/artisan.html" class="sidebar-link">Consola Artisan</a></li><li><a href="/broadcasting.html" class="sidebar-link">Broadcasting</a></li><li><a href="/cache.html" class="sidebar-link">Caché</a></li><li><a href="/collections.html" class="sidebar-link">Collecciones</a></li><li><a href="/events.html" class="sidebar-link">Eventos</a></li><li><a href="/filesystem.html" class="sidebar-link">Almacenamiento De Archivos</a></li><li><a href="/helpers.html" class="sidebar-link">Helpers</a></li><li><a href="/mail.html" class="sidebar-link">Correos Electrónicos</a></li><li><a href="/notifications.html" class="sidebar-link">Notificaciones</a></li><li><a href="/packages.html" class="sidebar-link">Desarrollo de Paquetes</a></li><li><a href="/queues.html" class="sidebar-link">Colas De Trabajo</a></li><li><a href="/scheduling.html" class="active sidebar-link">Programación de tareas</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/scheduling.html#introduccion" class="sidebar-link">Introducción</a></li><li class="sidebar-sub-header"><a href="/scheduling.html#definicion-de-programaciones" class="sidebar-link">Definición de programaciones</a></li><li class="sidebar-sub-header"><a href="/scheduling.html#resultado-de-la-tarea" class="sidebar-link">Resultado De La Tarea</a></li><li class="sidebar-sub-header"><a href="/scheduling.html#hooks-de-tareas" class="sidebar-link">Hooks De Tareas</a></li></ul></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Bases De Datos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>ORM Eloquent</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Pruebas</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Paquetes oficiales</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><div><h1 id="programacion-de-tareas"><a class="header-anchor" href="#programacion-de-tareas" aria-hidden="true">#</a> Programación de tareas</h1> <ul><li><a href="#introduction">Introducción</a></li> <li><a href="#defining-schedules">Definición de programaciones</a> <ul><li><a href="#scheduling-artisan-commands">Programando Comandos De Artisan</a></li> <li><a href="#scheduling-queued-jobs">Programando Trabajos En Cola</a></li> <li><a href="#scheduling-shell-commands">Programando Comandos De Shell</a></li> <li><a href="#schedule-frequency-options">Programando Opciones De Frecuencias</a></li> <li><a href="#timezones">Zonas Horarias</a></li> <li><a href="#preventing-task-overlaps">Previniendo Superposición De Tareas</a></li> <li><a href="#running-tasks-on-one-server">Ejecutando Tareas En Un Servidor</a></li> <li><a href="#background-tasks">Tareas En Segundo Plano</a></li> <li><a href="#maintenance-mode">Modo De Mantenimiento</a></li></ul></li> <li><a href="#task-output">Resultado De La Tarea</a></li> <li><a href="#task-hooks">Hooks De Tareas</a></li></ul> <p><a name="introduction"></a></p> <h2 id="introduccion"><a class="header-anchor" href="#introduccion" aria-hidden="true">#</a> Introducción</h2> <p>En el pasado, es posible que hayas generado una entrada Cron para cada tarea que necesitabas programar en su servidor. Sin embargo, esto puede convertirse rápidamente en un sufrimiento, dado que tu programación de tareas no está en el control de versiones y debes hacer SSH a tu servidor para agregar entradas Cron adicionales.</p> <p>El programador de comandos de Laravel te permite definir tu programación de comandos de forma fluída y expresiva dentro de Laravel. Al usar el programador, una sola entrada Cron es necesaria en tu servidor. Tu programación de tareas es definida en el método <code>schedule</code> del archivo <code>app/Console/Kernel.php</code>. Para ayudarte a comenzar, un ejemplo sencillo está definido dentro del método.</p> <h3 id="iniciando-el-programador"><a class="header-anchor" href="#iniciando-el-programador" aria-hidden="true">#</a> Iniciando El Programador</h3> <p>Al usar el programador, sólo necesitas agregar la siguiente entrada Cron a tu servidor. Si no sabes cómo agregar entradas Cron a tu servidor, considera usar un servicio como <a href="https://forge.laravel.com" target="_blank" rel="noopener noreferrer">Laravel Forge<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> que puede administrar las entradas Cron por ti:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> <span class="token operator">*</span> php <span class="token operator">/</span>path<span class="token operator">-</span>to<span class="token operator">-</span>your<span class="token operator">-</span>project<span class="token operator">/</span>artisan schedule<span class="token punctuation">:</span>run <span class="token operator">&gt;</span><span class="token operator">&gt;</span> <span class="token operator">/</span>dev<span class="token operator">/</span><span class="token keyword">null</span> <span class="token number">2</span><span class="token operator">&gt;</span><span class="token operator">&amp;</span><span class="token number">1</span>
</code></pre></div><p>Este Cron llamará al programador de tareas de Laravel cada minuto. Cuando el comando <code>schedule:run</code> es ejecutado, Laravel evaluará tus tareas programadas y ejecutará las tareas pendientes.</p> <p><a name="defining-schedules"></a></p> <h2 id="definicion-de-programaciones"><a class="header-anchor" href="#definicion-de-programaciones" aria-hidden="true">#</a> Definición de programaciones</h2> <p>Puedes definir todas tus tareas programadas en el método <code>schedule</code> de la clase <code>App\Console\Kernel</code>. Para empezar, veamos un ejemplo de programación de una tarea.  En este ejemplo, programaremos una <code>Closure</code> que será llamada cada día a medianoche. Dentro de la <code>Closure</code> ejecutaremos un consulta a la base de datos para vaciar una tabla:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Console</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>DB</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Console<span class="token punctuation">\</span>Scheduling<span class="token punctuation">\</span>Schedule</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Foundation<span class="token punctuation">\</span>Console<span class="token punctuation">\</span>Kernel</span> <span class="token keyword">as</span> ConsoleKernel<span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Kernel</span> <span class="token keyword">extends</span> <span class="token class-name">ConsoleKernel</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * The Artisan commands provided by your application.
    *
    * @var array
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$commands</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
        <span class="token comment">//</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>

    <span class="token comment">/**
    * Define the application's command schedule.
    *
    * @param  \Illuminate\Console\Scheduling\Schedule  $schedule
    * @return void
    */</span>
    <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function">schedule</span><span class="token punctuation">(</span>Schedule <span class="token variable">$schedule</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token constant">DB</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'recent_users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">daily</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Además de programar usando Closures, también puedes usar <a href="https://secure.php.net/manual/en/language.oop5.magic.php#object.invoke" target="_blank" rel="noopener noreferrer">objetos invocables<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. Los objetos invocables son clases PHP sencillas que contienen un método <code>__invoke</code>:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DeleteRecentUsers</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">daily</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="scheduling-artisan-commands"></a></p> <h3 id="programando-comandos-de-artisan"><a class="header-anchor" href="#programando-comandos-de-artisan" aria-hidden="true">#</a> Programando Comandos De Artisan</h3> <p>Además de programador llamadas a Closures, también puedes programar <a href="/docs/%7B%7Bversion%7D%7D/artisan">comandos de Artisan</a> y comandos del sistema operativo. Por ejemplo, puedes usar el método <code>command</code> para programar un comando de Artisan usando ya sea el nombre del comando o de la clase:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails:send Taylor --force'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">daily</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span>EmailsCommand<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token keyword">class</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'Taylor'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'--force'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">daily</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="scheduling-queued-jobs"></a></p> <h3 id="programando-trabajos-en-colas"><a class="header-anchor" href="#programando-trabajos-en-colas" aria-hidden="true">#</a> Programando Trabajos En Colas</h3> <p>El método <code>job</code> puede ser usado para programar <a href="/docs/%7B%7Bversion%7D%7D/queues">un trabajo en cola</a>. Este método proporciona una forma conveniente de programar trabajos sin usar el método <code>call</code> para crear Closures de forma manual para agregar el trabajo a la cola:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">job</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Heartbeat</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">everyFiveMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Dispatch the job to the &quot;heartbeats&quot; queue...</span>
<span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">job</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Heartbeat</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'heartbeats'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">everyFiveMinutes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="scheduling-shell-commands"></a></p> <h3 id="programando-comandos-de-shell"><a class="header-anchor" href="#programando-comandos-de-shell" aria-hidden="true">#</a> Programando Comandos De Shell</h3> <p>El método <code>exec</code> puede ser usado para emitir un comando al sistema operativo:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">exec</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'node /home/forge/script.js'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">daily</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="schedule-frequency-options"></a></p> <h3 id="programando-opciones-de-frecuencias"><a class="header-anchor" href="#programando-opciones-de-frecuencias" aria-hidden="true">#</a> Programando Opciones De Frecuencias</h3> <p>Hay una variedad de programaciones que puedes asignar a tu tarea:</p> <table><thead><tr><th>Método</th> <th>Descripción</th></tr></thead> <tbody><tr><td><code>-&gt;cron('* * * * * *');</code></td> <td>Ejecuta la tarea en una programación Cron personalizada</td></tr> <tr><td><code>-&gt;everyMinute();</code></td> <td>Ejecuta la tarea cada minuto</td></tr> <tr><td><code>-&gt;everyFiveMinutes();</code></td> <td>Ejecuta la tarea cada cinco minutos</td></tr> <tr><td><code>-&gt;everyTenMinutes();</code></td> <td>Ejecuta la tarea cada diez minutos</td></tr> <tr><td><code>-&gt;everyFifteenMinutes();</code></td> <td>Ejecuta la tarea cada quince minutos</td></tr> <tr><td><code>-&gt;everyThirtyMinutes();</code></td> <td>Ejecuta la tarea cada treinta minutos</td></tr> <tr><td><code>-&gt;hourly();</code></td> <td>Ejecuta la tarea cada hora</td></tr> <tr><td><code>-&gt;hourlyAt(17);</code></td> <td>Ejecuta la tarea cada hora en el minuto 17</td></tr> <tr><td><code>-&gt;daily();</code></td> <td>Ejecuta la tarea cada día a la medianoche</td></tr> <tr><td><code>-&gt;dailyAt('13:00');</code></td> <td>Ejecuta la tarea cada día a las 13:00</td></tr> <tr><td><code>-&gt;twiceDaily(1, 13);</code></td> <td>Ejecuta la tarea cada día a las 1:00 y a las 13:00</td></tr> <tr><td><code>-&gt;weekly();</code></td> <td>Ejecuta la tarea cada semana</td></tr> <tr><td><code>-&gt;weeklyOn(1, '8:00');</code></td> <td>Ejecuta a tarea cada semana los lunes a las 8:00</td></tr> <tr><td><code>-&gt;monthly();</code></td> <td>Ejecuta la tarea cada mes</td></tr> <tr><td><code>-&gt;monthlyOn(4, '15:00');</code></td> <td>Ejecuta la tarea el 4 de cada mes a las 15:00</td></tr> <tr><td><code>-&gt;quarterly();</code></td> <td>Ejecuta la tarea cada trimestre</td></tr> <tr><td><code>-&gt;yearly();</code></td> <td>Ejecuta la tarea cada año</td></tr> <tr><td><code>-&gt;timezone('America/New_York');</code></td> <td>Establece la zona horaria</td></tr></tbody></table> <p>Estos métodos pueden ser combinados con restricciones adicionales para crear programaciones más ajustadas que sólo se ejecutan en determinados días de la semana. Por ejemplo, para programar un comando para que sea ejecutado los lunes:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token comment">// Ejecuta una vez por semana los martes a la 1 PM...</span>
<span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">weekly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">mondays</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'13:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Ejecuta cada hora de 8 AM a 5 PM los días laborales...</span>
<span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">weekdays</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hourly</span><span class="token punctuation">(</span><span class="token punctuation">)</span> method
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">timezone</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'America/Chicago'</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">between</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'8:00'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'17:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>A continuación hay una lista de restricciones de programación adicionales:</p> <table><thead><tr><th>Method</th> <th>Description</th></tr></thead> <tbody><tr><td><code>-&gt;weekdays();</code></td> <td>Limita la tarea a los días laborales</td></tr> <tr><td><code>-&gt;weekends();</code></td> <td>Limita la tarea a los fines de semana</td></tr> <tr><td><code>-&gt;sundays();</code></td> <td>Limita la tarea a los domingos</td></tr> <tr><td><code>-&gt;mondays();</code></td> <td>Limita la tarea a los lunes</td></tr> <tr><td><code>-&gt;tuesdays();</code></td> <td>Limita la tarea los martes</td></tr> <tr><td><code>-&gt;wednesdays();</code></td> <td>Limita la tarea a los miércoles</td></tr> <tr><td><code>-&gt;thursdays();</code></td> <td>Limita la tarea a los jueves</td></tr> <tr><td><code>-&gt;fridays();</code></td> <td>Limita la tarea a los viernes</td></tr> <tr><td><code>-&gt;saturdays();</code></td> <td>Limita la tarea a los sábados</td></tr> <tr><td><code>-&gt;between($start, $end);</code></td> <td>Limita la tarea para ser ejecutado entre $start y $end</td></tr> <tr><td><code>-&gt;when(Closure);</code></td> <td>Limita la tarea dependiendo de una prueba de veracidad</td></tr> <tr><td><code>-&gt;environments($env);</code></td> <td>Limita la tarea a ambientes específicos</td></tr></tbody></table> <h4 id="restricciones-de-tiempo-between"><a class="header-anchor" href="#restricciones-de-tiempo-between" aria-hidden="true">#</a> Restricciones De Tiempo Between</h4> <p>El método <code>between</code> puede ser usado para limitar la ejecución de una tarea dependiendo de la hora del día:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'reminders:send'</span><span class="token punctuation">)</span>
                    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hourly</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">between</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'7:00'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'22:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>De forma similar, el método <code>unlessBetween</code> puede ser usado para excluir la ejecución de una tarea por un periodo de tiempo:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'reminders:send'</span><span class="token punctuation">)</span>
                    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">hourly</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">unlessBetween</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'23:00'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'4:00'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="restricciones-de-veracidad"><a class="header-anchor" href="#restricciones-de-veracidad" aria-hidden="true">#</a> Restricciones De Veracidad</h4> <p>El método <code>when</code> puede ser usado para limitar la ejecución de una tarea en base al resultado de un test de veracidad dado. En otras palabras, si la <code>Closure</code> dada retorna <code>true</code>, la tarea será ejecutada siempre y cuando ninguna otra restricción prevenga que la tarea de ser ejecutada:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails:send'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">daily</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">when</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>El método <code>skip</code> puede ser visto como el inverso de <code>when</code>. Si el método <code>skip</code> retorna <code>true</code>, la tarea programada no será ejecutada:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails:send'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">daily</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Al usar métodos <code>when</code> encadenados, el comando programado sólo será ejecutado si todas las condiciones <code>when</code> retornan <code>true</code>.</p> <h4 id="restricciones-de-entorno"><a class="header-anchor" href="#restricciones-de-entorno" aria-hidden="true">#</a> Restricciones de entorno</h4> <p>El método <code>environments</code> se puede utilizar para ejecutar tareas sólo en los entornos dados:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails:send'</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">daily</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">environments</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'staging'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'production'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="timezones"></a></p> <h3 id="zonas-horarias"><a class="header-anchor" href="#zonas-horarias" aria-hidden="true">#</a> Zonas Horarias</h3> <p>Usando el método <code>timezone</code>, puedes especificar que el tiempo de una tarea programada debe ser interpretada en una zona horaria dada:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'report:generate'</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">timezone</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'America/New_York'</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'02:00'</span><span class="token punctuation">)</span>
</code></pre></div><p>Si estás asignando la misma zona horaria a todas tus tareas programadas, puedes desear definir un método <code>scheduleTimezone</code> en tu archivo <code>app/Console/Kernel.php</code>. Este método debería retornar la zona horaria por defecto que debe ser asignada a todas las tareas programadas.</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token comment">/**
* Get the timezone that should be used by default for scheduled events.
*
* @return \DateTimeZone|string|null
*/</span>
<span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function">scheduleTimezone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token single-quoted-string string">'America/Chicago'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="danger custom-block"><p class="custom-block-title">Nota</p> <p>Recuerda que algunas zonas horarias usan horario de verano. Cuando ocurren cambios por horario de verano, tu tarea programada puede ejecutarse dos veces o puede no ser ejecutada. Por esto, recomendamos evitar programación con zona horaria en la medida de lo posible.</p></div></div> <p><a name="preventing-task-overlaps"></a></p> <h3 id="previniendo-superposicion-de-tareas"><a href="#previniendo-superposicion-de-tareas" aria-hidden="true" class="header-anchor">#</a> Previniendo Superposición De Tareas</h3> <p>Por defecto, las tareas programadas serán ejecutadas incluso si la instancia anterior de la tarea todavía está en ejecución. Para evitar esto, puedes usar el método <code>withoutOverlapping</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails:send'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withoutOverlapping</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>En este ejemplo, el <a href="/docs/%7B%7Bversion%7D%7D/artisan">comando de Artisan</a> <code>emails:send</code> será ejecutado cada minuto si ya no está siendo ejecutado. El método <code>withoutOverlapping</code> es especialmente útil si tienes tareas que varían drásticamente en su tiempo de ejecución, evitando que puedas predecir exactamente cuánto tiempo tomará una tarea.</p> <p>Si es necesario, puedes especificar cuántos minutos deben pasar antes de que el bloqueo &quot;sin superposición&quot; expire. Por defecto, el bloqueo expirará luego de 24 horas:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails:send'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withoutOverlapping</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="running-tasks-on-one-server"></a></p> <h3 id="ejecutando-tareas-en-un-servidor"><a href="#ejecutando-tareas-en-un-servidor" aria-hidden="true" class="header-anchor">#</a> Ejecutando Tareas En Un Servidor</h3> <div class="danger custom-block"><p class="custom-block-title">Nota</p> <p>Para utilizar esta característica, tu aplicación debe estar usando el controlador de caché <code>memcached</code> o <code>redis</code> como predeterminado. Además, todos los servidores deben comunicarse al mismo servidor central de caché.</p></div> <p>Si tu aplicación está siendo ejecutada en múltiples servidores, puedes limitar un trabajo programado a sólo ejecutarse en un servidor. Por ejemplo, asume que se tiene una tarea programada que genera un reporte nuevo cada viernes en la noche. Si el programador de tareas está siendo ejecutado en tres servidores de worker, la tarea programada se ejecutará en todos y generará el reporte tres veces. ¡No es bueno!</p> <p>Para indicar que la tarea debe ejecutarse sólo en un servidor, usa el método <code>onOneServer</code> al definir la tarea programada. El primer servidor en obtener la tarea asegurará un bloqueo atómico en el trabajo para prevenir que otros servidores ejecuten la misma tarea al mismo tiempo:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'report:generate'</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">fridays</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'17:00'</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">onOneServer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="background-tasks"></a></p> <h3 id="tareas-en-segundo-plano"><a href="#tareas-en-segundo-plano" aria-hidden="true" class="header-anchor">#</a> Tareas En Segundo Plano</h3> <p>Por defcto, múltiples comandos programados al mismo tiempo se ejecutarán secuencialmente. Si tienes comandos de ejecución larga, esto puede causar que los siguientes comandos sean ejecutados mucho más tarde que lo esperado. Si deseas ejecutar comandos en segundo plano para que todos funcionen de forma simultánea, puedes usar el método <code>runInBackground</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'analytics:report'</span><span class="token punctuation">)</span>
         <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">daily</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">runInBackground</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="maintenance-mode"></a></p> <h3 id="modo-de-mantenimiento"><a href="#modo-de-mantenimiento" aria-hidden="true" class="header-anchor">#</a> Modo De Mantenimiento</h3> <p>Las tareas programadas de Laravel no serán ejecutadas cuando Laravel está en <a href="/docs/%7B%7Bversion%7D%7D/configuration#maintenance-mode">modo de mantenimiento</a>, dado que no queremos que tus tareas interfieran con cualquier mantenimiento inacabado que puedes estar realizando en tu servidor. Sin embargo, si quieres forzar la ejecución de una tarea incluso en modo de mantenimiento, puedes usar el método <code>evenInMaintenanceMode</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails:send'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">evenInMaintenanceMode</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="task-output"></a></p> <h2 id="resultado-de-la-tarea"><a href="#resultado-de-la-tarea" aria-hidden="true" class="header-anchor">#</a> Resultado De La Tarea</h2> <p>El programador de Laravel proporciona múltiples métodos convenientes para trabajar con el resultado generado por una tarea programada. Primero, usando el método <code>sendOutputTo</code>, puedes enviar el resultado a un archivo para una inspección posterior:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails:send'</span><span class="token punctuation">)</span>
         <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">daily</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">sendOutputTo</span><span class="token punctuation">(</span><span class="token variable">$filePath</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Si quieres agregar el resultado a un archivo dado, puedes usar el método <code>appendOutputTo</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails:send'</span><span class="token punctuation">)</span>
         <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">daily</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">appendOutputTo</span><span class="token punctuation">(</span><span class="token variable">$filePath</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Usando el método <code>emailOutputTo</code>, puedes enviar el resultado a una dirección de correo electrónico de tu preferencia. Antes de enviar por correo electrónico el resultado de una tarea, debes configurar los <a href="/docs/%7B%7Bversion%7D%7D/mail">servicios de correo electrónico</a> de Laravel:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">)</span>
         <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">daily</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">sendOutputTo</span><span class="token punctuation">(</span><span class="token variable">$filePath</span><span class="token punctuation">)</span>
         <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">emailOutputTo</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo@example.com'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="danger custom-block"><p class="custom-block-title">Nota</p> <p>Los métodos <code>emailOutputTo</code>, <code>sendOutputTo</code> y <code>appendOutputTo</code> son exclusivos para el método <code>command</code> y no son soportados por <code>call</code>.</p></div> <p><a name="task-hooks"></a></p> <h2 id="hooks-de-tareas"><a href="#hooks-de-tareas" aria-hidden="true" class="header-anchor">#</a> Hooks De Tareas</h2> <p>Usando los métodos <code>before</code> y <code>after</code>, puedes especificar código que será ejecutado antes y después de que la tarea programada sea completada:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails:send'</span><span class="token punctuation">)</span>
         <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">daily</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token comment">// Task is about to start...</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span>
         <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token comment">// Task is complete...</span>
         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="haciendo-ping-a-urls"><a href="#haciendo-ping-a-urls" aria-hidden="true" class="header-anchor">#</a> Haciendo Ping a URLs</h4> <p>Usando los métodos <code>pingBefore</code> y <code>thenPing</code>, el programador de tareas puede automáticamente hacer ping a una URL dada antes o después de que una tarea sea completada. Este método es útil para notificar a un servicio externo, como <a href="https://envoyer.io" target="_blank" rel="noopener noreferrer">Laravel Envoyer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, que tu tarea programada está comenzando o ha finalizado su ejecución:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails:send'</span><span class="token punctuation">)</span>
         <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">daily</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">pingBefore</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span>
         <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">thenPing</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Los métodos <code>pingBeforeIf</code> y <code>thenPingIf</code> pueden ser usados para hacer ping a una URL dada sólo si la condición dada es <code>true</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$schedule</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">command</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails:send'</span><span class="token punctuation">)</span>
         <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">daily</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
         <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">pingBeforeIf</span><span class="token punctuation">(</span><span class="token variable">$condition</span><span class="token punctuation">,</span> <span class="token variable">$url</span><span class="token punctuation">)</span>
         <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">thenPingIf</span><span class="token punctuation">(</span><span class="token variable">$condition</span><span class="token punctuation">,</span> <span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Todos los métodos de ping requieren el paquete HTTP Guzzle. Puedes agregar Guzzle a tu proyecto usando el gestor de paquetes Composer:</p> <div class="language-php extra-class"><pre class="language-php"><code>composer <span class="token keyword">require</span> guzzlehttp<span class="token operator">/</span>guzzle
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/queues.html" class="prev">
          Colas De Trabajo
        </a></span> <span class="next"><a href="/database.html">
          Bases de Datos: Primeros Pasos
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.bf22240a.js" defer></script><script src="/assets/js/68.220c04d8.js" defer></script>
  </body>
</html>
