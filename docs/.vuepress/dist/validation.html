<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Validación | Documentación de Laravel en Español</title>
    <meta name="description" content="Documentación de Laravel en Español">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:300,700|Miriam+Libre">
    
    <link rel="preload" href="/assets/css/0.styles.172acefb.css" as="style"><link rel="preload" href="/assets/js/app.670d7e7c.js" as="script"><link rel="preload" href="/assets/js/8.23b9f04b.js" as="script"><link rel="prefetch" href="/assets/js/10.890657ad.js"><link rel="prefetch" href="/assets/js/11.886ca6a1.js"><link rel="prefetch" href="/assets/js/12.0d2fa60e.js"><link rel="prefetch" href="/assets/js/13.9645d1cc.js"><link rel="prefetch" href="/assets/js/14.b601f515.js"><link rel="prefetch" href="/assets/js/15.8a736f30.js"><link rel="prefetch" href="/assets/js/16.4ecd6c92.js"><link rel="prefetch" href="/assets/js/17.0f287924.js"><link rel="prefetch" href="/assets/js/18.a3ca4e9a.js"><link rel="prefetch" href="/assets/js/19.e237c464.js"><link rel="prefetch" href="/assets/js/2.e950dd9a.js"><link rel="prefetch" href="/assets/js/20.6c81b2f5.js"><link rel="prefetch" href="/assets/js/21.ab56b213.js"><link rel="prefetch" href="/assets/js/22.5db63cfd.js"><link rel="prefetch" href="/assets/js/23.6d6d19fa.js"><link rel="prefetch" href="/assets/js/24.771ff8be.js"><link rel="prefetch" href="/assets/js/25.61bfdf54.js"><link rel="prefetch" href="/assets/js/26.049ed12f.js"><link rel="prefetch" href="/assets/js/27.d2927876.js"><link rel="prefetch" href="/assets/js/28.ea6eee97.js"><link rel="prefetch" href="/assets/js/29.1b8672f3.js"><link rel="prefetch" href="/assets/js/3.d15edf81.js"><link rel="prefetch" href="/assets/js/30.378a4977.js"><link rel="prefetch" href="/assets/js/31.8e5176cc.js"><link rel="prefetch" href="/assets/js/32.8fdeb297.js"><link rel="prefetch" href="/assets/js/33.b615bcb8.js"><link rel="prefetch" href="/assets/js/34.3b36c043.js"><link rel="prefetch" href="/assets/js/35.ef8dd300.js"><link rel="prefetch" href="/assets/js/36.4e90af03.js"><link rel="prefetch" href="/assets/js/37.6131dd1b.js"><link rel="prefetch" href="/assets/js/38.b4345420.js"><link rel="prefetch" href="/assets/js/39.c4e3c17b.js"><link rel="prefetch" href="/assets/js/4.333c2311.js"><link rel="prefetch" href="/assets/js/40.f780e123.js"><link rel="prefetch" href="/assets/js/41.4a1a10ae.js"><link rel="prefetch" href="/assets/js/42.8969bd07.js"><link rel="prefetch" href="/assets/js/43.557e2bb4.js"><link rel="prefetch" href="/assets/js/44.5151c083.js"><link rel="prefetch" href="/assets/js/45.e944dba1.js"><link rel="prefetch" href="/assets/js/46.9a35689c.js"><link rel="prefetch" href="/assets/js/47.228f7fa9.js"><link rel="prefetch" href="/assets/js/48.47aaf80a.js"><link rel="prefetch" href="/assets/js/49.94e9af6a.js"><link rel="prefetch" href="/assets/js/5.dfd255c8.js"><link rel="prefetch" href="/assets/js/50.62d3bcc7.js"><link rel="prefetch" href="/assets/js/51.44dc5c59.js"><link rel="prefetch" href="/assets/js/52.259aa4a1.js"><link rel="prefetch" href="/assets/js/53.5f5cc6de.js"><link rel="prefetch" href="/assets/js/54.aecf28b6.js"><link rel="prefetch" href="/assets/js/55.9eb54728.js"><link rel="prefetch" href="/assets/js/56.59d4faa4.js"><link rel="prefetch" href="/assets/js/57.b8edd47a.js"><link rel="prefetch" href="/assets/js/58.0b43b12f.js"><link rel="prefetch" href="/assets/js/59.9a35b2b7.js"><link rel="prefetch" href="/assets/js/6.08b745f4.js"><link rel="prefetch" href="/assets/js/60.7d49176e.js"><link rel="prefetch" href="/assets/js/61.147bff06.js"><link rel="prefetch" href="/assets/js/62.3440b436.js"><link rel="prefetch" href="/assets/js/63.02a68d7e.js"><link rel="prefetch" href="/assets/js/64.039a514c.js"><link rel="prefetch" href="/assets/js/65.b4001712.js"><link rel="prefetch" href="/assets/js/66.18b0a11f.js"><link rel="prefetch" href="/assets/js/67.f84e9d1d.js"><link rel="prefetch" href="/assets/js/68.3d907f1f.js"><link rel="prefetch" href="/assets/js/69.503b03bf.js"><link rel="prefetch" href="/assets/js/7.4f2afe0c.js"><link rel="prefetch" href="/assets/js/70.3fb14c22.js"><link rel="prefetch" href="/assets/js/71.2a8bb910.js"><link rel="prefetch" href="/assets/js/72.325984f7.js"><link rel="prefetch" href="/assets/js/73.1b173d90.js"><link rel="prefetch" href="/assets/js/74.6ab9d1bd.js"><link rel="prefetch" href="/assets/js/75.81c87089.js"><link rel="prefetch" href="/assets/js/76.4c6ad92e.js"><link rel="prefetch" href="/assets/js/77.ca20fa7b.js"><link rel="prefetch" href="/assets/js/78.cb6a269d.js"><link rel="prefetch" href="/assets/js/79.529c080d.js"><link rel="prefetch" href="/assets/js/80.1001e373.js"><link rel="prefetch" href="/assets/js/81.98ee983b.js"><link rel="prefetch" href="/assets/js/9.288ef444.js">
    <link rel="stylesheet" href="/assets/css/0.styles.172acefb.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Documentación de Laravel en Español</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Primeros Pasos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Conceptos De Arquitectura</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Fundamentos</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/routing.html" class="sidebar-link">Enrutamiento</a></li><li><a href="/middleware.html" class="sidebar-link">Middleware</a></li><li><a href="/csrf.html" class="sidebar-link">Protección CSRF</a></li><li><a href="/controllers.html" class="sidebar-link">Controladores</a></li><li><a href="/requests.html" class="sidebar-link">Solicitudes HTTP</a></li><li><a href="/responses.html" class="sidebar-link">Respuestas HTTP</a></li><li><a href="/views.html" class="sidebar-link">Vistas</a></li><li><a href="/urls.html" class="sidebar-link">Generación de URLs</a></li><li><a href="/session.html" class="sidebar-link">Sesión HTTP</a></li><li><a href="/validation.html" class="active sidebar-link">Validación</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/validation.html#introduccion" class="sidebar-link">Introducción</a></li><li class="sidebar-sub-header"><a href="/validation.html#inicio-rapido-de-validacion" class="sidebar-link">Inicio Rápido de Validación</a></li><li class="sidebar-sub-header"><a href="/validation.html#validacion-de-solicitud-de-formulario" class="sidebar-link">Validación de Solicitud de Formulario</a></li><li class="sidebar-sub-header"><a href="/validation.html#creando-validadores-manualmente" class="sidebar-link">Creando Validadores Manualmente</a></li><li class="sidebar-sub-header"><a href="/validation.html#trabajando-con-los-mensajes-de-error" class="sidebar-link">Trabajando con los Mensajes de Error</a></li><li class="sidebar-sub-header"><a href="/validation.html#reglas-de-validacion-disponibles" class="sidebar-link">Reglas de Validación Disponibles</a></li><li class="sidebar-sub-header"><a href="/validation.html#agregando-reglas-condicionalmente" class="sidebar-link">Agregando Reglas Condicionalmente</a></li><li class="sidebar-sub-header"><a href="/validation.html#validando-arreglos" class="sidebar-link">Validando Arreglos</a></li><li class="sidebar-sub-header"><a href="/validation.html#reglas-de-validacion-personalizadas" class="sidebar-link">Reglas de Validación Personalizadas</a></li></ul></li><li><a href="/errors.html" class="sidebar-link">Manejo de Errores</a></li><li><a href="/logging.html" class="sidebar-link">Registro (Logging)</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Frontend</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Seguridad</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Profundizando</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Bases De Datos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>ORM Eloquent</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Pruebas</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Paquetes oficiales</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><div><h1 id="validacion"><a class="header-anchor" href="#validacion" aria-hidden="true">#</a> Validación</h1> <ul><li><a href="#introduction">Introducción</a></li> <li><a href="#validation-quickstart">Inicio Rápido de Validación</a> <ul><li><a href="#quick-defining-the-routes">Definiendo las Rutas</a></li> <li><a href="#quick-creating-the-controller">Creando el Controlador</a></li> <li><a href="#quick-writing-the-validation-logic">Escribiendo la Lógica de Validación</a></li> <li><a href="#quick-displaying-the-validation-errors">Mostrando los Errores de Validación</a></li> <li><a href="#a-note-on-optional-fields">Una Observación Sobre los Campos Opcionales</a></li></ul></li> <li><a href="#form-request-validation">Validación de Solicitudes de Formulario</a> <ul><li><a href="#creating-form-requests">Creando Solicitudes de Formulario</a></li> <li><a href="#authorizing-form-requests">Autorizando Solicitudes de Formulario</a></li> <li><a href="#customizing-the-error-messages">Personalizando los Mensajes de Error</a></li> <li><a href="#customizing-the-validation-attributes">Personalizando los Atributos de Validación</a></li></ul></li> <li><a href="#manually-creating-validators">Creando Validadores Manualmente</a> <ul><li><a href="#automatic-redirection">Redirección Automática</a></li> <li><a href="#named-error-bags">Paquetes de Errores con Nombres</a></li> <li><a href="#after-validation-hook">Hook de Validación Posterior</a></li></ul></li> <li><a href="#working-with-error-messages">Trabajando con los Mensajes de Error</a> <ul><li><a href="#custom-error-messages">Personalizar los Mensajes de Error</a></li></ul></li> <li><a href="#available-validation-rules">Reglas de Validación Disponibles</a></li> <li><a href="#conditionally-adding-rules">Agregando Reglas Condicionalmente</a></li> <li><a href="#validating-arrays">Validando Arreglos</a></li> <li><a href="#custom-validation-rules">Personalizar las Reglas de Validación</a> <ul><li><a href="#using-rule-objects">Usando Objetos de Regla</a></li> <li><a href="#using-closures">Usando Closures</a></li> <li><a href="#using-extensions">Usando Extensiones</a></li></ul></li></ul> <p><a name="introduction"></a></p> <h2 id="introduccion"><a class="header-anchor" href="#introduccion" aria-hidden="true">#</a> Introducción</h2> <p>Laravel proporciona varios enfoques diferentes para validar los datos entrantes de tu aplicación. De forma predeterminada, la clase base del controlador de Laravel usa una característica <code>ValidatesRequests</code> la cual proporciona un método conveniente para validar la solicitud HTTP entrante con una variedad de poderosas reglas de validación.</p> <p><a name="validation-quickstart"></a></p> <h2 id="inicio-rapido-de-validacion"><a class="header-anchor" href="#inicio-rapido-de-validacion" aria-hidden="true">#</a> Inicio Rápido de Validación</h2> <p>Para aprender sobre las poderosas características de validación de Laravel, vamos a observar un ejemplo completo validando un formulario y mostrando los mensajes de error devueltos al usuario.</p> <p><a name="quick-defining-the-routes"></a></p> <h3 id="definiendo-las-rutas"><a class="header-anchor" href="#definiendo-las-rutas" aria-hidden="true">#</a> Definiendo las Rutas</h3> <p>Primero, vamos a asumir que tenemos las rutas siguientes definidas en nuestro archivo <code>routes/web.php</code>:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'post/create'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'PostController@create'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'post'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'PostController@store'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>La ruta <code>GET</code> mostrará un formulario al usuario para crear un nuevo post de blog, mientras que la ruta <code>POST</code> guardará el nuevo post de blog en la base de datos.</p> <p><a name="quick-creating-the-controller"></a></p> <h3 id="creando-el-controlador"><a class="header-anchor" href="#creando-el-controlador" aria-hidden="true">#</a> Creando el Controlador</h3> <p>Luego, vamos a observar un simple controlador que maneja estas rutas. Dejaremos el método <code>store</code> vacío por ahora:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>Controller</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">PostController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Show the form to create a new blog post.
    *
    * @return Response
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'post.create'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
    * Store a new blog post.
    *
    * @param  Request  $request
    * @return Response
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">store</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Validate and store the blog post...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p><a name="quick-writing-the-validation-logic"></a></p> <h3 id="escribiendo-la-logica-de-validacion"><a class="header-anchor" href="#escribiendo-la-logica-de-validacion" aria-hidden="true">#</a> Escribiendo la Lógica de Validación</h3> <p>Ahora estamos listos para completar nuestro método <code>store</code> con la lógica para validar el nuevo post de blog. Para hacer esto, usaremos el método <code>validate</code> proporcionado por el objeto <code>Illuminate\Http\Request</code>. Si las reglas de validación pasan, tu código continuará su ejecución normalmente; sin embargo, si la validación falla, se arrojará una excepción y la respuesta de error apropiada será devuelta automáticamente al usuario. En el caso de una solicitud HTTP tradicional, se generará una respuesta de redirección, mientras una respuesta JSON será enviada para las solicitudes AJAX.</p> <p>Para lograr una mejor comprensión del método <code>validate</code>, regresemos al método <code>store</code>:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token comment">/**
* Store a new blog post.
*
* @param  Request  $request
* @return Response
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">store</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$validatedData</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required|unique:posts|max:255'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'body'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// The blog post is valid...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Como puedes ver, pasamos las reglas de validación deseadas dentro del método <code>validate</code>. Otra vez, si la validación falla, se generará la respuesta apropiada. Si la validación pasa, nuestro controlador continuará la ejecución normalmente.</p> <h4 id="deteniendo-en-la-primera-falla-de-validacion"><a class="header-anchor" href="#deteniendo-en-la-primera-falla-de-validacion" aria-hidden="true">#</a> Deteniendo en la Primera Falla de Validación</h4> <p>Algunas veces puede que desees detener la ejecución de las reglas de validación sobre un atributo después de la primera falla de validación. Para hacer eso, asigna la regla <code>bail</code> al atributo:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'bail|required|unique:posts|max:255'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'body'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>En este ejemplo, si la regla <code>unique</code> del atributo <code>title</code> falla, la regla <code>max</code> no será verificada. Las reglas serán validadas en el orden que sean asignadas.</p> <h4 id="una-obsevacion-sobre-los-atributos-anidados"><a class="header-anchor" href="#una-obsevacion-sobre-los-atributos-anidados" aria-hidden="true">#</a> Una Obsevación Sobre los Atributos Anidados</h4> <p>Si tu solicitud HTTP contiene parámetros &quot;anidados&quot;, puedes especificarlos en tus reglas de validación usando la sintaxis de &quot;punto&quot;:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required|unique:posts|max:255'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'author.name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'author.description'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="quick-displaying-the-validation-errors"></a></p> <h3 id="mostrando-los-errores-de-validacion"><a class="header-anchor" href="#mostrando-los-errores-de-validacion" aria-hidden="true">#</a> Mostrando los Errores de Validación</h3> <p>¿Qué sucede si los parámetros de solicitud entrantes no pasan las reglas de validación dados? Cómo mencionamos anteriormente, Laravel redirigirá al usuario de regreso a su ubicación previa. En adición, todos los errores de validación serán automáticamente <a href="/docs/%7B%7Bversion%7D%7D/session#flash-data">movidos instantáneamente a la sesión</a>.</p> <p>De nuevo, observa que no tuvimos que enlazar explícitamente los mensajes de error con la vista en nuestra ruta <code>GET</code>. Esto es porque Laravel revisará los errores en la sesión de datos y los enlazará automáticamente a la vista si están disponibles. La variable <code>$errors</code> será una instancia de <code>Illuminate\Support\MessageBag</code>. Para mayor información sobre cómo trabajar con este objeto, <a href="#working-with-error-messages">revisa su documentación</a>.</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>La variable <code>$errors</code> es enlazada a la vista por el middleware <code>Illuminate\View\Middleware\ShareErrorsFromSession</code>, el cual es proporcionado por el grupo de middleware <code>web</code>. <strong>Cuando este middleware se aplique una variable <code>$errors</code> siempre estará disponible en tus vistas</strong>, permitiendo que asumas convenientemente que la variable <code>$errors</code> está definida siempre y puede ser usada con seguridad.</p></div></div> <p>Así, en nuestro ejemplo, el usuario será redirigido al método <code>create</code> de nuestro controlador cuando la validación falle, permitiéndonos que muestre los mensajes de error en la vista:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token operator">/</span>resources<span class="token operator">/</span>views<span class="token operator">/</span>post<span class="token operator">/</span>create<span class="token punctuation">.</span>blade<span class="token punctuation">.</span>php <span class="token operator">--</span><span class="token operator">&gt;</span>

<span class="token operator">&lt;</span>h1<span class="token operator">&gt;</span>Create Post<span class="token operator">&lt;</span><span class="token operator">/</span>h1<span class="token operator">&gt;</span>

@<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$errors</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token double-quoted-string string">&quot;alert alert-danger&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>ul<span class="token operator">&gt;</span>
            @<span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$errors</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token variable">$error</span><span class="token punctuation">)</span>
                <span class="token operator">&lt;</span>li<span class="token operator">&gt;</span><span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$error</span> <span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>li<span class="token operator">&gt;</span>
            @<span class="token keyword">endforeach</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>ul<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
@<span class="token keyword">endif</span>

<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> Create Post Form <span class="token operator">--</span><span class="token operator">&gt;</span>
</code></pre></div><p><a name="a-note-on-optional-fields"></a></p> <h3 id="una-observacion-sobre-los-campos-opcionales"><a href="#una-observacion-sobre-los-campos-opcionales" aria-hidden="true" class="header-anchor">#</a> Una Observación Sobre los Campos Opcionales</h3> <p>De forma predeterminada, Laravel incluye los middleware <code>TrimStrings</code> y <code>ConvertEmptyStringsToNull</code> en la pila global de middleware de tu aplicación. Estos middleware son listados en la pila por la clase <code>App\Http\Kernel</code>. Debido a esto, con frecuencia necesitarás marcar tus campos &quot;opcionales&quot; de solicitud como <code>nullable</code> si no quieres que el validador considere los valores <code>null</code> como no válidos. Por ejemplo:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required|unique:posts|max:255'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'body'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'publish_at'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'nullable|date'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>En este ejemplo, estamos especificando que el campo <code>publish_at</code> puede que sea o <code>null</code> o una representación de fecha válida. Si el modificador <code>nullable</code> no es agregado a la definición de la regla, el validador consideraría el <code>null</code> como una fecha no válida.</p> <p><a name="quick-ajax-requests-and-validation"></a></p> <h4 id="solicitudes-ajax-y-validacion"><a href="#solicitudes-ajax-y-validacion" aria-hidden="true" class="header-anchor">#</a> Solicitudes AJAX y Validación</h4> <p>En este ejemplo, usamos un formulario tradicional para enviar datos a la aplicación. Sin embargo, muchas aplicaciones usan solicitudes AJAX. Al momento de usar el método <code>validate</code> durante una solicitud AJAX, Laravel no generará una respuesta de redirección. En su lugar, Laravel genera una respuesta JSON conteniendo todos los errores de validación. Esta respuesta JSON será enviada con un código de estado HTTP 422.</p> <p><a name="form-request-validation"></a></p> <h2 id="validacion-de-solicitud-de-formulario"><a href="#validacion-de-solicitud-de-formulario" aria-hidden="true" class="header-anchor">#</a> Validación de Solicitud de Formulario</h2> <p><a name="creating-form-requests"></a></p> <h3 id="creando-solicitudes-de-formulario-form-request"><a href="#creando-solicitudes-de-formulario-form-request" aria-hidden="true" class="header-anchor">#</a> Creando Solicitudes de Formulario (Form Request)</h3> <p>Para escenarios de validación más complejos, puede que desees crear una &quot;solicitud de formulario (form request)&quot;. Las Form Request son clases de solicitud personalizadas que contienen la lógica de validación. Para crear una clase de Form Request, usa el comando de CLI de Artisan <code>make:request</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan make<span class="token punctuation">:</span>request StoreBlogPost
</code></pre></div><p>La clase generada será colocada en el directorio <code>app/Http/Requests</code>. Si este directorio no existe, será creado cuando ejecutes el comando <code>make:request</code>. Agreguemos unas cuantas reglas de validación al método <code>rules</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Get the validation rules that apply to the request.
*
* @return array
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">rules</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required|unique:posts|max:255'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'body'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Puedes declarar el tipo de cualquier dependencia que necesites dentro de la firma del método <code>rules</code>. Se resolverán automáticamente a través del <a href="/docs/%7B%7Bversion%7D%7D/container">contenedor de servicio</a> de Laravel.</p></div> <p>Así que, ¿Cómo son evaluadas las reglas de validación? Todo lo que necesitas hacer es poner la referencia de la solicitud en tu método de controlador. La Form Request entrante es validada antes de que el método de controlador sea ejecutado, significa que no necesitas complicar tu controlador con ninguna lógica de validación:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Store the incoming blog post.
*
* @param  StoreBlogPost  $request
* @return Response
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">store</span><span class="token punctuation">(</span>StoreBlogPost <span class="token variable">$request</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// The incoming request is valid...</span>

    <span class="token comment">// Retrieve the validated input data...</span>
    <span class="token variable">$validated</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">validated</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Si la validación falla, una respuesta de redirección será generada para enviar al usuario de vuelta a su ubicación previa. Los errores también serán movidos instantáneamente a la sesión de modo que estén disponibles para mostrarlos. Si la solicitud fuese una solicitud AJAX, una respuesta HTTP con un código de estado 422 será devuelta al usuario incluyendo una representación JSON de los errores de validación.</p> <h4 id="agregando-hooks-posteriores-a-solicitudes-de-formularios"><a href="#agregando-hooks-posteriores-a-solicitudes-de-formularios" aria-hidden="true" class="header-anchor">#</a> Agregando Hooks Posteriores a Solicitudes de Formularios</h4> <p>Si prefieres agregar un hook &quot;posterior&quot; a una Form Request, puedes usar el método <code>withValidator</code>. Este método recibe el validador completamente construido, permitiendo que ejecutes cualquiera de sus métodos antes de que las reglas de validación sean evaluadas realmente:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Configure the validator instance.
*
* @param  \Illuminate\Validation\Validator  $validator
* @return void
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">withValidator</span><span class="token punctuation">(</span><span class="token variable">$validator</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$validator</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$validator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">somethingElseIsInvalid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$validator</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">errors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'field'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Something is wrong with this field!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="authorizing-form-requests"></a></p> <h3 id="autorizando-solicitudes-de-formularios"><a href="#autorizando-solicitudes-de-formularios" aria-hidden="true" class="header-anchor">#</a> Autorizando Solicitudes de Formularios</h3> <p>La clase Form Request también contiene un método <code>authorize</code>. Dentro de este método, puedes verificar si el usuario autenticado realmente tiene la autoridad para actualizar un recurso dado. Por ejemplo, puedes determinar si un usuario posee un comentario de blog que está intentando actualizar:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Determine if the user is authorized to make this request.
*
* @return bool
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">authorize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$comment</span> <span class="token operator">=</span> Comment<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">route</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'comment'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token variable">$comment</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">can</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'update'</span><span class="token punctuation">,</span> <span class="token variable">$comment</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Dado que todas las form request extienden de la clase solicitud base (Request) de Laravel, podemos usar el método <code>user</code> para acceder al usuario actualmente autenticado. También observa la llamada al método <code>route</code> en el ejemplo anterior. Este método te otorga acceso a los parámetros de URI definidos en la ruta que es ejecutada, tal como el parámetro <code>{comment}</code> en el ejemplo de abajo:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'comment/{comment}'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Si el método <code>authorize</code> devuelve <code>false</code>, una respuesta HTTP con un código de estado 403 será devuelta automáticamente y tu método de controlador no se ejecutará.</p> <p>Si planeas tener la lógica de autorización en otra parte de tu aplicación, devuelve <code>true</code> desde el método <code>authorize</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Determine if the user is authorized to make this request.
*
* @return bool
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">authorize</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Puedes declarar el tipo de cualquier dependencia que necesites dentro de la firma del método <code>authorize</code>. Se resolverán automáticamente a través de Laravel <a href="/docs/%7B%7Bversion%7D%7D/container">contenedor de servicio</a>.</p></div> <p><a name="customizing-the-error-messages"></a></p> <h3 id="personalizando-los-mensajes-de-error"><a href="#personalizando-los-mensajes-de-error" aria-hidden="true" class="header-anchor">#</a> Personalizando los Mensajes de Error</h3> <p>Puedes personalizar los mensajes de error usados por la solicitud de formulario al sobrescribir el método <code>messages</code>. Este método debería devolver un arreglo de atributos / pares de regla y sus correspondientes mensajes de error:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Get the error messages for the defined validation rules.
*
* @return array
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">messages</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'title.required'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'A title is required'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'body.required'</span>  <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'A message is required'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="customizing-the-validation-attributes"></a></p> <h3 id="personalizando-los-atributos-de-validacion"><a href="#personalizando-los-atributos-de-validacion" aria-hidden="true" class="header-anchor">#</a> Personalizando los Atributos de Validación</h3> <p>Si desea que la parte <code>:attribute</code> de su mensaje de validación se reemplace con un nombre de atributo personalizado, puede especificar los nombres personalizados sobrescribiendo el método <code>attributes</code>. Este método debería devolver un arreglo de pares de atributo / nombre:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Get custom attributes for validator errors.
*
* @return array
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">attributes</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'email address'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="manually-creating-validators"></a></p> <h2 id="creando-validadores-manualmente"><a href="#creando-validadores-manualmente" aria-hidden="true" class="header-anchor">#</a> Creando Validadores Manualmente</h2> <p>Si no quieres usar el método <code>messages</code> en la solicitud, puedes crear una instancia de validador manualmente usando la clase <a href="/docs/%7B%7Bversion%7D%7D/facades">facade</a> <code>Validator</code>. El método <code>make</code> en la clase facade genera una nueva instancia del validador:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Validator</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>Controller</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">PostController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Store a new blog post.
    *
    * @param  Request  $request
    * @return Response
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">store</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$validator</span> <span class="token operator">=</span> Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
            <span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required|unique:posts|max:255'</span><span class="token punctuation">,</span>
            <span class="token single-quoted-string string">'body'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required'</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$validator</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">fails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'post/create'</span><span class="token punctuation">)</span>
                        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withErrors</span><span class="token punctuation">(</span><span class="token variable">$validator</span><span class="token punctuation">)</span>
                        <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withInput</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// Store the blog post...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>El primer argumento pasado al método <code>make</code> son los datos bajo validación. El segundo argumento son las reglas de validación que deberían ser aplicadas a los datos.</p> <p>Después de verificar si la validación de solicitud falló, puedes usar el método <code>withErrors</code> para mover instantáneamente los mensajes de error a la sesión. Al momento de usar este método, la variable <code>$errors</code> será compartida automáticamente con tus vistas después de la redirección, permitiendo que los muestres de vuelta al usuario. El método <code>withErrors</code> acepta un validador, un <code>MessageBag</code>, o un <code>array</code> de PHP.</p> <p><a name="automatic-redirection"></a></p> <h3 id="redireccion-automatica"><a href="#redireccion-automatica" aria-hidden="true" class="header-anchor">#</a> Redirección Automática</h3> <p>Si prefieres crear manualmente una instancia del validador pero aún tomar ventaja de la redirección automática ofrecida por el método <code>validate</code> de la solicitud, puedes ejecutar el método <code>validate</code> en una instancia de validador existente. Si la validación falla, el usuario automáticamente será redirigido o, en el caso de una solicitud AJAX, le será devuelta una respuesta JSON:</p> <div class="language-php extra-class"><pre class="language-php"><code>Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required|unique:posts|max:255'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'body'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="named-error-bags"></a></p> <h3 id="paquetes-de-errores-con-nombres"><a href="#paquetes-de-errores-con-nombres" aria-hidden="true" class="header-anchor">#</a> Paquetes de Errores con Nombres</h3> <p>Si tienes múltiples formularios en una sola página, puede que desees nombrar el <code>MessageBag</code> de errores, permitiendo que obtengas los mensajes de error para un formulario específico. Pasa un nombre como segundo argumento a <code>withErrors</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">return</span> <span class="token function">redirect</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'register'</span><span class="token punctuation">)</span>
            <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withErrors</span><span class="token punctuation">(</span><span class="token variable">$validator</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'login'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Entonces puedes acceder la instancia de <code>MessageBag</code> nombrada de la variable <code>$errors</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$errors</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">login</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
</code></pre></div><p><a name="after-validation-hook"></a></p> <h3 id="hook-de-validacion-posterior"><a href="#hook-de-validacion-posterior" aria-hidden="true" class="header-anchor">#</a> Hook de Validación Posterior</h3> <p>El validador también permite que adjuntes funciones de retorno para que sean ejecutadas después que se complete la validación. Esto permite que ejecutes fácilmente validación adicional e incluso agregar más mensajes de error a la colección de mensajes. Para empezar, usa el método <code>after</code> en una instancia de validador:</p> <div class="language-php extra-class"><pre class="language-php"><code>    <span class="token variable">$validator</span> <span class="token operator">=</span> Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token variable">$validator</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$validator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">somethingElseIsInvalid</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$validator</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">errors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'field'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Something is wrong with this field!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$validator</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">fails</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span>
</code></pre></div><p><a name="working-with-error-messages"></a></p> <h2 id="trabajando-con-los-mensajes-de-error"><a href="#trabajando-con-los-mensajes-de-error" aria-hidden="true" class="header-anchor">#</a> Trabajando con los Mensajes de Error</h2> <p>Después de ejecutar el método <code>errors</code> en una instancia <code>Validator</code>, recibirás una instancia <code>Illuminate\Support\MessageBag</code>, la cual tiene una variedad de métodos convenientes para trabajar con los mensajes de error. La variable <code>$errors</code> que se hace disponible automáticamente para todas las vistas también es una instancia de la clase <code>MessageBag</code>.</p> <h4 id="obteniendo-el-primer-mensaje-de-error-para-un-campo"><a href="#obteniendo-el-primer-mensaje-de-error-para-un-campo" aria-hidden="true" class="header-anchor">#</a> Obteniendo el Primer Mensaje de Error para un Campo</h4> <p>Para obtener el primer mensaje de error para un campo dado, usa el método <code>first</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$errors</span> <span class="token operator">=</span> <span class="token variable">$validator</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">errors</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">echo</span> <span class="token variable">$errors</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">first</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="obteniendo-todos-los-mensajes-de-error-para-un-campo"><a href="#obteniendo-todos-los-mensajes-de-error-para-un-campo" aria-hidden="true" class="header-anchor">#</a> Obteniendo Todos los Mensajes de Error para un Campo</h4> <p>Si necesitas obtener un arreglo de todos los mensajes para un campo dado, usa el método <code>get</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$errors</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token variable">$message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Si estás validando un campo de formulario de arreglo, puedes obtener todos los mensajes para cada uno de los elementos de arreglo usando el caracter <code>*</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$errors</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'attachments.*'</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token variable">$message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="obteniendo-todos-los-mensajes-de-error-para-todos-los-campos"><a href="#obteniendo-todos-los-mensajes-de-error-para-todos-los-campos" aria-hidden="true" class="header-anchor">#</a> Obteniendo Todos los Mensajes de Error para Todos los Campos</h4> <p>Para obtener un arreglo de todos los mensajes para todos los campos, usa el método <code>all</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$errors</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">as</span> <span class="token variable">$message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="determinando-si-existen-mensajes-para-un-campo"><a href="#determinando-si-existen-mensajes-para-un-campo" aria-hidden="true" class="header-anchor">#</a> Determinando Si Existen Mensajes para un Campo</h4> <p>El método <code>has</code> puede ser usado para determinar si existe algún mensaje de error para un campo dado:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$errors</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="custom-error-messages"></a></p> <h3 id="mensajes-de-error-personalizados"><a href="#mensajes-de-error-personalizados" aria-hidden="true" class="header-anchor">#</a> Mensajes de Error Personalizados</h3> <p>Si es necesario, puedes usar mensajes de error personalizados en vez de los predeterminados. Hay varias formas para especificar mensajes personalizados. Primero, puedes pasar los mensajes personalizados como tercer argumento al método <code>Validator::make</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$messages</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'required'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'The :attribute field is required.'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token variable">$validator</span> <span class="token operator">=</span> Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">,</span> <span class="token variable">$rules</span><span class="token punctuation">,</span> <span class="token variable">$messages</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>En este ejemplo, el marcador <code>:attribute</code> será reemplazado por el nombre real del campo bajo validación. También puedes utilizar otros marcadores en mensajes de validación. Por ejemplo:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$messages</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'same'</span>    <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'The :attribute and :other must match.'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'size'</span>    <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'The :attribute must be exactly :size.'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'between'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'The :attribute value :input is not between :min - :max.'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'in'</span>      <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'The :attribute must be one of the following types: :values'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="especificando-un-mensaje-personalizado-para-un-atributo-dado"><a href="#especificando-un-mensaje-personalizado-para-un-atributo-dado" aria-hidden="true" class="header-anchor">#</a> Especificando un Mensaje Personalizado para un Atributo Dado</h4> <p>Algunas veces puedes querer especificar un mensaje de error personalizado sólo para un campo específico. Puedes hacer eso usando notación de &quot;punto&quot;. Especifica el nombre del atributo al principio, seguido por la regla:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$messages</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'email.required'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'We need to know your e-mail address!'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="localization"></a></p> <h4 id="especificando-mensajes-personalizados-en-archivos-por-idiomas"><a href="#especificando-mensajes-personalizados-en-archivos-por-idiomas" aria-hidden="true" class="header-anchor">#</a> Especificando Mensajes Personalizados en Archivos por Idiomas</h4> <p>En muchos casos, probablemente especificarás tus mensajes personalizados en un archivo de idioma en lugar de pasarlos directamente al <code>Validator</code>. Para hacer eso, agrega tus mensajes al arreglo <code>custom</code> en el archivo de idioma <code>resources/lang/xx/validation.php</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'custom'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'required'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'We need to know your e-mail address!'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="especificando-los-atributos-personalizados-en-archivos-de-idiomas"><a href="#especificando-los-atributos-personalizados-en-archivos-de-idiomas" aria-hidden="true" class="header-anchor">#</a> Especificando los Atributos Personalizados en Archivos de Idiomas</h4> <p>Si prefieres que la porción <code>:attribute</code> de tu mensaje de validación sea reemplazada con un nombre de atributo personalizado, puedes especificar el nombre personalizado en el arreglo <code>attributes</code> de tu archivo de idioma <code>resources/lang/xx/validation.php</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'attributes'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'email address'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="especificando-los-valores-personalizados-en-archivos-de-idiomas"><a href="#especificando-los-valores-personalizados-en-archivos-de-idiomas" aria-hidden="true" class="header-anchor">#</a> Especificando los Valores Personalizados en Archivos de Idiomas</h4> <p>A veces es posible que necesites que la parte <code>:value</code> de tu mensaje de validación sea reemplazada por una representación personalizada del valor. Por ejemplo, considera la siguiente regla que especifica que se requiere un número de tarjeta de crédito si el <code>payment_type</code> tiene un valor de<code>cc</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'credit_card_number'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required_if:payment_type,cc'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Si esta regla de validación falla, producirá el siguiente mensaje de error:</p> <div class="language-php extra-class"><pre class="language-php"><code>The credit card number field is required when payment type is cc<span class="token punctuation">.</span>
</code></pre></div><p>En lugar de mostrar <code>cc</code> como el valor del tipo de pago, puedes especificar una representación de valor personalizada en tu archivo de idioma <code>validation</code> definiendo un arreglo <code>values</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'values'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'payment_type'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'cc'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'credit card'</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Ahora, si la regla de validación falla, producirá el siguiente mensaje:</p> <div class="language-php extra-class"><pre class="language-php"><code>The credit card number field is required when payment type is credit card<span class="token punctuation">.</span>
</code></pre></div><p><a name="available-validation-rules"></a></p> <h2 id="reglas-de-validacion-disponibles"><a href="#reglas-de-validacion-disponibles" aria-hidden="true" class="header-anchor">#</a> Reglas de Validación Disponibles</h2> <p>Debajo hay una lista con todas las reglas de validación disponibles y su función:</p> <div markdown="1" class="collection-method-list"><p><a href="#rule-accepted">Accepted</a> <a href="#rule-active-url">Active URL</a> <a href="#rule-after">After (Date)</a> <a href="#rule-after-or-equal">After Or Equal (Date)</a> <a href="#rule-alpha">Alpha</a> <a href="#rule-alpha-dash">Alpha Dash</a> <a href="#rule-alpha-num">Alpha Numeric</a> <a href="#rule-array">Array</a> <a href="#rule-bail">Bail</a> <a href="#rule-before">Before (Date)</a> <a href="#rule-before-or-equal">Before Or Equal (Date)</a> <a href="#rule-between">Between</a> <a href="#rule-boolean">Boolean</a> <a href="#rule-confirmed">Confirmed</a> <a href="#rule-date">Date</a> <a href="#rule-date-equals">Date Equals</a> <a href="#rule-date-format">Date Format</a> <a href="#rule-different">Different</a> <a href="#rule-digits">Digits</a> <a href="#rule-digits-between">Digits Between</a> <a href="#rule-dimensions">Dimensions (Image Files)</a> <a href="#rule-distinct">Distinct</a> <a href="#rule-email">E-Mail</a> <a href="#rule-exists">Exists (Database)</a> <a href="#rule-file">File</a> <a href="#rule-filled">Filled</a> <a href="#rule-gt">Greater Than</a> <a href="#rule-gte">Greater Than Or Equal</a> <a href="#rule-image">Image (File)</a> <a href="#rule-in">In</a> <a href="#rule-in-array">In Array</a> <a href="#rule-integer">Integer</a> <a href="#rule-ip">IP Address</a> <a href="#rule-json">JSON</a> <a href="#rule-lt">Less Than</a> <a href="#rule-lte">Less Than Or Equal</a> <a href="#rule-max">Max</a> <a href="#rule-mimetypes">MIME Types</a> <a href="#rule-mimes">MIME Type By File Extension</a> <a href="#rule-min">Min</a> <a href="#rule-not-in">Not In</a> <a href="#rule-not-regex">Not Regex</a> <a href="#rule-nullable">Nullable</a> <a href="#rule-numeric">Numeric</a> <a href="#rule-present">Present</a> <a href="#rule-regex">Regular Expression</a> <a href="#rule-required">Required</a> <a href="#rule-required-if">Required If</a> <a href="#rule-required-unless">Required Unless</a> <a href="#rule-required-with">Required With</a> <a href="#rule-required-with-all">Required With All</a> <a href="#rule-required-without">Required Without</a> <a href="#rule-required-without-all">Required Without All</a> <a href="#rule-same">Same</a> <a href="#rule-size">Size</a> <a href="#rule-starts-with">Starts With</a> <a href="#rule-string">String</a> <a href="#rule-timezone">Timezone</a> <a href="#rule-unique">Unique (Database)</a> <a href="#rule-url">URL</a> <a href="#rule-uuid">UUID</a></p></div> <p><a name="rule-accepted"></a></p> <h4 id="accepted"><a href="#accepted" aria-hidden="true" class="header-anchor">#</a> accepted</h4> <p>El campo bajo validación debe ser <em>yes</em>, <em>on</em>, <em>1</em>, o <em>true</em>. Esto es útil para validar la aceptación de &quot;Términos de Servicio&quot;, por ejemplo.</p> <p><a name="rule-active-url"></a></p> <h4 id="active-url"><a href="#active-url" aria-hidden="true" class="header-anchor">#</a> active_url</h4> <p>El campo bajo validación debe tener un registro A o AAAA válido de acuerdo a la función de PHP <code>dns_get_record</code>.</p> <p><a name="rule-after"></a></p> <h4 id="after-date"><a href="#after-date" aria-hidden="true" class="header-anchor">#</a> after:<em>date</em></h4> <p>El campo bajo validación debe ser un valor después de una fecha dada. Las fechas serán pasadas a la función de PHP <code>strtotime</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'start_date'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required|date|after:tomorrow'</span>
</code></pre></div><p>En lugar de pasar una cadena de fecha para que sea evaluada por <code>strtotime</code>, puedes especificar otro campo para comparar con la fecha:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'finish_date'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required|date|after:start_date'</span>
</code></pre></div><p><a name="rule-after-or-equal"></a></p> <h4 id="after-or-equal-date"><a href="#after-or-equal-date" aria-hidden="true" class="header-anchor">#</a> after_or_equal:<em>date</em></h4> <p>El campo bajo validación debe ser un valor después o igual a la fecha dada. Para mayor información, observa la regla <a href="#rule-after">after</a>.</p> <p><a name="rule-alpha"></a></p> <h4 id="alpha"><a href="#alpha" aria-hidden="true" class="header-anchor">#</a> alpha</h4> <p>El campo bajo validación debe estar compuesto completamente por caracteres alfabéticos.</p> <p><a name="rule-alpha-dash"></a></p> <h4 id="alpha-dash"><a href="#alpha-dash" aria-hidden="true" class="header-anchor">#</a> alpha_dash</h4> <p>El campo bajo validación puede tener caracteres alfanuméricos, al igual que guiones cortos y guiones largos.</p> <p><a name="rule-alpha-num"></a></p> <h4 id="alpha-num"><a href="#alpha-num" aria-hidden="true" class="header-anchor">#</a> alpha_num</h4> <p>El campo bajo validación debe estar compuesto completamente por caracteres alfanuméricos.</p> <p><a name="rule-array"></a></p> <h4 id="array"><a href="#array" aria-hidden="true" class="header-anchor">#</a> array</h4> <p>El campo bajo validación debe ser un <code>array</code> de PHP.</p> <p><a name="rule-bail"></a></p> <h4 id="bail"><a href="#bail" aria-hidden="true" class="header-anchor">#</a> bail</h4> <p>Detiene la ejecución de las reglas de validación después del primer error de validación.</p> <p><a name="rule-before"></a></p> <h4 id="before-date"><a href="#before-date" aria-hidden="true" class="header-anchor">#</a> before:<em>date</em></h4> <p>El campo bajo validación debe ser un valor que preceda la fecha dada. Las fechas serán pasadas a la función PHP <code>strtotime</code>. Además, como la regla <a href="#rule-after"><code>after</code></a> el nombre de otro campo bajo validación puede suministrarse como el valor de <code>fecha</code>.</p> <p><a name="rule-before-or-equal"></a></p> <h4 id="before-or-equal-date"><a href="#before-or-equal-date" aria-hidden="true" class="header-anchor">#</a> before_or_equal:<em>date</em></h4> <p>Este campo bajo validación debe ser un valor que preceda o igual a la fecha dada. Las fechas serán pasadas a la función de PHP <code>strtotime</code>. Además, como la regla <a href="#rule-after"><code>after</code></a> el nombre de otro campo bajo validación puede suministrarse como el valor de <code>fecha</code>.</p> <p><a name="rule-between"></a></p> <h4 id="between-min-max"><a href="#between-min-max" aria-hidden="true" class="header-anchor">#</a> between:<em>min</em>,<em>max</em></h4> <p>El campo bajo validación debe tener un tamaño entre el <em>min</em> y <em>max</em> dados. Las cadenas, los números, los arreglos y los archivos se evalúan de la misma manera que la regla <a href="#rule-size"><code>size</code></a>.</p> <p><a name="rule-boolean"></a></p> <h4 id="boolean"><a href="#boolean" aria-hidden="true" class="header-anchor">#</a> boolean</h4> <p>El campo bajo validación debe poder ser convertido como un booleano. Las entrada aceptadas son <code>true</code>, <code>false</code>, <code>1</code>, <code>0</code>, <code>&quot;1&quot;</code>, y <code>&quot;0&quot;</code>.</p> <p><a name="rule-confirmed"></a></p> <h4 id="confirmed"><a href="#confirmed" aria-hidden="true" class="header-anchor">#</a> confirmed</h4> <p>El campo bajo validación debe tener un campo que coincida con <code>foo_confirmation</code>. Por ejemplo, si el campo bajo validación es <code>password</code>, un campo <code>password_confirmation</code> que coincida debe estar presente en la entrada.</p> <p><a name="rule-date"></a></p> <h4 id="date"><a href="#date" aria-hidden="true" class="header-anchor">#</a> date</h4> <p>El campo bajo validación debe ser una fecha válida, no relativa, de acuerdo a la función de PHP <code>strtotime</code>.</p> <p><a name="rule-date-equals"></a></p> <h4 id="date-equals-date"><a href="#date-equals-date" aria-hidden="true" class="header-anchor">#</a> date_equals:<em>date</em></h4> <p>El campo bajo validación debe ser igual a la fecha dada. Las fechas serán pasadas en la función <code>strtotime</code> de PHP.</p> <p><a name="rule-date-format"></a></p> <h4 id="date-format-format"><a href="#date-format-format" aria-hidden="true" class="header-anchor">#</a> date_format:<em>format</em></h4> <p>El campo bajo validación debe coincidir con el <em>format</em> dado. Deberías usar <code>date</code> <strong>o</strong> <code>date_format</code> al momento de validar un campo, no ambos.</p> <p><a name="rule-different"></a></p> <h4 id="different-field"><a href="#different-field" aria-hidden="true" class="header-anchor">#</a> different:<em>field</em></h4> <p>El campo bajo validación debe tener un valor distinto de <em>field</em>.</p> <p><a name="rule-digits"></a></p> <h4 id="digits-value"><a href="#digits-value" aria-hidden="true" class="header-anchor">#</a> digits:<em>value</em></h4> <p>El campo bajo validación debe ser <em>numeric</em> y debe tener una longitud exacta de <em>value</em>.</p> <p><a name="rule-digits-between"></a></p> <h4 id="digits-between-min-max"><a href="#digits-between-min-max" aria-hidden="true" class="header-anchor">#</a> digits_between:<em>min</em>,<em>max</em></h4> <p>El campo bajo validación debe tener una longitud entre los valores de <em>min</em> y <em>max</em> dados.</p> <p><a name="rule-dimensions"></a></p> <h4 id="dimensions"><a href="#dimensions" aria-hidden="true" class="header-anchor">#</a> dimensions</h4> <p>El archivo bajo validación debe ser una imagen que cumpla con las restricciones de dimensión como las especificadas por los parámetros de la regla:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'avatar'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'dimensions:min_width=100,min_height=200'</span>
</code></pre></div><p>Las restricciones disponibles son: <em>min_width</em>, <em>max_width</em>, <em>min_height</em>, <em>max_height</em>, <em>width</em>, <em>height</em>, <em>ratio</em>.</p> <p>Una restricción <em>ratio</em> debería ser representada como el ancho dividido por la altura. Esto puede ser especificado o por una instrucción como <code>3/2</code> o en decimal como <code>1.5</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'avatar'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'dimensions:ratio=3/2'</span>
</code></pre></div><p>Dado que esta regla requiere varios argumentos, puedes usar el método <code>Rule::dimensions</code> para construir con fluidez la regla:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Validation<span class="token punctuation">\</span>Rule</span><span class="token punctuation">;</span>

Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'avatar'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'required'</span><span class="token punctuation">,</span>
        Rule<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">dimensions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">maxWidth</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">maxHeight</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">ratio</span><span class="token punctuation">(</span><span class="token number">3</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="rule-distinct"></a></p> <h4 id="distinct"><a href="#distinct" aria-hidden="true" class="header-anchor">#</a> distinct</h4> <p>Al momento de trabajar con arreglos, el campo bajo validación no debe tener ningún valor duplicado.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'foo.*.id'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'distinct'</span>
</code></pre></div><p><a name="rule-email"></a></p> <h4 id="email"><a href="#email" aria-hidden="true" class="header-anchor">#</a> email</h4> <p>El campo bajo validación debe estar formateado como una dirección de correo electrónico.</p> <p><a name="rule-exists"></a></p> <h4 id="exists-table-column"><a href="#exists-table-column" aria-hidden="true" class="header-anchor">#</a> exists:<em>table</em>,<em>column</em></h4> <p>El campo bajo validación debe existir en una tabla de base de datos dada.</p> <h4 id="uso-basico-de-la-regla-exists"><a href="#uso-basico-de-la-regla-exists" aria-hidden="true" class="header-anchor">#</a> Uso Básico de la Regla Exists</h4> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'state'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'exists:states'</span>
</code></pre></div><p>Si la opción <code>column</code> no está especificada, se usará el nombre del campo.</p> <h4 id="especificando-un-nombre-de-columna-personalizado"><a href="#especificando-un-nombre-de-columna-personalizado" aria-hidden="true" class="header-anchor">#</a> Especificando un Nombre de Columna Personalizado</h4> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'state'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'exists:states,abbreviation'</span>
</code></pre></div><p>Ocasionalmente, puedes necesitar especificar una conexión de base de datos para que sea usada por la consulta de <code>exists</code>. Puedes acompañar esto al anteponer al nombre de la conexión el nombre de la tabla usando sintaxis de &quot;punto&quot;:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'exists:connection.staff,email'</span>
</code></pre></div><p>Si prefieres personalizar la consulta ejecutada por la regla de validación, puedes usar la clase <code>Rule</code> para definir con fluidez la regla. En este ejemplo, también especificaremos las reglas de validación como un arreglo en vez de usar el carácter <code>|</code> para delimitarlas.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Validation<span class="token punctuation">\</span>Rule</span><span class="token punctuation">;</span>

Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'required'</span><span class="token punctuation">,</span>
        Rule<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'staff'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$query</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'account_id'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="rule-file"></a></p> <h4 id="file"><a href="#file" aria-hidden="true" class="header-anchor">#</a> file</h4> <p>El campo bajo validación debe ser un archivo que sea cargado exitosamente.</p> <p><a name="rule-filled"></a></p> <h4 id="filled"><a href="#filled" aria-hidden="true" class="header-anchor">#</a> filled</h4> <p>El campo bajo validación no debe estar vacío cuando esté presente.</p> <p><a name="rule-gt"></a></p> <h4 id="gt-field"><a href="#gt-field" aria-hidden="true" class="header-anchor">#</a> gt:<em>field</em></h4> <p>El campo bajo validación debe ser mayor que el <em>field</em> dado. Los dos campos deben ser del mismo tipo. Las cadenas, los números, los arreglos y los archivos se evalúan utilizando las mismas convenciones que la regla <code>size</code>.</p> <p><a name="rule-gte"></a></p> <h4 id="gte-field"><a href="#gte-field" aria-hidden="true" class="header-anchor">#</a> gte:<em>field</em></h4> <p>El campo bajo validación debe ser mayor o igual que el <em>field</em> dado. Los dos campos deben ser del mismo tipo. Las cadenas, los números, los arreglos y los archivos se evalúan utilizando las mismas convenciones que la regla <code>size</code>.</p> <p><a name="rule-image"></a></p> <h4 id="image"><a href="#image" aria-hidden="true" class="header-anchor">#</a> image</h4> <p>El archivo bajo validación debe ser una imagen (jpeg, png, bmp, gif o svg)</p> <p><a name="rule-in"></a></p> <h4 id="in-foo-bar"><a href="#in-foo-bar" aria-hidden="true" class="header-anchor">#</a> in:<em>foo</em>,<em>bar</em>,...</h4> <p>El archivo bajo validación debe estar incluido en la lista dada de valores. Debido a que esta regla requiere con frecuencia que hagas <code>implode</code> a un arreglo, el método <code>Rule::in</code> puede ser usado para construir fluidamente la regla:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Validation<span class="token punctuation">\</span>Rule</span><span class="token punctuation">;</span>

Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'zones'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'required'</span><span class="token punctuation">,</span>
        Rule<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">in</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'first-zone'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'second-zone'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="rule-in-array"></a></p> <h4 id="in-array-anotherfield"><a href="#in-array-anotherfield" aria-hidden="true" class="header-anchor">#</a> in_array:<em>anotherfield</em>.*</h4> <p>El campo bajo validación debe existir en los valores de <em>anotherfield</em>.</p> <p><a name="rule-integer"></a></p> <h4 id="integer"><a href="#integer" aria-hidden="true" class="header-anchor">#</a> integer</h4> <p>El campo bajo validación debe ser un entero.</p> <p><a name="rule-ip"></a></p> <h4 id="ip"><a href="#ip" aria-hidden="true" class="header-anchor">#</a> ip</h4> <p>El campo bajo validación debe ser una dirección IP.</p> <h4 id="ipv4"><a href="#ipv4" aria-hidden="true" class="header-anchor">#</a> ipv4</h4> <p>El campo bajo validación debe ser una dirección IPv4.</p> <h4 id="ipv6"><a href="#ipv6" aria-hidden="true" class="header-anchor">#</a> ipv6</h4> <p>El campo bajo validación debe ser una dirección IPv6.</p> <p><a name="rule-json"></a></p> <h4 id="json"><a href="#json" aria-hidden="true" class="header-anchor">#</a> json</h4> <p>El campo bajo validación debe ser una cadena JSON válida.</p> <p><a name="rule-lt"></a></p> <h4 id="lt-field"><a href="#lt-field" aria-hidden="true" class="header-anchor">#</a> lt:<em>field</em></h4> <p>El campo bajo validación debe ser menor que el <em>field</em> dado. Los dos campos deben ser del mismo tipo. Las cadenas, los números, los arreglos y los archivos se evalúan utilizando las mismas convenciones que la regla <code>size</code>.</p> <p><a name="rule-lte"></a></p> <h4 id="lte-field"><a href="#lte-field" aria-hidden="true" class="header-anchor">#</a> lte:<em>field</em></h4> <p>El campo bajo validación debe ser menor o igual que el <em>field</em> dado. Los dos campos deben ser del mismo tipo. Las cadenas, los números, los arreglos y los archivos se evalúan utilizando las mismas convenciones que la regla <code>size</code>.</p> <p><a name="rule-max"></a></p> <h4 id="max-value"><a href="#max-value" aria-hidden="true" class="header-anchor">#</a> max:<em>value</em></h4> <p>El campo bajo validación debe ser menor que o igual a un <em>valor</em> máximo. Las cadenas, los números, los arreglos y los archivos son evaluados de la misma forma como la regla <a href="#rule-size"><code>size</code></a>.</p> <p><a name="rule-mimetypes"></a></p> <h4 id="mimetypes-text-plain"><a href="#mimetypes-text-plain" aria-hidden="true" class="header-anchor">#</a> mimetypes:<em>text/plain</em>,...</h4> <p>El archivo bajo validación debe coincidir con uno de los tipos MIME dados:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'video'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'mimetypes:video/avi,video/mpeg,video/quicktime'</span>
</code></pre></div><p>Para determinar el tipo MIME del archivo cargado, el contenido del archivo será leído y el framework intentará suponer el tipo MIME, el cual puede ser distinto del tipo MIME proporcionado por el cliente.</p> <p><a name="rule-mimes"></a></p> <h4 id="mimes-foo-bar"><a href="#mimes-foo-bar" aria-hidden="true" class="header-anchor">#</a> mimes:<em>foo</em>,<em>bar</em>,...</h4> <p>El archivo bajo validación debe tener un tipo MIME correspondiente a uno con las extensiones listadas.</p> <h4 id="uso-basico-de-la-regla-mime"><a href="#uso-basico-de-la-regla-mime" aria-hidden="true" class="header-anchor">#</a> Uso Básico de la Regla MIME</h4> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'photo'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'mimes:jpeg,bmp,png'</span>
</code></pre></div><p>Incluso aunque solamente necesites especificar las extensiones, en realidad esta regla valida contra el tipo MIME del archivo mediante la lectura de los contenidos del archivo y adivinando su tipo MIME.</p> <p>Una lista completa de tipos MIME y sus correspondientes extensiones pueden ser encontrados en la siguiente ubicación: <a href="https://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types" target="_blank" rel="noopener noreferrer">https://svn.apache.org/repos/asf/httpd/httpd/trunk/docs/conf/mime.types<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p><a name="rule-min"></a></p> <h4 id="min-value"><a href="#min-value" aria-hidden="true" class="header-anchor">#</a> min:<em>value</em></h4> <p>El campo bajo validación deben tener un <em>valor</em> mínimo. Las cadenas, los números, los arreglos y los archivos son evaluados en la misma forma como la regla <a href="#rule-size"><code>size</code></a>.</p> <p><a name="rule-not-in"></a></p> <h4 id="not-in-foo-bar"><a href="#not-in-foo-bar" aria-hidden="true" class="header-anchor">#</a> not_in:<em>foo</em>,<em>bar</em>,...</h4> <p>El campo bajo validación no debe estar incluido en la lista dada de valores. El método <code>Rule::notIn</code> puede ser usado para construir fluidamente la regla:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Validation<span class="token punctuation">\</span>Rule</span><span class="token punctuation">;</span>

Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'toppings'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'required'</span><span class="token punctuation">,</span>
        Rule<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">notIn</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'sprinkles'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'cherries'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="rule-not-regex"></a></p> <h4 id="not-regex-pattern"><a href="#not-regex-pattern" aria-hidden="true" class="header-anchor">#</a> not_regex:<em>pattern</em></h4> <p>El campo bajo validación no debe coincidir con la expresión regular dada.</p> <p>Internamente, esta regla usa la función PHP <code>preg_match</code>. El patrón especificado debe obedecer el mismo formato requerido por <code>preg_match</code> y, por lo tanto, también incluir delimitadores válidos. Por ejemplo: <code>'email' =&gt; 'not_regex:/^.+$/i'</code>.</p> <p><strong>Nota:</strong> Al usar los patrones <code>regex</code> / <code>not_regex</code>, puede ser necesario especificar reglas en un arreglo en lugar de usar delimitadores de tubería, especialmente si la expresión regular contiene un carácter barra <code>|</code>.</p> <p><a name="rule-nullable"></a></p> <h4 id="nullable"><a href="#nullable" aria-hidden="true" class="header-anchor">#</a> nullable</h4> <p>El campo bajo validación puede ser <code>null</code>. Esto es particularmente útil al momento de validar tipos primitivos tales como cadenas y enteros que pueden contener valores <code>null</code>.</p> <p><a name="rule-numeric"></a></p> <h4 id="numeric"><a href="#numeric" aria-hidden="true" class="header-anchor">#</a> numeric</h4> <p>El campo bajo validación debe ser numérico.</p> <p><a name="rule-present"></a></p> <h4 id="present"><a href="#present" aria-hidden="true" class="header-anchor">#</a> present</h4> <p>El campo bajo validación debe estar presente en los datos de entrada pero puede estar vacío.</p> <p><a name="rule-regex"></a></p> <h4 id="regex-pattern"><a href="#regex-pattern" aria-hidden="true" class="header-anchor">#</a> regex:<em>pattern</em></h4> <p>El campo bajo validación debe coincidir con la expresión regular dada.</p> <p>Internamente, esta regla usa la función PHP <code>preg_match</code>. El patrón especificado debe obedecer el mismo formato requerido por <code>preg_match</code> y, por lo tanto, también incluir delimitadores válidos. Por ejemplo: <code>'email' =&gt; 'regex:/^.+@.+$/i'</code>.</p> <p><strong>Nota:</strong> Al usar los patrones <code>regex</code> / <code>not_regex</code>, puede ser necesario especificar reglas en un arreglo en lugar de usar delimitadores de tubería, especialmente si la expresión regular contiene un carácter barra <code>|</code>.</p> <p><a name="rule-required"></a></p> <h4 id="required"><a href="#required" aria-hidden="true" class="header-anchor">#</a> required</h4> <p>El campo bajo validación debe estar presente entre los datos entrada y no vacío. Un campo es considerado &quot;vacío&quot; si algunas de las siguientes condiciones es cierta:</p> <ul><li>El valor es <code>null</code>.</li> <li>El valor es una cadena vacía.</li> <li>El valor es un arreglo vacío o un objeto <code>Countable</code> vacío.</li> <li>El valor es un archivo cargado sin ruta.</li></ul> <p><a name="rule-required-if"></a></p> <h4 id="required-if-anotherfield-value"><a href="#required-if-anotherfield-value" aria-hidden="true" class="header-anchor">#</a> required_if:<em>anotherfield</em>,<em>value</em>,...</h4> <p>El campo bajo validación debe estar presente y no vacío si el campo <em>anotherfield</em> es igual a cualquier <em>valor</em>.</p> <p>Si deseas construir una condición más compleja para la regla <code>required_if</code>, puedes usar el método <code>Rule::requiredIf</code>. Este método acepta un valor booleano o un Closure. Cuando se pasa un Closure, éste debe devolver <code>true</code> o <code>false</code> para indicar si el campo bajo validación es obligatorio:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Validation<span class="token punctuation">\</span>Rule</span><span class="token punctuation">;</span>

Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'role_id'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Rule<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">requiredIf</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">is_admin</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'role_id'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Rule<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">requiredIf</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">use</span> <span class="token punctuation">(</span><span class="token variable">$request</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">is_admin</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="rule-required-unless"></a></p> <h4 id="required-unless-anotherfield-value"><a href="#required-unless-anotherfield-value" aria-hidden="true" class="header-anchor">#</a> required_unless:<em>anotherfield</em>,<em>value</em>,...</h4> <p>El campo bajo validación debe estar presente y no vacío a menos que el campo <em>anotherfield</em> sea igual a cualquier <em>valor</em>.</p> <p><a name="rule-required-with"></a></p> <h4 id="required-with-foo-bar"><a href="#required-with-foo-bar" aria-hidden="true" class="header-anchor">#</a> required_with:<em>foo</em>,<em>bar</em>,...</h4> <p>El campo bajo validación debe estar presente y no vacío <em>solamente si</em> cualquiera de los otros campos especificados están presentes.</p> <p><a name="rule-required-with-all"></a></p> <h4 id="required-with-all-foo-bar"><a href="#required-with-all-foo-bar" aria-hidden="true" class="header-anchor">#</a> required_with_all:<em>foo</em>,<em>bar</em>,...</h4> <p>El campo bajo validación debe estar presente y no vacío <em>solamente si</em> todos los otros campos especificados están presentes.</p> <p><a name="rule-required-without"></a></p> <h4 id="required-without-foo-bar"><a href="#required-without-foo-bar" aria-hidden="true" class="header-anchor">#</a> required_without:<em>foo</em>,<em>bar</em>,...</h4> <p>El campo bajo validación debe estar presente y no vacío <em>solamente cuando</em> cualquiera de los otros campos especificados no están presentes.</p> <p><a name="rule-required-without-all"></a></p> <h4 id="required-without-all-foo-bar"><a href="#required-without-all-foo-bar" aria-hidden="true" class="header-anchor">#</a> required_without_all:<em>foo</em>,<em>bar</em>,...</h4> <p>El campo bajo validación debe estar presente y no vacío <em>solamente cuando</em> todos los demás campos especificados no están presentes.</p> <p><a name="rule-same"></a></p> <h4 id="same-field"><a href="#same-field" aria-hidden="true" class="header-anchor">#</a> same:<em>field</em></h4> <p>El campo <em>field</em> dado debe coincidir con el campo bajo validación.</p> <p><a name="rule-size"></a></p> <h4 id="size-value"><a href="#size-value" aria-hidden="true" class="header-anchor">#</a> size:<em>value</em></h4> <p>El campo bajo validación debe tener un tamaño que coincida con el <em>valor</em> dado. Para datos de cadena, el <em>valor</em> corresponde al número de caracteres. Para datos numéricos, el <em>valor</em> corresponde a un valor entero dado. Para un arreglo, el valor <em>size</em> corresponde con el número de elementos del arreglo. Para archivos, el valor de <em>size</em> corresponde al tamaño del archivo en kilobytes.</p> <p><a name="rule-starts-with"></a></p> <h4 id="starts-with-foo-bar"><a href="#starts-with-foo-bar" aria-hidden="true" class="header-anchor">#</a> starts_with:<em>foo</em>,<em>bar</em>,...</h4> <p>El campo bajo validación debe comenzar con uno de los valores dados.</p> <p><a name="rule-string"></a></p> <h4 id="string"><a href="#string" aria-hidden="true" class="header-anchor">#</a> string</h4> <p>El campo bajo validación debe ser una cadena. Si prefieres permitir que el campo también sea <code>null</code>, deberías asignar la regla <code>nullable</code> al campo.</p> <p><a name="rule-timezone"></a></p> <h4 id="timezone"><a href="#timezone" aria-hidden="true" class="header-anchor">#</a> timezone</h4> <p>El campo bajo validación debe ser un identificador de zona horaria válida de acuerdo con la función de PHP <code>timezone_identifiers_list</code></p> <p><a name="rule-unique"></a></p> <h4 id="unique-table-column-except-idcolumn"><a href="#unique-table-column-except-idcolumn" aria-hidden="true" class="header-anchor">#</a> unique:<em>table</em>,<em>column</em>,<em>except</em>,<em>idColumn</em></h4> <p>El campo bajo validación debe ser único en una tabla de base de datos dada. Si la opción <code>column</code> no es especificada, el nombre del campo será usado.</p> <p><strong>Especificando Un Nombre de Columna Personalizado:</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'unique:users,email_address'</span>
</code></pre></div><p><strong>Conexión de Base de Datos Personalizada</strong></p> <p>Ocasionalmente, puedes necesitar establecer una conexión personalizada para las consultas de bases de datos hechas por el validador. Como has visto anteriormente, al establecer <code>unique:users</code> como una regla de validación usará la conexión de base de datos predeterminada en la consulta de base de datos. Para sobrescribir esto, especifica la conexión y el nombre de la tabla usando la sintaxis de &quot;punto&quot;:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'unique:connection.users,email_address'</span>
</code></pre></div><p><strong>Forzando una Regla Unique para Ignorar un ID Dado:</strong></p> <p>Algunas veces, puedes desear ignorar un ID dado durante la verificación de unicidad. Por ejemplo, considera una pantalla &quot;update profile&quot; que incluya el nombre del usuario, dirección de correo electrónico, y ubicación. Posiblemente, querrás verificar que la dirección de correo electrónico es única. Sin embargo, si el usuario solamente cambia el campo nombre y no el campo con el correo electrónico, no quieres que un error de validación sea lanzado porque el usuario ya es el propietario de la dirección de correo electrónico.</p> <p>Para instruir al validador para que ignore el ID del usuario, usaremos la clase <code>Rule</code> para definir fluidamente la regla. En este ejemplo, también especificaremos las reglas de validación como un arreglo en lugar de usar el carácter <code>|</code> para delimitar las reglas:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Validation<span class="token punctuation">\</span>Rule</span><span class="token punctuation">;</span>

Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'required'</span><span class="token punctuation">,</span>
        Rule<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">ignore</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">id</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="danger custom-block"><p class="custom-block-title">Nota</p> <p>Nunca debes pasar ningún input de la solicitud controlado por cualquier usuario en el método <code>ignore</code>. En su lugar, sólo debes pasar un ID único generado por el sistema, como un ID autoincremental o UUID de una instancia de modelo Eloquent. De lo contrario, tu aplicación será vulnerable a un ataque de inyección SQL.</p></div> <p>En lugar de pasar el valor de la clave del modelo al método <code>ignore</code>, puedes pasar la instancia completa del modelo. Laravel automáticamente extraerá la clave del modelo:</p> <div class="language-php extra-class"><pre class="language-php"><code>Rule<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">ignore</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token punctuation">)</span>
</code></pre></div><p>Si tu tabla usa un nombre de columna de clave primaria en vez de <code>id</code>, puedes especificar el nombre de la columna al momento de llamar al método <code>ignore</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>Rule<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">ignore</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">id</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'user_id'</span><span class="token punctuation">)</span>
</code></pre></div><p>Por defecto, la regla <code>única</code> verificará la unicidad de la columna que coincide con el nombre del atributo que se valida. Sin embargo, puede pasar un nombre de columna diferente como segundo argumento al método <code>unique</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>Rule<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'email_address'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">ignore</span><span class="token punctuation">(</span><span class="token variable">$user</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">id</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><p><strong>Agregando Cláusulas Where Adicionales:</strong></p> <p>También puedes especificar restricciones de consultas al personalizar la consulta usando el método <code>where</code>. Por ejemplo, agreguemos una restricción que verifique que el <code>account_id</code> es <code>1</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> Rule<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$query</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$query</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">where</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'account_id'</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><a name="rule-url"></a></p> <h4 id="url"><a href="#url" aria-hidden="true" class="header-anchor">#</a> url</h4> <p>El campo bajo validación debe ser una URL válida.</p> <p><a name="rule-uuid"></a></p> <h4 id="uuid"><a href="#uuid" aria-hidden="true" class="header-anchor">#</a> uuid</h4> <p>El campo bajo validación debe ser un identificador único universal (UUID) RFC 4122 (versión 1, 3, 4 o 5) válido.</p> <p><a name="conditionally-adding-rules"></a></p> <h2 id="agregando-reglas-condicionalmente"><a href="#agregando-reglas-condicionalmente" aria-hidden="true" class="header-anchor">#</a> Agregando Reglas Condicionalmente</h2> <h4 id="validando-solo-cuando-un-campo-este-presente"><a href="#validando-solo-cuando-un-campo-este-presente" aria-hidden="true" class="header-anchor">#</a> Validando sólo cuando un Campo esté Presente</h4> <p>En algunas situaciones, puedes desear ejecutar la verificación contra un campo <strong>solamente</strong> si ese campo está presente en el arreglo de campos. Para conseguir esto rápidamente, agrega la regla <code>sometimes</code> en tu lista:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$v</span> <span class="token operator">=</span> Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'sometimes|required|email'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>En el ejemplo anterior, el campo <code>email</code> solamente será validado si está presente en el arreglo <code>$data</code>.</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Si estás intentando validar un campo que siempre deba estar presente pero puede estar vacío, revisa <a href="#a-note-on-optional-fields">esta nota sobre campos opcionales</a></p></div> <h4 id="validacion-condicional-compleja"><a href="#validacion-condicional-compleja" aria-hidden="true" class="header-anchor">#</a> Validación Condicional Compleja</h4> <p>Algunas veces puedes desear agregar reglas de validación basadas en lógica condicional más compleja. Por ejemplo, puedes desear solicitar un campo dado solamente si otro campo tiene un valor mayor que 100. O, puedes necesitar que dos campos tengan un valor dado solamente cuando otro campo esté presente. Agregar estas reglas de validación no tiene que ser un dolor. Primero, crea una instancia <code>Validator</code> con tus <em>reglas estáticas</em> que nunca cambian:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$v</span> <span class="token operator">=</span> Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required|email'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'games'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required|numeric'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Asumamos que nuestra aplicación web es sobre coleccionistas de juegos. Si un coleccionista de juego se registra con nuestra aplicación y posee más de 100 juegos, queremos que explique porqué posee tantos juegos. Por ejemplo, quizá administre una tienda de reventa de juegos, o puede ser que solo disfrute coleccionar. Para agregar este requerimiento condicionalmente, podemos usar el método <code>sometimes</code> en la instancia <code>Validator</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$v</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">sometimes</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'reason'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'required|max:500'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$input</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">games</span> <span class="token operator">&gt;=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>El primer argumento pasado al método <code>sometimes</code> es el nombre del campo que estamos validando condicionalmente. El segundo argumento son las reglas que queremos agregar. Si la <code>Closure</code> pasada como tercer argumento devuelve <code>true</code>, las reglas serán agregadas. Este método hace que sea muy fácil construir validaciones condicionales complejas Incluso puedes agregar validaciones condicionales para varios campos de una sola vez:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$v</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">sometimes</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'reason'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'cost'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'required'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$input</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">games</span> <span class="token operator">&gt;=</span> <span class="token number">100</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>El parámetro <code>$input</code> pasado a tu <code>Closure</code> será una instancia de <code>Illuminate\Support\Fluent</code> y puede ser usado para acceder a tus campos y archivos.</p></div> <p><a name="validating-arrays"></a></p> <h2 id="validando-arreglos"><a href="#validando-arreglos" aria-hidden="true" class="header-anchor">#</a> Validando Arreglos</h2> <p>Validar arreglos basados en campos de entrada de formulario no tiene que ser un dolor. Puedes usar &quot;notación punto&quot; para validar atributos dentro de un arreglo. Por ejemplo, si la solicitud entrante contiene un campo <code>photos[profile]</code>, puedes validarlo como sigue:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$validator</span> <span class="token operator">=</span> Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'photos.profile'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required|image'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>También puedes validar cada elemento de un arreglo. Por ejemplo, para validar que cada dirección electrónica en un campo de entrada de arreglo sea único, puedes hacer lo siguiente:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$validator</span> <span class="token operator">=</span> Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'person.*.email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'email|unique:users'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'person.*.first_name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'required_with:person.*.last_name'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>De igual forma, puedes usar el carácter <code>*</code> al momento de especificar tus mensajes de validación en tus archivos de idiomas, haciendo que sea muy fácil usar un único mensaje de validación para campos basados en arreglos:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'custom'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'person.*.email'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'unique'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Each person must have a unique e-mail address'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p><a name="custom-validation-rules"></a></p> <h2 id="reglas-de-validacion-personalizadas"><a href="#reglas-de-validacion-personalizadas" aria-hidden="true" class="header-anchor">#</a> Reglas de Validación Personalizadas</h2> <p><a name="using-rule-objects"></a></p> <h3 id="usando-objetos-de-reglas"><a href="#usando-objetos-de-reglas" aria-hidden="true" class="header-anchor">#</a> Usando Objetos de Reglas</h3> <p>Laravel proporciona una variedad de reglas de validación útiles; sin embargo, puedes desear especificar algunas propias. Un método para registrar reglas de validación personalizadas es usar objetos de regla. Para generar un nuevo objeto de regla, puedes usar el comando Artisan <code>make:rule</code>. Usemos este comando para generar una regla que verifique que una cadena esté en mayúscula. Laravel colocará la nueva regla en el directorio <code>app/Rules</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan make<span class="token punctuation">:</span>rule Uppercase
</code></pre></div><p>Una vez que la regla haya sido creada, estaremos listos para definir su comportamiento. Un objeto de regla contiene dos métodos: <code>passes</code> and <code>message</code>. El método <code>passes</code> recibe el nombre y valor de atributo, y debería devolver <code>true</code> o <code>false</code> dependiendo de si el valor de atributo es válido o no. El método <code>message</code> debería devolver el mensaje de error de validación que debería ser usado cuando la validación falle:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Rules</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Contracts<span class="token punctuation">\</span>Validation<span class="token punctuation">\</span>Rule</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">Uppercase</span> <span class="token keyword">implements</span> <span class="token class-name">Rule</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Determine if the validation rule passes.
    *
    * @param  string  $attribute
    * @param  mixed  $value
    * @return bool
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">passes</span><span class="token punctuation">(</span><span class="token variable">$attribute</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token variable">$value</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token variable">$value</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
    * Get the validation error message.
    *
    * @return string
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token single-quoted-string string">'The :attribute must be uppercase.'</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Por supuesto, puedes ejecutar el helper <code>trans</code> de tu método <code>message</code> si prefieres devolver un mensaje de error de tus archivos de traducción:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Get the validation error message.
*
* @return string
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">message</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">trans</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'validation.uppercase'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Una vez que la regla haya sido definida, puedes adjuntarla a un validador al pasar una instancia del objeto de regla con tus otras reglas de validación:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Rules<span class="token punctuation">\</span>Uppercase</span><span class="token punctuation">;</span>

<span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'required'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'string'</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">Uppercase</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="using-closures"></a></p> <h3 id="usando-closures"><a href="#usando-closures" aria-hidden="true" class="header-anchor">#</a> Usando Closures</h3> <p>Si solo necesitas la funcionalidad de una regla personalizada una vez a lo largo de tu aplicación, puedes usar un Closure en lugar de un objeto de regla. El Closure recibe el nombre del atributo, el valor del atributo y una retorno de llamada (callback) <code>$fail</code> que se debe llamar si falla la validación:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$validator</span> <span class="token operator">=</span> Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'title'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'required'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'max:255'</span><span class="token punctuation">,</span>
        <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$attribute</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token variable">$fail</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$value</span> <span class="token operator">===</span> <span class="token single-quoted-string string">'foo'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token variable">$fail</span><span class="token punctuation">(</span><span class="token variable">$attribute</span><span class="token punctuation">.</span><span class="token single-quoted-string string">' is invalid.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="using-extensions"></a></p> <h3 id="usando-extensiones"><a href="#usando-extensiones" aria-hidden="true" class="header-anchor">#</a> Usando Extensiones</h3> <p>Otro método para registrar reglas de validación personalizadas es usar el método <code>extend</code> en la clase <a href="/docs/%7B%7Bversion%7D%7D/facades">facade</a> <code>Validator</code>. Usemos este método dentro de un <a href="/docs/%7B%7Bversion%7D%7D/providers">proveedor de servicio</a> para registrar una regla de validación personalizada:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Providers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>ServiceProvider</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Validator</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">AppServiceProvider</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceProvider</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Bootstrap any application services.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$attribute</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token variable">$parameters</span><span class="token punctuation">,</span> <span class="token variable">$validator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token variable">$value</span> <span class="token operator">==</span> <span class="token single-quoted-string string">'foo'</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
    * Register the service provider.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>La Closure del validador personalizada recibe cuatro argumentos: el nombre del atributo <code>$attribute</code> que está siendo validado, el valor <code>$value</code> del atributo, un arreglo de <code>$parameters</code> pasado a la regla, y la instancia <code>Validator</code>.</p> <p>También puedes pasar una clase y método al método <code>extend</code> en vez de una Closure:</p> <div class="language-php extra-class"><pre class="language-php"><code>Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'FooValidator@validate'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="definiendo-el-mensaje-de-error"><a href="#definiendo-el-mensaje-de-error" aria-hidden="true" class="header-anchor">#</a> Definiendo el Mensaje de Error</h4> <p>También necesitarás definir un mensaje de error para tu regla personalizada. Puedes hacer eso o usando un arreglo de mensajes personalizados en línea o agregando una entrada en el archivo de idioma de validación. Este mensaje debería ser colocado en el primer nivel del arreglo, no dentro del arreglo <code>custom</code>, el cual es solamente para mensajes de error específico de atributos:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token double-quoted-string string">&quot;foo&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">&quot;Your input was invalid!&quot;</span><span class="token punctuation">,</span>

<span class="token double-quoted-string string">&quot;accepted&quot;</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token double-quoted-string string">&quot;The :attribute must be accepted.&quot;</span><span class="token punctuation">,</span>

<span class="token comment">// The rest of the validation error messages...</span>
</code></pre></div><p>Al momento de crear una regla de validación personalizada, algunas veces puedes necesitar definir reemplazos de marcadores personalizados para los mensajes de error. Puedes hacer eso creando un Validador personalizado cómo se describió anteriormente, entonces hacer una ejecución del método <code>replacer</code> en la clase facade <code>Validator</code>. Puedes hacer esto dentro del método <code>boot</code> de un <a href="/docs/%7B%7Bversion%7D%7D/providers">proveedor de servicio</a>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Bootstrap any application services.
*
* @return void
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">replacer</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">,</span> <span class="token variable">$attribute</span><span class="token punctuation">,</span> <span class="token variable">$rule</span><span class="token punctuation">,</span> <span class="token variable">$parameters</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="extensiones-implicitas"><a href="#extensiones-implicitas" aria-hidden="true" class="header-anchor">#</a> Extensiones Implícitas</h4> <p>De forma predeterminada, cuando un atributo que está siendo validado no está presente o contiene un valor vacío como es definido por la regla <a href="#rule-required"><code>required</code></a>, las reglas de validación normal, incluyendo las extensiones personalizadas, no son ejecutadas. Por ejemplo, la regla <a href="#rule-unique"><code>unique</code></a> no será ejecutada contra un valor <code>null</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$rules</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'unique:users,name'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token variable">$input</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">''</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">make</span><span class="token punctuation">(</span><span class="token variable">$input</span><span class="token punctuation">,</span> <span class="token variable">$rules</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">passes</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// true</span>
</code></pre></div><p>Para que una regla se ejecute incluso cuando un atributo esté vacío, la regla debe implicar que el atributo sea obligatorio. Para crear tal extensión &quot;implícita&quot;, usa el método <code>Validator::extendImplicit()</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>Validator<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">extendImplicit</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$attribute</span><span class="token punctuation">,</span> <span class="token variable">$value</span><span class="token punctuation">,</span> <span class="token variable">$parameters</span><span class="token punctuation">,</span> <span class="token variable">$validator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$value</span> <span class="token operator">==</span> <span class="token single-quoted-string string">'foo'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="danger custom-block"><p class="custom-block-title">Nota</p> <p>Una extensión &quot;implícita&quot; solamente <em>implica</em> que el atributo es obligatorio. Si esto realmente invalida un atributo vacío o faltante depende de ti.</p></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/session.html" class="prev">
          Sesión HTTP
        </a></span> <span class="next"><a href="/errors.html">
          Manejo de Errores
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.670d7e7c.js" defer></script><script src="/assets/js/8.23b9f04b.js" defer></script>
  </body>
</html>
