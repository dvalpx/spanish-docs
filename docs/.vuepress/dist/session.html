<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Sesión HTTP | Documentación de Laravel en Español</title>
    <meta name="description" content="Documentación de Laravel en Español">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:300,700|Miriam+Libre">
    
    <link rel="preload" href="/assets/css/0.styles.0cc2d3c3.css" as="style"><link rel="preload" href="/assets/js/app.bf22240a.js" as="script"><link rel="preload" href="/assets/js/71.1f786e34.js" as="script"><link rel="prefetch" href="/assets/js/10.8a8a99df.js"><link rel="prefetch" href="/assets/js/11.ec476e2f.js"><link rel="prefetch" href="/assets/js/12.6db1eb13.js"><link rel="prefetch" href="/assets/js/13.92d78bb5.js"><link rel="prefetch" href="/assets/js/14.1a0ad5f1.js"><link rel="prefetch" href="/assets/js/15.abc982c9.js"><link rel="prefetch" href="/assets/js/16.7cf1a759.js"><link rel="prefetch" href="/assets/js/17.4abfc664.js"><link rel="prefetch" href="/assets/js/18.85b19837.js"><link rel="prefetch" href="/assets/js/19.8c9dfcd5.js"><link rel="prefetch" href="/assets/js/2.dcb6cf45.js"><link rel="prefetch" href="/assets/js/20.c1b9de54.js"><link rel="prefetch" href="/assets/js/21.469ffab3.js"><link rel="prefetch" href="/assets/js/22.2d14e150.js"><link rel="prefetch" href="/assets/js/23.7a4dcc9a.js"><link rel="prefetch" href="/assets/js/24.534e59f1.js"><link rel="prefetch" href="/assets/js/25.eaac1c07.js"><link rel="prefetch" href="/assets/js/26.8e9180e0.js"><link rel="prefetch" href="/assets/js/27.2cd2ace8.js"><link rel="prefetch" href="/assets/js/28.9f7dcf6d.js"><link rel="prefetch" href="/assets/js/29.06a87f0d.js"><link rel="prefetch" href="/assets/js/3.b62bf0b4.js"><link rel="prefetch" href="/assets/js/30.b03f86ec.js"><link rel="prefetch" href="/assets/js/31.edce81f6.js"><link rel="prefetch" href="/assets/js/32.6657300b.js"><link rel="prefetch" href="/assets/js/33.8dc49209.js"><link rel="prefetch" href="/assets/js/34.03cbee56.js"><link rel="prefetch" href="/assets/js/35.5439db2e.js"><link rel="prefetch" href="/assets/js/36.83d5a264.js"><link rel="prefetch" href="/assets/js/37.4066824e.js"><link rel="prefetch" href="/assets/js/38.c3fe05aa.js"><link rel="prefetch" href="/assets/js/39.52ef8667.js"><link rel="prefetch" href="/assets/js/4.bd0ebba2.js"><link rel="prefetch" href="/assets/js/40.2c54d702.js"><link rel="prefetch" href="/assets/js/41.775bc6e1.js"><link rel="prefetch" href="/assets/js/42.6541d60b.js"><link rel="prefetch" href="/assets/js/43.20091aea.js"><link rel="prefetch" href="/assets/js/44.75b71ccc.js"><link rel="prefetch" href="/assets/js/45.6b36a3a8.js"><link rel="prefetch" href="/assets/js/46.6ea236af.js"><link rel="prefetch" href="/assets/js/47.0e0ee374.js"><link rel="prefetch" href="/assets/js/48.b6beb9b8.js"><link rel="prefetch" href="/assets/js/49.ae33b521.js"><link rel="prefetch" href="/assets/js/5.2c350d8b.js"><link rel="prefetch" href="/assets/js/50.5cb081e0.js"><link rel="prefetch" href="/assets/js/51.3e0281e2.js"><link rel="prefetch" href="/assets/js/52.e1fae1d6.js"><link rel="prefetch" href="/assets/js/53.0a9d4aed.js"><link rel="prefetch" href="/assets/js/54.55bc9113.js"><link rel="prefetch" href="/assets/js/55.e964fdb4.js"><link rel="prefetch" href="/assets/js/56.3abed8a0.js"><link rel="prefetch" href="/assets/js/57.df09269b.js"><link rel="prefetch" href="/assets/js/58.3ce37458.js"><link rel="prefetch" href="/assets/js/59.7a840aeb.js"><link rel="prefetch" href="/assets/js/6.6fce793d.js"><link rel="prefetch" href="/assets/js/60.b4fe788b.js"><link rel="prefetch" href="/assets/js/61.e45356bb.js"><link rel="prefetch" href="/assets/js/62.0d75cf78.js"><link rel="prefetch" href="/assets/js/63.0ecae205.js"><link rel="prefetch" href="/assets/js/64.90fb2c2d.js"><link rel="prefetch" href="/assets/js/65.7c476002.js"><link rel="prefetch" href="/assets/js/66.802dee8b.js"><link rel="prefetch" href="/assets/js/67.ae965c66.js"><link rel="prefetch" href="/assets/js/68.220c04d8.js"><link rel="prefetch" href="/assets/js/69.bf607b92.js"><link rel="prefetch" href="/assets/js/7.b956f78c.js"><link rel="prefetch" href="/assets/js/70.dea3d878.js"><link rel="prefetch" href="/assets/js/72.4bd65b39.js"><link rel="prefetch" href="/assets/js/73.414b29bd.js"><link rel="prefetch" href="/assets/js/74.b5ab4f13.js"><link rel="prefetch" href="/assets/js/75.f12fbb27.js"><link rel="prefetch" href="/assets/js/76.a140d22b.js"><link rel="prefetch" href="/assets/js/77.2595933c.js"><link rel="prefetch" href="/assets/js/78.46bb4eff.js"><link rel="prefetch" href="/assets/js/79.c549a0e3.js"><link rel="prefetch" href="/assets/js/8.3be12d8d.js"><link rel="prefetch" href="/assets/js/80.1b9cd731.js"><link rel="prefetch" href="/assets/js/81.6aa05825.js"><link rel="prefetch" href="/assets/js/9.60a01cba.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0cc2d3c3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Documentación de Laravel en Español</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Primeros Pasos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Conceptos De Arquitectura</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Fundamentos</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/routing.html" class="sidebar-link">Enrutamiento</a></li><li><a href="/middleware.html" class="sidebar-link">Middleware</a></li><li><a href="/csrf.html" class="sidebar-link">Protección CSRF</a></li><li><a href="/controllers.html" class="sidebar-link">Controladores</a></li><li><a href="/requests.html" class="sidebar-link">Solicitudes HTTP</a></li><li><a href="/responses.html" class="sidebar-link">Respuestas HTTP</a></li><li><a href="/views.html" class="sidebar-link">Vistas</a></li><li><a href="/urls.html" class="sidebar-link">Generación de URLs</a></li><li><a href="/session.html" class="active sidebar-link">Sesión HTTP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/session.html#introduccion" class="sidebar-link">Introducción</a></li><li class="sidebar-sub-header"><a href="/session.html#usando-la-sesion" class="sidebar-link">Usando la Sesión</a></li><li class="sidebar-sub-header"><a href="/session.html#agregando-manejadores-de-sesion-personalizados" class="sidebar-link">Agregando Manejadores de Sesión Personalizados</a></li></ul></li><li><a href="/validation.html" class="sidebar-link">Validación</a></li><li><a href="/errors.html" class="sidebar-link">Manejo de Errores</a></li><li><a href="/logging.html" class="sidebar-link">Registro (Logging)</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Frontend</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Seguridad</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Profundizando</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Bases De Datos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>ORM Eloquent</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Pruebas</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Paquetes oficiales</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><div><h1 id="sesion-http"><a class="header-anchor" href="#sesion-http" aria-hidden="true">#</a> Sesión HTTP</h1> <ul><li><a href="#introduction">Introducción</a> <ul><li><a href="#configuration">Configuración</a></li> <li><a href="#driver-prerequisites">Prerequisitos de Manejador</a></li></ul></li> <li><a href="#using-the-session">Usando la Sesión</a> <ul><li><a href="#retrieving-data">Obteniendo Datos</a></li> <li><a href="#storing-data">Almacenando Datos</a></li> <li><a href="#flash-data">Datos Instantáneos</a></li> <li><a href="#deleting-data">Eliminando Datos</a></li> <li><a href="#regenerating-the-session-id">Regenerando el ID de la Sesión</a></li></ul></li> <li><a href="#adding-custom-session-drivers">Agregando Manejadores de Sesión Personalizada</a> <ul><li><a href="#implementing-the-driver">Implementando el Manejador</a></li> <li><a href="#registering-the-driver">Registrando el Manejador</a></li></ul></li></ul> <p><a name="introduction"></a></p> <h2 id="introduccion"><a class="header-anchor" href="#introduccion" aria-hidden="true">#</a> Introducción</h2> <p>Ya que las aplicaciones manejadas por HTTP son sin estado, las sesiones proporcionan una forma de almacenar información sobre el usuario a través de múltiples solicitudes. Laravel viene con una variedad de backends de sesión que son accedidos a través de una expresiva API unificada. El soporte para los backends populares tales como <a href="https://memcached.org" target="_blank" rel="noopener noreferrer">Memcached<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, <a href="https://redis.io" target="_blank" rel="noopener noreferrer">Redis<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> y bases de datos es incluido de forma predeterminada.</p> <p><a name="configuration"></a></p> <h3 id="configuracion"><a class="header-anchor" href="#configuracion" aria-hidden="true">#</a> Configuración</h3> <p>El archivo de configuración de sesión es almacenado en <code>config/session.php</code>. Asegurate de revisar las opciones disponibles para ti en este archivo. De forma predeterminada, Laravel es configurado para usar el manejador de sesión <code>file</code>, el cual trabajará bién para muchas aplicaciones. En aplicaciones de producción, puedes considerar usar los manejadores <code>memcached</code> o <code>redis</code> para incluso alcanzar un desempeño de sesión más rápido.</p> <p>La opción de configuración <code>driver</code> de la sesión define donde los datos de la sesión serán almacenados para cada solicitud. Laravel viene con varios excelentes manejadores de forma predeterminada.</p> <ul><li><code>file</code> - las sesiones son almacenadas en <code>storage/framework/sessions</code>.</li> <li><code>cookie</code> - las sesiones son almacenadas en cookies encriptados seguros.</li> <li><code>database</code> - las sesiones son almacenadas en una base de datos relacional.</li> <li><code>memcached</code> / <code>redis</code> - las sesiones son almacenadas en rápidos almacenes basados en cache.</li> <li><code>array</code> - las sesiones son almacenadas en un arreglo de PHP y no serán guardadas de forma permanente.</li></ul> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>El driver array es usado durante <a href="/docs/%7B%7Bversion%7D%7D/testing">las pruebas</a> y previene que los datos almacenados en la sesión sean guardados de forma permanente.</p></div></div> <p><a name="driver-prerequisites"></a></p> <h3 id="prerequisitos-del-driver"><a href="#prerequisitos-del-driver" aria-hidden="true" class="header-anchor">#</a> Prerequisitos del Driver</h3> <h4 id="base-de-datos"><a href="#base-de-datos" aria-hidden="true" class="header-anchor">#</a> Base de Datos</h4> <p>Al momento de usar el driver de sesión <code>database</code>, necesitarás crear una tabla para contener los elementos de la sesión. A continuación se muestra una declaración de <code>Schema</code> de ejemplo para la tabla:</p> <div class="language-php extra-class"><pre class="language-php"><code>Schema<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sessions'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$table</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'id'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">unique</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">unsignedInteger</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user_id'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">string</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'ip_address'</span><span class="token punctuation">,</span> <span class="token number">45</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user_agent'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">nullable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'payload'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$table</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">integer</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'last_activity'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Puedes usar el comando Artisan <code>session:table</code> para generar esta migración:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan session<span class="token punctuation">:</span>table

php artisan migrate
</code></pre></div><h4 id="redis"><a href="#redis" aria-hidden="true" class="header-anchor">#</a> Redis</h4> <p>Antes de usar sesiones Redis con Laravel, necesitarás instalar el paquete <code>predis/predis</code> (~1.0) por medio de Composer. Puedes configurar tus conexiones Redis en el archivo de configuración <code>database</code>. En el archivo de configuración de <code>session</code>, la opción <code>connection</code> puede ser usada para especificar cuál conexión Redis es usada por la sesión.</p> <p><a name="using-the-session"></a></p> <h2 id="usando-la-sesion"><a href="#usando-la-sesion" aria-hidden="true" class="header-anchor">#</a> Usando la Sesión</h2> <p><a name="retrieving-data"></a></p> <h3 id="obteniendo-datos"><a href="#obteniendo-datos" aria-hidden="true" class="header-anchor">#</a> Obteniendo Datos</h3> <p>Hay dos formás principales de trabajar con datos de sesión en Laravel: el helper global <code>session</code> y por medio de una instancia <code>Request</code>. Primero, vamos a echar un vistazo al acceder a la sesión por medio de una instancia <code>Request</code>, la cual puede ser referenciada en un método de controlador. Recuerda, las dependencias de métodos de controlador son inyectadas automáticamente por medio del <a href="/docs/%7B%7Bversion%7D%7D/container">contenedor de servicio</a> de Laravel:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>Controller</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">UserController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Show the profile for the given user.
    *
    * @param  Request  $request
    * @param  int  $id
    * @return Response
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">show</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$id</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$value</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">//</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Cuando obtienes un elemento de la sesión, también puedes pasar un valor predeterminado como segundo argumento del método <code>get</code>. Este valor predeterminado será devuelto si la clave especificada no existe en la sesión. Si pasas una <code>Closure</code> como el valor predeterminado del método <code>get</code> y la clave solicitada no existe, la <code>Closure</code> será ejecutada y su resultado devuelto:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$value</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$value</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="helper-global-de-sesion"><a href="#helper-global-de-sesion" aria-hidden="true" class="header-anchor">#</a> Helper Global de Sesión</h4> <p>También puedes usar la función global de PHP <code>session</code> para obtener y almacenar datos en la sesión. Cuando el helper <code>session</code> es ejecutado con un solo argumento de cadena, devolverá el valor de esa clave de sesión. Cuando el helper es ejecutado con una arreglo de pares clave / valor, esos valores serán almacenados en la sesión:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'home'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// Retrieve a piece of data from the session...</span>
    <span class="token variable">$value</span> <span class="token operator">=</span> <span class="token function">session</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Specifying a default value...</span>
    <span class="token variable">$value</span> <span class="token operator">=</span> <span class="token function">session</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Store a piece of data in the session...</span>
    <span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Hay una pequeña diferencia práctica entre usar la sesión por medio de una instancia de solicitud HTTP contra usar el helper global <code>session</code>. Ambos métodos pueden ser <a href="/docs/%7B%7Bversion%7D%7D/testing">probados</a> por medio del método <code>assertSessionHas</code>, el cual está disponible en todos tus casos de prueba.</p></div> <h4 id="obteniendo-todos-los-datos-de-sesion"><a href="#obteniendo-todos-los-datos-de-sesion" aria-hidden="true" class="header-anchor">#</a> Obteniendo Todos los Datos de Sesión</h4> <p>Si prefieres obtener todos los datos en la sesión, puedes usar el método <code>all</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$data</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="determinando-si-un-elemento-existe-en-la-sesion"><a href="#determinando-si-un-elemento-existe-en-la-sesion" aria-hidden="true" class="header-anchor">#</a> Determinando si un Elemento Existe en la Sesión</h4> <p>Para determinar si un elemento está presente en la sesión, puedes usar el método <code>has</code>. El método <code>has</code> devuelve <code>true</code> si el valor está presente y no es <code>null</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Para determinar si un elemento está presente en la sesión, incluso si su valor es <code>null</code>, puedes usar el método <code>exists</code>. El método <code>exists</code> devuelve <code>true</code> si el valor está presente:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'users'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="storing-data"></a></p> <h3 id="almacenando-datos"><a href="#almacenando-datos" aria-hidden="true" class="header-anchor">#</a> Almacenando Datos</h3> <p>Para almacenar datos en la sesión, típicamente usarás el método <code>put</code> o el helper <code>session</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Via a request instance...</span>
<span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">put</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Via the global helper...</span>
<span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'value'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="agregar-a-valores-del-arreglo-de-sesion"><a href="#agregar-a-valores-del-arreglo-de-sesion" aria-hidden="true" class="header-anchor">#</a> Agregar a Valores del Arreglo de Sesión</h4> <p>El método <code>push</code> puede ser usado para agregar un nuevo valor a un valor de sesión que está en un arreglo. Por ejemplo, si la clave <code>user.teams</code> contiene un arreglo de nombres de equipo, puedes agregar un nuevo valor al arreglo de la siguiente forma:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'user.teams'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'developers'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="obteniendo-eliminando-un-elemento"><a href="#obteniendo-eliminando-un-elemento" aria-hidden="true" class="header-anchor">#</a> Obteniendo &amp; Eliminando un Elemento</h4> <p>El método <code>pull</code> obtendrá y eliminará un elemento de la sesión en una sola instrucción:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$value</span> <span class="token operator">=</span> <span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">pull</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'default'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="flash-data"></a></p> <h3 id="datos-instantaneos"><a href="#datos-instantaneos" aria-hidden="true" class="header-anchor">#</a> Datos Instantáneos</h3> <p>Algunas veces puedes querer almacenar varios elementos en la sesión para la próxima solicitud. Puedes hacer eso usando el método <code>flash</code>. Los datos almacenados en la sesión usando este método solamente estarán disponibles durante la subsecuente solicitud HTTP, y luego serán eliminados. Los datos instantáneos son principalmente útiles para mensajes de estado con vida corta:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">flash</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'status'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'Task was successful!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Si necesitas mantener tus datos instantáneos alrededor para varias solicitudes, puedes usar el método <code>reflash</code>, el cuál mantendrá todos los datos instantáneos para una solicitud adicional. Si solamente necesitas mantener datos instantáneos específicos, puedes usar el método <code>keep</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">reflash</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">keep</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'username'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="deleting-data"></a></p> <h3 id="eliminando-datos"><a href="#eliminando-datos" aria-hidden="true" class="header-anchor">#</a> Eliminando Datos</h3> <p>El método <code>forget</code> removerá una porción de datos de la sesión. Si prefieres remover todos los datos de la sesión, puedes usar el método <code>flush</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// Forget a single key...</span>
<span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">forget</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'key'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Forget multiple keys...</span>
<span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">forget</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token single-quoted-string string">'key1'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'key2'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="regenerating-the-session-id"></a></p> <h3 id="regenerando-el-id-de-la-sesion"><a href="#regenerando-el-id-de-la-sesion" aria-hidden="true" class="header-anchor">#</a> Regenerando el ID de la Sesión</h3> <p>Regenerar el ID de la sesión es hecho frecuentemente con el propósito de prevenir que usuarios maliciosos exploten un ataque de <a href="https://en.wikipedia.org/wiki/Session_fixation" target="_blank" rel="noopener noreferrer">fijación de sesión<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> en tu aplicación.</p> <p>Laravel regenera automáticamente el ID de la sesión durante la autenticación si estás usando el <code>LoginController</code> integrado; sin embargo, si necesitas regenerar manualmente el ID de la sesión, puedes usar el método <code>regenerate</code>.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">session</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">regenerate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="adding-custom-session-drivers"></a></p> <h2 id="agregando-manejadores-de-sesion-personalizados"><a href="#agregando-manejadores-de-sesion-personalizados" aria-hidden="true" class="header-anchor">#</a> Agregando Manejadores de Sesión Personalizados</h2> <p><a name="implementing-the-driver"></a></p> <h4 id="implementando-el-manejador"><a href="#implementando-el-manejador" aria-hidden="true" class="header-anchor">#</a> Implementando el Manejador</h4> <p>Tu manejador de sesión personalizado debería implementar la interface <code>SessionHandlerInterface</code>. Esta interface contiene justo unos cuantos métodos que necesitamos implementar. Una implementación MongoDB truncada luce de forma similar a lo siguiente:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Extensions</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">MongoSessionHandler</span> <span class="token keyword">implements</span> <span class="token class-name"><span class="token punctuation">\</span>SessionHandlerInterface</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">open</span><span class="token punctuation">(</span><span class="token variable">$savePath</span><span class="token punctuation">,</span> <span class="token variable">$sessionName</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">read</span><span class="token punctuation">(</span><span class="token variable">$sessionId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">write</span><span class="token punctuation">(</span><span class="token variable">$sessionId</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">destroy</span><span class="token punctuation">(</span><span class="token variable">$sessionId</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">gc</span><span class="token punctuation">(</span><span class="token variable">$lifetime</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Laravel no viene con un directorio para contener tus extensiones. Eres libre de colocarlos en cualquier parte que quieras. En este ejemplo, hemos creado un directorio <code>Extensions</code> para alojar el manejador <code>MongoSessionHandler</code>.</p></div> <p>Ya que el propósito de estos métodos no es entendible rápidamente y sin dificultad, vamos a cubrir rápidamente lo que cada uno de estos métodos hace:</p> <ul><li>El método <code>open</code> típicamente sería usado en sistemas de almacenamiento de sesión basada en archivo. Ya que Laravel viene con un manejador de sesión <code>file</code>, casi nunca necesitarás poner cualquier cosa en este método. Puedes dejarlo como un stub vacío. Es una característica de diseño de interface pobre (lo que discutiremos más tarde) que PHP nos oblige a implementar este método.</li> <li>El método <code>close</code>, como el método <code>open</code>, también puede ser descartado. Para la mayoría de los drivers, no es necesario.</li> <li>El método <code>read</code> debería devolver la versión de cadena de la sesión de datos asociada con la <code>$sessionId</code> dada. No hay necesidad de hacer alguna serialización u otra codificación al momento de obtener o almacenar los datos de la sesión en tu manejador, ya que Laravel ejcutará la serialización por ti.</li> <li>El método <code>write</code> debería escribir la cadena <code>$data</code> asociada dada con la <code>$sessionId</code> para algún sistema de almacenamiento persistente, tal como MongoDB, Dynamo, etc. Otra vez, no deberías ejecutar alguna serialización - Laravel ya ha manejado esto por ti.</li> <li>El método <code>destroy</code> debería remover los datos asociados con la $sessionId` desde el almacenamiento persistente.</li> <li>El método <code>gc</code> debería destruir todos los datos de la sesión que son más viejos que el <code>$lifetime</code> dado, el cual es una marca de tiempo UNIX. Para los sistemas que se auto-expiran como Memcached y Redis, este método puede ser dejado vacío.</li></ul> <p><a name="registering-the-driver"></a></p> <h4 id="registrando-el-manejador"><a href="#registrando-el-manejador" aria-hidden="true" class="header-anchor">#</a> Registrando el Manejador</h4> <p>Una vez que tu manejador ha sido implementado, estás listo para registrarlo en el framework. Para agregar manejadores adicionales para el backend de sesión de Laravel, puedes usar el método <code>extend</code> del método en la <code>Session</code> <a href="/docs/%7B%7Bversion%7D%7D/facades">facade</a>. Deberías ejecutar el método <code>extend</code> desde el método <code>boot</code> de un <a href="/docs/%7B%7Bversion%7D%7D/providers">proveedor de servicio</a>. Puedes hacer esto desde el existente <code>AppServiceProvider</code> o crear un nuevo proveedor de servicios completo:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Providers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Extensions<span class="token punctuation">\</span>MongoSessionHandler</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Session</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>ServiceProvider</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">SessionServiceProvider</span> <span class="token keyword">extends</span> <span class="token class-name">ServiceProvider</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Perform post-registration booting of services.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">boot</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Session<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">extend</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'mongo'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$app</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// Return implementation of SessionHandlerInterface...</span>
            <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MongoSessionHandler</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
    * Register bindings in the container.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">register</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Una vez que el manejador de la sesión ha sido registrado, puedes usar el manejador <code>mongo</code> en tu archivo de configuración <code>config/session.php</code>.</p></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/urls.html" class="prev">
          Generación de URLs
        </a></span> <span class="next"><a href="/validation.html">
          Validación
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.bf22240a.js" defer></script><script src="/assets/js/71.1f786e34.js" defer></script>
  </body>
</html>
