<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Correos Electrónicos | Documentación de Laravel en Español</title>
    <meta name="description" content="Documentación de Laravel en Español">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Catamaran:300,700|Miriam+Libre">
    
    <link rel="preload" href="/assets/css/0.styles.0cc2d3c3.css" as="style"><link rel="preload" href="/assets/js/app.bf22240a.js" as="script"><link rel="preload" href="/assets/js/48.b6beb9b8.js" as="script"><link rel="prefetch" href="/assets/js/10.8a8a99df.js"><link rel="prefetch" href="/assets/js/11.ec476e2f.js"><link rel="prefetch" href="/assets/js/12.6db1eb13.js"><link rel="prefetch" href="/assets/js/13.92d78bb5.js"><link rel="prefetch" href="/assets/js/14.1a0ad5f1.js"><link rel="prefetch" href="/assets/js/15.abc982c9.js"><link rel="prefetch" href="/assets/js/16.7cf1a759.js"><link rel="prefetch" href="/assets/js/17.4abfc664.js"><link rel="prefetch" href="/assets/js/18.85b19837.js"><link rel="prefetch" href="/assets/js/19.8c9dfcd5.js"><link rel="prefetch" href="/assets/js/2.dcb6cf45.js"><link rel="prefetch" href="/assets/js/20.c1b9de54.js"><link rel="prefetch" href="/assets/js/21.469ffab3.js"><link rel="prefetch" href="/assets/js/22.2d14e150.js"><link rel="prefetch" href="/assets/js/23.7a4dcc9a.js"><link rel="prefetch" href="/assets/js/24.534e59f1.js"><link rel="prefetch" href="/assets/js/25.eaac1c07.js"><link rel="prefetch" href="/assets/js/26.8e9180e0.js"><link rel="prefetch" href="/assets/js/27.2cd2ace8.js"><link rel="prefetch" href="/assets/js/28.9f7dcf6d.js"><link rel="prefetch" href="/assets/js/29.06a87f0d.js"><link rel="prefetch" href="/assets/js/3.b62bf0b4.js"><link rel="prefetch" href="/assets/js/30.b03f86ec.js"><link rel="prefetch" href="/assets/js/31.edce81f6.js"><link rel="prefetch" href="/assets/js/32.6657300b.js"><link rel="prefetch" href="/assets/js/33.8dc49209.js"><link rel="prefetch" href="/assets/js/34.03cbee56.js"><link rel="prefetch" href="/assets/js/35.5439db2e.js"><link rel="prefetch" href="/assets/js/36.83d5a264.js"><link rel="prefetch" href="/assets/js/37.4066824e.js"><link rel="prefetch" href="/assets/js/38.c3fe05aa.js"><link rel="prefetch" href="/assets/js/39.52ef8667.js"><link rel="prefetch" href="/assets/js/4.bd0ebba2.js"><link rel="prefetch" href="/assets/js/40.2c54d702.js"><link rel="prefetch" href="/assets/js/41.775bc6e1.js"><link rel="prefetch" href="/assets/js/42.6541d60b.js"><link rel="prefetch" href="/assets/js/43.20091aea.js"><link rel="prefetch" href="/assets/js/44.75b71ccc.js"><link rel="prefetch" href="/assets/js/45.6b36a3a8.js"><link rel="prefetch" href="/assets/js/46.6ea236af.js"><link rel="prefetch" href="/assets/js/47.0e0ee374.js"><link rel="prefetch" href="/assets/js/49.ae33b521.js"><link rel="prefetch" href="/assets/js/5.2c350d8b.js"><link rel="prefetch" href="/assets/js/50.5cb081e0.js"><link rel="prefetch" href="/assets/js/51.3e0281e2.js"><link rel="prefetch" href="/assets/js/52.e1fae1d6.js"><link rel="prefetch" href="/assets/js/53.0a9d4aed.js"><link rel="prefetch" href="/assets/js/54.55bc9113.js"><link rel="prefetch" href="/assets/js/55.e964fdb4.js"><link rel="prefetch" href="/assets/js/56.3abed8a0.js"><link rel="prefetch" href="/assets/js/57.df09269b.js"><link rel="prefetch" href="/assets/js/58.3ce37458.js"><link rel="prefetch" href="/assets/js/59.7a840aeb.js"><link rel="prefetch" href="/assets/js/6.6fce793d.js"><link rel="prefetch" href="/assets/js/60.b4fe788b.js"><link rel="prefetch" href="/assets/js/61.e45356bb.js"><link rel="prefetch" href="/assets/js/62.0d75cf78.js"><link rel="prefetch" href="/assets/js/63.0ecae205.js"><link rel="prefetch" href="/assets/js/64.90fb2c2d.js"><link rel="prefetch" href="/assets/js/65.7c476002.js"><link rel="prefetch" href="/assets/js/66.802dee8b.js"><link rel="prefetch" href="/assets/js/67.ae965c66.js"><link rel="prefetch" href="/assets/js/68.220c04d8.js"><link rel="prefetch" href="/assets/js/69.bf607b92.js"><link rel="prefetch" href="/assets/js/7.b956f78c.js"><link rel="prefetch" href="/assets/js/70.dea3d878.js"><link rel="prefetch" href="/assets/js/71.1f786e34.js"><link rel="prefetch" href="/assets/js/72.4bd65b39.js"><link rel="prefetch" href="/assets/js/73.414b29bd.js"><link rel="prefetch" href="/assets/js/74.b5ab4f13.js"><link rel="prefetch" href="/assets/js/75.f12fbb27.js"><link rel="prefetch" href="/assets/js/76.a140d22b.js"><link rel="prefetch" href="/assets/js/77.2595933c.js"><link rel="prefetch" href="/assets/js/78.46bb4eff.js"><link rel="prefetch" href="/assets/js/79.c549a0e3.js"><link rel="prefetch" href="/assets/js/8.3be12d8d.js"><link rel="prefetch" href="/assets/js/80.1b9cd731.js"><link rel="prefetch" href="/assets/js/81.6aa05825.js"><link rel="prefetch" href="/assets/js/9.60a01cba.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0cc2d3c3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Documentación de Laravel en Español</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Inicio</a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first collapsable"><p class="sidebar-heading"><span>Primeros Pasos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Conceptos De Arquitectura</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Fundamentos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Frontend</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Seguridad</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading open"><span>Profundizando</span> <span class="arrow down"></span></p> <ul class="sidebar-group-items"><li><a href="/artisan.html" class="sidebar-link">Consola Artisan</a></li><li><a href="/broadcasting.html" class="sidebar-link">Broadcasting</a></li><li><a href="/cache.html" class="sidebar-link">Caché</a></li><li><a href="/collections.html" class="sidebar-link">Collecciones</a></li><li><a href="/events.html" class="sidebar-link">Eventos</a></li><li><a href="/filesystem.html" class="sidebar-link">Almacenamiento De Archivos</a></li><li><a href="/helpers.html" class="sidebar-link">Helpers</a></li><li><a href="/mail.html" class="active sidebar-link">Correos Electrónicos</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/mail.html#introduccion" class="sidebar-link">Introducción</a></li><li class="sidebar-sub-header"><a href="/mail.html#generando-mailables" class="sidebar-link">Generando Mailables</a></li><li class="sidebar-sub-header"><a href="/mail.html#escribiendo-mailables" class="sidebar-link">Escribiendo Mailables</a></li><li class="sidebar-sub-header"><a href="/mail.html#mailables-en-markdown" class="sidebar-link">Mailables en Markdown</a></li><li class="sidebar-sub-header"><a href="/mail.html#enviar-correo" class="sidebar-link">Enviar Correo</a></li><li class="sidebar-sub-header"><a href="/mail.html#renderizar-mailables" class="sidebar-link">Renderizar Mailables</a></li><li class="sidebar-sub-header"><a href="/mail.html#configuracion-regional-de-mailables" class="sidebar-link">Configuración Regional de Mailables</a></li><li class="sidebar-sub-header"><a href="/mail.html#correos-y-desarrollo-local" class="sidebar-link">Correos y Desarrollo Local</a></li><li class="sidebar-sub-header"><a href="/mail.html#eventos" class="sidebar-link">Eventos</a></li></ul></li><li><a href="/notifications.html" class="sidebar-link">Notificaciones</a></li><li><a href="/packages.html" class="sidebar-link">Desarrollo de Paquetes</a></li><li><a href="/queues.html" class="sidebar-link">Colas De Trabajo</a></li><li><a href="/scheduling.html" class="sidebar-link">Programación de tareas</a></li></ul></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Bases De Datos</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>ORM Eloquent</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Pruebas</span> <span class="arrow right"></span></p> <!----></div></li><li><div class="sidebar-group collapsable"><p class="sidebar-heading"><span>Paquetes oficiales</span> <span class="arrow right"></span></p> <!----></div></li></ul> </div> <div class="page"> <div class="content"><div><h1 id="correos-electronicos"><a class="header-anchor" href="#correos-electronicos" aria-hidden="true">#</a> Correos Electrónicos</h1> <ul><li><a href="#introduction">Introducción</a> <ul><li><a href="#driver-prerequisites">Requisitos Previos</a></li></ul></li> <li><a href="#generating-mailables">Generando Mailables</a></li> <li><a href="#writing-mailables">Escribiendo Mailables</a> <ul><li><a href="#configuring-the-sender">Configurando El Envío</a></li> <li><a href="#configuring-the-view">Configurando La Vista</a></li> <li><a href="#view-data">Datos En Vistas</a></li> <li><a href="#attachments">Archivos Adjuntos</a></li> <li><a href="#inline-attachments">Archivos Adjuntos En Línea</a></li> <li><a href="#customizing-the-swiftmailer-message">Personalizar El Mensaje De SwiftMailer</a></li></ul></li> <li><a href="#markdown-mailables">Mailables en Markdown</a> <ul><li><a href="#generating-markdown-mailables">Generando Mailables En Markdown</a></li> <li><a href="#writing-markdown-messages">Escribiendo Mensajes En Markdown</a></li> <li><a href="#customizing-the-components">Personalizando Los Componentes</a></li></ul></li> <li><a href="#sending-mail">Enviando Correo</a> <ul><li><a href="#queueing-mail">Colas De Correos</a></li></ul></li> <li><a href="#rendering-mailables">Renderizando Mailables</a> <ul><li><a href="#previewing-mailables-in-the-browser">Previsualizando Mailables En El Navegador</a></li></ul></li> <li><a href="#localizing-mailables">Configuración Regional de Mailables</a></li> <li><a href="#mail-and-local-development">Correos y Desarrollo Local</a></li> <li><a href="#events">Eventos</a></li></ul> <p><a name="introduction"></a></p> <h2 id="introduccion"><a class="header-anchor" href="#introduccion" aria-hidden="true">#</a> Introducción</h2> <p>Laravel proporciona una API limpia y simple sobre la popular biblioteca <a href="https://swiftmailer.symfony.com/" target="_blank" rel="noopener noreferrer">SwiftMailer<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> con drivers para SMTP, Mailgun, Postmark, SparkPost, Amazon SES y <code>sendmail</code>, permitiéndote comenzar rápidamente a enviar correos a través de un servicio local o en la nube de tu elección.</p> <p><a name="driver-prerequisites"></a></p> <h3 id="requisitos-previos"><a class="header-anchor" href="#requisitos-previos" aria-hidden="true">#</a> Requisitos Previos</h3> <p>Los drivers basados ​​en una API como Mailgun, SparkPost y Postmark suelen ser más simples y rápidos que los servidores SMTP. Si es posible, deberías usar uno de estos drivers. Todos los drivers con API requieren la biblioteca Guzzle HTTP, que puede instalarse a través del gestor de paquetes Composer:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code>composer <span class="token keyword">require</span> guzzlehttp<span class="token operator">/</span>guzzle
</code></pre></div><h4 id="driver-mailgun"><a class="header-anchor" href="#driver-mailgun" aria-hidden="true">#</a> Driver Mailgun</h4> <p>Para usar el driver de Mailgun, primero instale Guzzle, luego configura la opción <code>driver</code> en tu archivo de configuración <code>config/mail.php</code> en <code>mailgun</code>. Luego, verifica que tu archivo de configuración <code>config/services.php</code> contiene las siguientes opciones:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token single-quoted-string string">'mailgun'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'domain'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'your-mailgun-domain'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'secret'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'your-mailgun-key'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Si no estás usando la <a href="https://documentation.mailgun.com/en/latest/api-intro.html#mailgun-regions" target="_blank" rel="noopener noreferrer">región de Mailgun<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> &quot;US&quot;, puedes definir el endpoint de tu región en el archivo de configuración <code>services</code>:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token single-quoted-string string">'mailgun'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'domain'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'your-mailgun-domain'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'secret'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'your-mailgun-key'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'endpoint'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'api.eu.mailgun.net'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="driver-postmark"><a class="header-anchor" href="#driver-postmark" aria-hidden="true">#</a> Driver Postmark</h4> <p>Para usar el driver de Postmark, instala el transporte de SwiftMailer de Postmark mediante Composer:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code>composer <span class="token keyword">require</span> wildbit<span class="token operator">/</span>swiftmailer<span class="token operator">-</span>postmark
</code></pre></div><p>Luego, instala Guzzle y establece la opción <code>driver</code> en tu archivo de configuración <code>config/mail.php</code> a <code>postmark</code>. Finalmente, verifica que tu archivo de configuración <code>config/services.php</code> contiene las siguientes opciones:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token single-quoted-string string">'postmark'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'token'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'your-postmark-token'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="driver-sparkpost"><a class="header-anchor" href="#driver-sparkpost" aria-hidden="true">#</a> Driver SparkPost</h4> <p>Para usar el driver SparkPost, primero instale Guzzle, luego configura la opción <code>driver</code> en tu archivo de configuración <code>config/mail.php</code> en <code>sparkpost</code>. Luego, verifica que tu archivo de configuración <code>config/services.php</code> contiene las siguientes opciones:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token single-quoted-string string">'sparkpost'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'secret'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'your-sparkpost-key'</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Si es necesario, puedes también configurar cuál <a href="https://developers.sparkpost.com/api/#header-endpoints" target="_blank" rel="noopener noreferrer">endpoint de API<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> debería ser usado:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token single-quoted-string string">'sparkpost'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'secret'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'your-sparkpost-key'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'options'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'endpoint'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'https://api.eu.sparkpost.com/api/v1/transmissions'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="driver-ses"><a class="header-anchor" href="#driver-ses" aria-hidden="true">#</a> Driver SES</h4> <p>Para usar el driver de Amazon SES, primero debes instalar Amazon AWS SDK para PHP. Puedes instalar esta biblioteca agregando la siguiente línea a la sección <code>require</code> del archivo <code>composer.json</code> y ejecutando el comando <code>composer update</code>:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token double-quoted-string string">&quot;aws/aws-sdk-php&quot;</span><span class="token punctuation">:</span> <span class="token double-quoted-string string">&quot;~3.0&quot;</span>
</code></pre></div><p>A continuación, configura la opción <code>driver</code> en tu archivo de configuración <code>config/mail.php</code> en <code>ses</code> y verifica que tu archivo de configuración <code>config/services.php</code> contiene las siguientes opciones:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token single-quoted-string string">'ses'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'your-ses-key'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'secret'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'your-ses-secret'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'region'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'ses-region'</span><span class="token punctuation">,</span>  <span class="token comment">// e.g. us-east-1</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Si necesitas incluir <a href="https://docs.aws.amazon.com/aws-sdk-php/v3/api/api-email-2010-12-01.html#sendrawemail" target="_blank" rel="noopener noreferrer">opciones adicionales<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> al ejecutar la petición <code>SendRawEmail</code> de SES, puedes definir un arreglo <code>options</code> dentro de tu configuración de <code>ses</code>:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token single-quoted-string string">'ses'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'key'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'your-ses-key'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'secret'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'your-ses-secret'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'region'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'ses-region'</span><span class="token punctuation">,</span>  <span class="token comment">// e.g. us-east-1</span>
    <span class="token single-quoted-string string">'options'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'ConfigurationSetName'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'MyConfigurationSet'</span><span class="token punctuation">,</span>
        <span class="token single-quoted-string string">'Tags'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
            <span class="token punctuation">[</span>
                <span class="token single-quoted-string string">'Name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'foo'</span><span class="token punctuation">,</span>
                <span class="token single-quoted-string string">'Value'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'bar'</span><span class="token punctuation">,</span>
            <span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p><a name="generating-mailables"></a></p> <h2 id="generando-mailables"><a class="header-anchor" href="#generando-mailables" aria-hidden="true">#</a> Generando Mailables</h2> <p>En Laravel, cada tipo de correo electrónico enviado por su aplicación se representa como una clase &quot;Mailable&quot;. Estas clases se almacenan en el directorio <code>app/Mail</code>. No te preocupes si no ves este directorio en tu aplicación, ya que se generará para ti cuando crees tu primera clase mailable usando el comando <code>make:mail</code>:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code>php artisan make<span class="token punctuation">:</span>mail OrderShipped
</code></pre></div><p><a name="writing-mailables"></a></p> <h2 id="escribiendo-mailables"><a class="header-anchor" href="#escribiendo-mailables" aria-hidden="true">#</a> Escribiendo Mailables</h2> <p>Toda la configuración de una clase mailable se realiza en el método <code>build</code>. Dentro de este método, puedes llamar a varios métodos como <code>from</code>,<code>subject</code>, <code>view</code> y<code>attach</code> para configurar la presentación y entrega del correo electrónico.</p> <p><a name="configuring-the-sender"></a></p> <h3 id="configurando-el-remitente"><a class="header-anchor" href="#configurando-el-remitente" aria-hidden="true">#</a> Configurando el remitente</h3> <h4 id="usando-el-metodo-from"><a class="header-anchor" href="#usando-el-metodo-from" aria-hidden="true">#</a> Usando el método <code>from</code></h4> <p>Primero, exploremos la configuración del remitente para el correo electrónico. O, en otras palabras, para quién será el correo electrónico (from). Hay dos formas de configurar el remitente. En primer lugar, puede usar el método <code>from</code> dentro de su método<code>build</code> de la clase mailable:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'example@example.com'</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails.orders.shipped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="usando-una-direccion-global-con-from"><a class="header-anchor" href="#usando-una-direccion-global-con-from" aria-hidden="true">#</a> Usando una dirección global con <code>from</code></h4> <p>Sin embargo, si tu aplicación utiliza la misma dirección &quot;from&quot; para todos sus correos electrónicos, puede resultar engorroso llamar al método <code>from</code> en cada clase mailable que genere. En su lugar, puede especificar una dirección global &quot;from&quot; en su archivo de configuración <code>config/mail.php</code>. Esta dirección se usará si no se especifica ninguna otra dirección &quot;from&quot; dentro de la clase mailable:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token single-quoted-string string">'from'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'address'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'example@example.com'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'App Name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p>Adicionalmente, puedes definir una dirección global &quot;reply_to&quot; dentro de tu archivo de configuración <code>config/mail.php</code>:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token single-quoted-string string">'reply_to'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'address'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'example@example.com'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'App Name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><p><a name="configuring-the-view"></a></p> <h3 id="configurando-la-vista"><a class="header-anchor" href="#configurando-la-vista" aria-hidden="true">#</a> Configurando la vista</h3> <p>Dentro de un método 'build' de la clase Mailable, puede usar el método <code>view</code> para especificar qué plantilla se debe usar al representar los contenidos del correo electrónico. Dado que cada correo electrónico generalmente usa una <a href="/docs/%7B%7Bversion%7D%7D/blade">Plantilla Blade</a> para representar sus contenidos, tienes toda la potencia y la comodidad del motor de plantillas Blade al construir el HTML de su correo electrónico:</p> <div class="language-php extra-class"><pre v-pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails.orders.shipped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Es posible que desees crear un directorio <code>resources/views/emails</code> para albergar todas tus plantillas de correos electrónicos; sin embargo, puedes colocarlos donde quieras siempre y cuando este dentro del directorio <code>resources/views</code>.</p></div></div> <h4 id="correos-con-texto-plano"><a href="#correos-con-texto-plano" aria-hidden="true" class="header-anchor">#</a> Correos con Texto Plano</h4> <p>Si deseas definir una versión de texto sin formato en tu correo electrónico, puedes usar el método <code>text</code>. Al igual que el método <code>view</code>, el método<code>text</code> acepta un nombre de plantilla que se usará para representar el contenido del correo electrónico. Eres libre de definir una versión HTML y de texto sin formato del mensaje:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails.orders.shipped'</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails.orders.shipped_plain'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="view-data"></a></p> <h3 id="datos-en-vistas"><a href="#datos-en-vistas" aria-hidden="true" class="header-anchor">#</a> Datos en Vistas</h3> <h4 id="a-traves-de-propiedades-publicas"><a href="#a-traves-de-propiedades-publicas" aria-hidden="true" class="header-anchor">#</a> A través De Propiedades Públicas</h4> <p>Por lo general, querrás pasar algunos datos a tu vista que puedes utilizar al representar el HTML del correo electrónico. Hay dos maneras en que puedes hacer que los datos estén disponibles para la vista. Primero, cualquier propiedad pública definida en tu clase Mailable se pondrá automáticamente a disposición de la vista. Entonces, por ejemplo, puedes pasar datos al constructor de tu clase Mailable y establecer esos datos a propiedades públicas definidas en la clase:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Mail</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Order</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Bus<span class="token punctuation">\</span>Queueable</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Mail<span class="token punctuation">\</span>Mailable</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>SerializesModels</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">OrderShipped</span> <span class="token keyword">extends</span> <span class="token class-name">Mailable</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">Queueable</span><span class="token punctuation">,</span> SerializesModels<span class="token punctuation">;</span>

    <span class="token comment">/**
    * The order instance.
    *
    * @var Order
    */</span>
    <span class="token keyword">public</span> <span class="token variable">$order</span><span class="token punctuation">;</span>

    <span class="token comment">/**
    * Create a new message instance.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span>Order <span class="token variable">$order</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">order</span> <span class="token operator">=</span> <span class="token variable">$order</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
    * Build the message.
    *
    * @return $this
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails.orders.shipped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Una vez que los datos se han establecido en una propiedad pública, estarán automáticamente disponibles en tu vista, por lo que puedes acceder a ella como si tuvieras acceso a cualquier otro dato en tus plantillas Blade:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    Price<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$order</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">price</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><h4 id="a-traves-del-metodo-with"><a href="#a-traves-del-metodo-with" aria-hidden="true" class="header-anchor">#</a> A Través Del Método <code>with</code>:</h4> <p>Si deseas personalizar el formato de los datos de tu correo electrónico antes de enviarlos a la plantilla, puedes pasar manualmente los datos a la vista mediante el método <code>with</code>. Por lo general, aún podrás pasar datos a través del constructor de la clase Mailable; sin embargo, debes establecer estos datos en propiedades <code>protected</code> o<code>private</code> para que los datos no estén automáticamente disponibles para la plantilla. Luego, al llamar al método <code>with</code>, se pase un arreglo de datos que deseas poner a disposición de la plantilla:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Mail</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Order</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Bus<span class="token punctuation">\</span>Queueable</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Mail<span class="token punctuation">\</span>Mailable</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>SerializesModels</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">OrderShipped</span> <span class="token keyword">extends</span> <span class="token class-name">Mailable</span>
<span class="token punctuation">{</span>
    <span class="token keyword">use</span> <span class="token package">Queueable</span><span class="token punctuation">,</span> SerializesModels<span class="token punctuation">;</span>

    <span class="token comment">/**
    * The order instance.
    *
    * @var Order
    */</span>
    <span class="token keyword">protected</span> <span class="token variable">$order</span><span class="token punctuation">;</span>

    <span class="token comment">/**
    * Create a new message instance.
    *
    * @return void
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">__construct</span><span class="token punctuation">(</span>Order <span class="token variable">$order</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">order</span> <span class="token operator">=</span> <span class="token variable">$order</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
    * Build the message.
    *
    * @return $this
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails.orders.shipped'</span><span class="token punctuation">)</span>
                    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
                        <span class="token single-quoted-string string">'orderName'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">order</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">name</span><span class="token punctuation">,</span>
                        <span class="token single-quoted-string string">'orderPrice'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">order</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">price</span><span class="token punctuation">,</span>
                    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>Una vez que los datos se han pasado con el método <code>with</code>, estarán automáticamente disponibles en la vista, por lo que puedes acceder a ellos como lo harías con cualquier otro dato en las plantillas Blade:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>div<span class="token operator">&gt;</span>
    Price<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token variable">$orderPrice</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>div<span class="token operator">&gt;</span>
</code></pre></div><p><a name="attachments"></a></p> <h3 id="archivos-adjuntos"><a href="#archivos-adjuntos" aria-hidden="true" class="header-anchor">#</a> Archivos Adjuntos</h3> <p>Para agregar archivos adjuntos a un correo electrónico, podemos usar el método <code>attach</code> dentro del método <code>build</code> de la clase Mailable. El método <code>attach</code> acepta la ruta completa al archivo como su primer argumento:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails.orders.shipped'</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/path/to/file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Al adjuntar archivos a un mensaje, también puedes especificar el nombre para mostrar y / o el tipo MIME pasando un <code>array</code> como segundo argumento al método <code>attach</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails.orders.shipped'</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/path/to/file'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
                    <span class="token single-quoted-string string">'as'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'name.pdf'</span><span class="token punctuation">,</span>
                    <span class="token single-quoted-string string">'mime'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'application/pdf'</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="adjuntando-archivos-desde-el-disco"><a href="#adjuntando-archivos-desde-el-disco" aria-hidden="true" class="header-anchor">#</a> Adjuntando Archivos Desde El Disco</h4> <p>Si has almacenado un archivo en uno de tus <a href="/docs/%7B%7Bversion%7D%7D/filesystem">discos</a>, puedes adjuntarlo al correo electrónico usando el método <code>attachFromStorage</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email.orders.shipped'</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">attachFromStorage</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/path/to/file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>De ser necesario, puedes especificar el nombre del archivo adjunto y opciones adicionales usando el segundo y tercer argumento del método <code>attachFromStorage</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email.orders.shipped'</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">attachFromStorage</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'/path/to/file'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'name.pdf'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
                    <span class="token single-quoted-string string">'mime'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'application/pdf'</span>
                <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>El método <code>attachFromStorageDisk</code> puede ser usado si necesitas especificar un disco de almacenamiento diferente a tu disco por defecto:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'email.orders.shipped'</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">attachFromStorageDisk</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'s3'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'/path/to/file'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="archivos-adjuntos-desde-la-memoria"><a href="#archivos-adjuntos-desde-la-memoria" aria-hidden="true" class="header-anchor">#</a> Archivos Adjuntos Desde La Memoria</h4> <p>El método <code>attachData</code> se puede usar para adjuntar una cadena de bytes sin formato como un archivo adjunto. Por ejemplo, puede usar este método si ha generado un PDF en la memoria y desea adjuntarlo al correo electrónico sin escribirlo en el disco. El método <code>attachData</code> acepta los bytes de datos brutos como su primer argumento, el nombre del archivo como su segundo argumento y un arreglo de opciones como su tercer argumento:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails.orders.shipped'</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">attachData</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">pdf</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'name.pdf'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
                    <span class="token single-quoted-string string">'mime'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'application/pdf'</span><span class="token punctuation">,</span>
                <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="inline-attachments"></a></p> <h3 id="archivos-adjuntos-en-linea"><a href="#archivos-adjuntos-en-linea" aria-hidden="true" class="header-anchor">#</a> Archivos Adjuntos en Línea</h3> <p>La incrustación de imágenes en línea en sus correos electrónicos suele ser engorrosa; sin embargo, Laravel proporciona una forma conveniente de adjuntar imágenes a sus correos electrónicos y recuperar el CID apropiado. Para incrustar una imagen en línea, usa el método <code>embed</code> en la variable <code>$message</code> dentro de tu plantilla de correo electrónico. Laravel automáticamente hace que la variable <code>$message</code> esté disponible para todas tus plantillas de correo electrónico, por lo que no tienes que preocuparte por pasarla manualmente:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    Here is an image<span class="token punctuation">:</span>

    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token double-quoted-string string">&quot;{{ <span class="token interpolation"><span class="token variable">$message</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">embed</span></span>(<span class="token interpolation"><span class="token variable">$pathToImage</span></span>) }}&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre></div><div class="danger custom-block"><p class="custom-block-title">Nota</p> <p>La variable <code>$message</code> no está disponible en los mensajes ya que los mensajes de texto plano (plain-text) no utilizan archivos adjuntos en línea.</p></div> <h4 id="incrustar-datos-adjuntos-de-la-memoria"><a href="#incrustar-datos-adjuntos-de-la-memoria" aria-hidden="true" class="header-anchor">#</a> Incrustar Datos Adjuntos de la Memoria</h4> <p>Si ya tienes una cadena de datos en la memoria que desees incorporar a una plantilla de correo electrónico, puedes usar el método <code>embedData</code> en la variable <code>$message</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token operator">&lt;</span>body<span class="token operator">&gt;</span>
    Here is an image from raw data<span class="token punctuation">:</span>

    <span class="token operator">&lt;</span>img src<span class="token operator">=</span><span class="token double-quoted-string string">&quot;{{ <span class="token interpolation"><span class="token variable">$message</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">embedData</span></span>(<span class="token interpolation"><span class="token variable">$data</span></span>, <span class="token interpolation"><span class="token variable">$name</span></span>) }}&quot;</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>body<span class="token operator">&gt;</span>
</code></pre></div><p><a name="customizing-the-swiftmailer-message"></a></p> <h3 id="personalizar-el-mensaje-de-swiftmailer"><a href="#personalizar-el-mensaje-de-swiftmailer" aria-hidden="true" class="header-anchor">#</a> Personalizar el Mensaje de SwiftMailer</h3> <p>El método <code>withSwiftMessage</code> de la clase base <code>Mailable</code> te permite registrar una función anónima que se invocará con la instancia del mensaje de SwiftMailer sin procesar antes de enviar el mensaje. Esto le da la oportunidad de personalizar el mensaje antes de que se entregue:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">view</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails.orders.shipped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">withSwiftMessage</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$message</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">getHeaders</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addTextHeader</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Custom-Header'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'HeaderValue'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="markdown-mailables"></a></p> <h2 id="mailables-en-markdown"><a href="#mailables-en-markdown" aria-hidden="true" class="header-anchor">#</a> Mailables en Markdown</h2> <p>Los mensajes escritos con Markdown le permiten aprovechar las plantillas y los componentes precompilados de las notificaciones por correo en tus documentos. Dado que los mensajes se escriben en Markdown, Laravel puede generar plantillas HTML atractivas para los mensajes y generar automáticamente una contraparte de texto sin formato.</p> <p><a name="generating-markdown-mailables"></a></p> <h3 id="generar-mailables-en-markdown"><a href="#generar-mailables-en-markdown" aria-hidden="true" class="header-anchor">#</a> Generar Mailables en Markdown</h3> <p>Para generar una clase de Mailable con una plantilla para Markdown puedes usar la opción <code>--markdown</code> del comando <code>make:mail</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan make<span class="token punctuation">:</span>mail OrderShipped <span class="token operator">--</span>markdown<span class="token operator">=</span>emails<span class="token punctuation">.</span>orders<span class="token punctuation">.</span>shipped
</code></pre></div><p>Luego de generar la clase, dentro de su método <code>build</code> debes llamar llame al método <code>markdown</code> en lugar del método <code>view</code>. Los métodos <code>markdown</code> aceptan el nombre de la plantilla Markdown y un arreglo opcional de datos para poner a disposición de la plantilla:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* Build the message.
*
* @return $this
*/</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'example@example.com'</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">markdown</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails.orders.shipped'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="writing-markdown-messages"></a></p> <h3 id="escribir-mensajes-en-markdown"><a href="#escribir-mensajes-en-markdown" aria-hidden="true" class="header-anchor">#</a> Escribir mensajes en Markdown</h3> <p>Los correos con Markdown utilizan una combinación de componentes Blade y sintaxis Markdown que le permiten construir fácilmente mensajes de correo al mismo tiempo que aprovechas los componentes prefabricados de Laravel:</p> <div class="language-php extra-class"><pre class="language-php"><code>@<span class="token function">component</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'mail::message'</span><span class="token punctuation">)</span>
<span class="token shell-comment comment"># Order Shipped</span>

Your order has been shipped<span class="token operator">!</span>

@<span class="token function">component</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'mail::button'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'url'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$url</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
View Order
@endcomponent

Thanks<span class="token punctuation">,</span><span class="token operator">&lt;</span>br<span class="token operator">&gt;</span>
<span class="token punctuation">{</span><span class="token punctuation">{</span> <span class="token function">config</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'app.name'</span><span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">}</span>
@endcomponent
</code></pre></div><div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>No uses una sangría excesiva al escribir correos electrónicos de Markdown. Los analizadores de Markdown renderizarán contenido sangrado como bloques de código.</p></div> <h4 id="componente-button"><a href="#componente-button" aria-hidden="true" class="header-anchor">#</a> Componente Button</h4> <p>El componente de botón representa un enlace de botón centrado. El componente acepta dos argumentos, una <code>url</code> y un <code>color</code> opcional. Los colores compatibles son <code>primary</code>, <code>success</code> y <code>error</code>. Puedes agregar los botones que desees a un mensaje:</p> <div class="language-php extra-class"><pre class="language-php"><code>@<span class="token function">component</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'mail::button'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token single-quoted-string string">'url'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token variable">$url</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'color'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'success'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
View Order
@endcomponent
</code></pre></div><h4 id="componente-panel"><a href="#componente-panel" aria-hidden="true" class="header-anchor">#</a> Componente Panel</h4> <p>El componente del panel representa el bloque de texto dado en un panel que tiene un color de fondo ligeramente diferente que el resto del mensaje. Esto te permite llamar la atención sobre un bloque de texto dado:</p> <div class="language-php extra-class"><pre class="language-php"><code>@<span class="token function">component</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'mail::panel'</span><span class="token punctuation">)</span>
This is the panel content<span class="token punctuation">.</span>
@endcomponent
</code></pre></div><h4 id="componente-table"><a href="#componente-table" aria-hidden="true" class="header-anchor">#</a> Componente Table</h4> <p>El componente de tabla le permite transformar una tabla en Markdown a una tabla HTML. El componente acepta la tabla en Markdown como su contenido. La alineación de columna de tabla es compatible con la sintaxis de alineación de tabla de Markdown predeterminada:</p> <div class="language-php extra-class"><pre class="language-php"><code>@<span class="token function">component</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'mail::table'</span><span class="token punctuation">)</span>
<span class="token operator">|</span> Laravel       <span class="token operator">|</span> Table         <span class="token operator">|</span> Example  <span class="token operator">|</span>
<span class="token operator">|</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span> <span class="token operator">|</span><span class="token punctuation">:</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">-</span><span class="token punctuation">:</span><span class="token operator">|</span> <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token punctuation">:</span><span class="token operator">|</span>
<span class="token operator">|</span> Col <span class="token number">2</span> is      <span class="token operator">|</span> Centered      <span class="token operator">|</span> <span class="token variable">$10</span>      <span class="token operator">|</span>
<span class="token operator">|</span> Col <span class="token number">3</span> is      <span class="token operator">|</span> Right<span class="token operator">-</span>Aligned <span class="token operator">|</span> <span class="token variable">$20</span>      <span class="token operator">|</span>
@endcomponent
</code></pre></div><p><a name="customizing-the-components"></a></p> <h3 id="personalizar-los-componentes"><a href="#personalizar-los-componentes" aria-hidden="true" class="header-anchor">#</a> Personalizar los Componentes</h3> <p>Puedes exportar todos los componentes de correo Markdown a su propia aplicación para personalización. Para exportar los componentes, use el comando <code>vendor:publish</code> y la opción del tag <code>laravel-mail</code> de esta forma:</p> <div class="language-php extra-class"><pre class="language-php"><code>php artisan vendor<span class="token punctuation">:</span>publish <span class="token operator">--</span>tag<span class="token operator">=</span>laravel<span class="token operator">-</span>mail
</code></pre></div><p>Este comando publicará los componentes de correo Markdown en el directorio <code>resources/views/vendor/mail</code>. El directorio <code>mail</code> contendrá un directorio<code>html</code> y <code>text</code>, cada uno con sus respectivas representaciones de cada componente disponible. Eres libre de personalizar estos componentes como desees.</p> <h4 id="personalizar-el-css"><a href="#personalizar-el-css" aria-hidden="true" class="header-anchor">#</a> Personalizar el CSS</h4> <p>Después de exportar los componentes, el directorio <code>resources/views/vendor/mail/html/themes</code> contendrá un archivo <code>default.css</code>, puedes personalizar el CSS en este archivo y sus estilos se alinearán automáticamente en las representaciones HTML de sus mensajes de correo Markdown.</p> <div class="tip custom-block"><p class="custom-block-title">TIP</p> <p>Si deseas construir un tema completamente nuevo para los componentes Markdown, escribe un nuevo archivo CSS dentro del directorio <code>html/themes</code> y cambia la opción <code>theme</code> en tu archivo de configuración <code>mail</code>.</p></div> <p><a name="sending-mail"></a></p> <h2 id="enviar-correo"><a href="#enviar-correo" aria-hidden="true" class="header-anchor">#</a> Enviar Correo</h2> <p>Para enviar un mensajes debes usar el método <code>to</code> en el <a href="/docs/%7B%7Bversion%7D%7D/facades">facade</a> llamado <code>Mail</code>. El método <code>to</code> acepta una dirección de correo, una instancia de usuario o una colección de usuarios. Si pasas un objeto o una colección de objetos, el remitente utilizará automáticamente sus propiedades de &quot;email&quot; y &quot;name&quot; cuando configure los destinatarios del correo electrónico, por lo tanto, asegúrese de que estos atributos estén disponibles en sus objetos. Una vez que haya especificado sus destinatarios, puede pasar una instancia de su clase mailable al método <code>send</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Order</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Mail<span class="token punctuation">\</span>OrderShipped</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Request</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Support<span class="token punctuation">\</span>Facades<span class="token punctuation">\</span>Mail</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Http<span class="token punctuation">\</span>Controllers<span class="token punctuation">\</span>Controller</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">OrderController</span> <span class="token keyword">extends</span> <span class="token class-name">Controller</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Ship the given order.
    *
    * @param  Request  $request
    * @param  int  $orderId
    * @return Response
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">ship</span><span class="token punctuation">(</span>Request <span class="token variable">$request</span><span class="token punctuation">,</span> <span class="token variable">$orderId</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$order</span> <span class="token operator">=</span> Order<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token variable">$orderId</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Ship order...</span>

        Mail<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OrderShipped</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><p>No estás limitado a especificar los destinatarios &quot;a&quot; al enviar un mensaje. Eres libre de configurar los destinatarios &quot;a&quot;, &quot;cc&quot; y &quot;bcc&quot;, todo dentro de una única llamada a un método encadenado:</p> <div class="language-php extra-class"><pre class="language-php"><code>Mail<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">cc</span><span class="token punctuation">(</span><span class="token variable">$moreUsers</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">bcc</span><span class="token punctuation">(</span><span class="token variable">$evenMoreUsers</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OrderShipped</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="rendering-mailables"></a></p> <h2 id="renderizar-mailables"><a href="#renderizar-mailables" aria-hidden="true" class="header-anchor">#</a> Renderizar Mailables</h2> <p>Algunas veces puedes querer capturar el contenido HTML de un mailable sin enviarlo. Para lograr esto, puedes llamar al método <code>render</code> del mailable. Este método retornará los contenidos evaluados del mailable como una cadena:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$invoice</span> <span class="token operator">=</span> App\<span class="token package">Invoice</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">App<span class="token punctuation">\</span>Mail<span class="token punctuation">\</span>InvoicePaid</span><span class="token punctuation">(</span><span class="token variable">$invoice</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="previewing-mailables-in-the-browser"></a></p> <h3 id="previewing-mailables-in-the-browser"><a href="#previewing-mailables-in-the-browser" aria-hidden="true" class="header-anchor">#</a> Previewing Mailables In The Browser</h3> <p>Al diseñar una plantilla mailable, es conveniente previsualizar rápidamente el mailable renderizado en tu navegador como una plantilla de Blade corriente. Por esta razón, Laravel te permite retornar cualquier mailable directamente desde un Closure de ruta o un controlador. Cuando un mailable es retornado, será renderizado y mostrado en el navegador, permitiéndote previsualizar su diseño sin necesidad de enviarlo a una dirección de correo electrónico real:</p> <div class="language-php extra-class"><pre class="language-php"><code>Route<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'mailable'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$invoice</span> <span class="token operator">=</span> App\<span class="token package">Invoice</span><span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">App<span class="token punctuation">\</span>Mail<span class="token punctuation">\</span>InvoicePaid</span><span class="token punctuation">(</span><span class="token variable">$invoice</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="queueing-mail"></a></p> <h3 id="correo-en-cola"><a href="#correo-en-cola" aria-hidden="true" class="header-anchor">#</a> Correo en Cola</h3> <h4 id="poniendo-en-cola-un-correo-electronico"><a href="#poniendo-en-cola-un-correo-electronico" aria-hidden="true" class="header-anchor">#</a> Poniendo en Cola un Correo Electronico</h4> <p>Con el envío de correos electrónicos puede alargar drásticamente el tiempo de respuesta de su aplicación, muchos desarrolladores eligen poner correos electrónicos en cola para el envío en segundo plano. Laravel lo hace fácil usando su función incorporada <a href="/docs/%7B%7Bversion%7D%7D/queues">API de cola unificada</a>. Para poner en cola un correo, use el método <code>queue</code> en el facade <code>Mail</code> después de especificar los destinatarios del mensaje:</p> <div class="language-php extra-class"><pre class="language-php"><code>Mail<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">cc</span><span class="token punctuation">(</span><span class="token variable">$moreUsers</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">bcc</span><span class="token punctuation">(</span><span class="token variable">$evenMoreUsers</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OrderShipped</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Este método se encargará automáticamente de insertar un trabajo en la cola para que el mensaje se envíe en segundo plano. Necesitarás <a href="/docs/%7B%7Bversion%7D%7D/queues">configurar tus colas</a> antes de usar esta característica.</p> <h4 id="cola-de-mensajes-retrasada"><a href="#cola-de-mensajes-retrasada" aria-hidden="true" class="header-anchor">#</a> Cola de Mensajes Retrasada</h4> <p>Si deseas retrasar la entrega de un mensaje de correo electrónico en cola, puedes usar el método <code>later</code>. Como primer argumento, el método <code>later</code> acepta una instancia <code>DateTime</code> que indica cuándo se debe enviar el mensaje:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$when</span> <span class="token operator">=</span> <span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addMinutes</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Mail<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">cc</span><span class="token punctuation">(</span><span class="token variable">$moreUsers</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">bcc</span><span class="token punctuation">(</span><span class="token variable">$evenMoreUsers</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">later</span><span class="token punctuation">(</span><span class="token variable">$when</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">OrderShipped</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="enviar-a-queues-especificas"><a href="#enviar-a-queues-especificas" aria-hidden="true" class="header-anchor">#</a> Enviar a Queues Específicas</h4> <p>Como todas las clases mailable generadas usando el comando <code>make:mail</code> usan el trait <code>Illuminate\Bus\Queueable</code> puedes llamar a los métodos <code>onQueue</code> y<code>onConnection</code> en cualquier instancia de clase mailable, lo que te permite especificar la conexión y nombre de cola para el mensaje:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$message</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OrderShipped</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">onConnection</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'sqs'</span><span class="token punctuation">)</span>
                <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">onQueue</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'emails'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Mail<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">cc</span><span class="token punctuation">(</span><span class="token variable">$moreUsers</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">bcc</span><span class="token punctuation">(</span><span class="token variable">$evenMoreUsers</span><span class="token punctuation">)</span>
    <span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">queue</span><span class="token punctuation">(</span><span class="token variable">$message</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="en-cola-por-defecto"><a href="#en-cola-por-defecto" aria-hidden="true" class="header-anchor">#</a> En Cola Por Defecto</h4> <p>Si tienes clases mailables que deseas que siempre se pongan en cola, puedes implementar la interfaz <code>ShouldQueue</code> en la clase. Ahora, incluso si llamas al método <code>send</code> cuando envies correos el mailable se pondrá en cola ya que implementa la interfaz:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Contracts<span class="token punctuation">\</span>Queue<span class="token punctuation">\</span>ShouldQueue</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">OrderShipped</span> <span class="token keyword">extends</span> <span class="token class-name">Mailable</span> <span class="token keyword">implements</span> <span class="token class-name">ShouldQueue</span>
<span class="token punctuation">{</span>
    <span class="token comment">//</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="localizing-mailables"></a></p> <h2 id="configuracion-regional-de-mailables"><a href="#configuracion-regional-de-mailables" aria-hidden="true" class="header-anchor">#</a> Configuración Regional de Mailables</h2> <p>Laravel te permite enviar mailables en una configuración regional diferente al del idioma actual, e incluso recordará dicha configuración si el correo es agregado a una cola.</p> <p>Para lograr esto, el facade <code>Mail</code> ofrece un método <code>locale</code> para establecer el idioma deseado. La aplicación cambiará a dicho configuración regional cuando el mailable sea formateado y luego volverá a la configuración anterior cuando el formato es completado:</p> <div class="language-php extra-class"><pre class="language-php"><code>Mail<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">locale</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'es'</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">send</span><span class="token punctuation">(</span>
    <span class="token keyword">new</span> <span class="token class-name">OrderShipped</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="configuracion-regional-de-usuarios"><a href="#configuracion-regional-de-usuarios" aria-hidden="true" class="header-anchor">#</a> Configuración Regional De Usuarios</h3> <p>Algunas veces, las aplicaciones almacenan la configuración regional preferida de cada usuario. Al implementar la interfaz <code>HasLocalePreference</code> en uno o más de tus modelos, puedes instruir a Laravel a usar dicha configuración almacenado al enviar correos electrónicos:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Contracts<span class="token punctuation">\</span>Translation<span class="token punctuation">\</span>HasLocalePreference</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name">Model</span> <span class="token keyword">implements</span> <span class="token class-name">HasLocalePreference</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
    * Get the user's preferred locale.
    *
    * @return string
    */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function">preferredLocale</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token property">locale</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Una vez has implementado la interfaz, Laravel automáticamente usará la configuración regional preferida al enviar mailables y notificaciones al modelo. Por lo tanto, no hay necesidad de llamar al método <code>locale</code> al usar esta interfaz:</p> <div class="language-php extra-class"><pre class="language-php"><code>Mail<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">to</span><span class="token punctuation">(</span><span class="token variable">$request</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">OrderShipped</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="mail-and-local-development"></a></p> <h2 id="correos-y-desarrollo-local"><a href="#correos-y-desarrollo-local" aria-hidden="true" class="header-anchor">#</a> Correos y Desarrollo Local</h2> <p>Al desarrollar una aplicación que envía correos electrónicos, probablemente no deseas enviar correos electrónicos a direcciones reales. Laravel proporciona varias formas de &quot;desactivar&quot; el envío real de correos electrónicos durante el desarrollo local.</p> <h4 id="driver-log"><a href="#driver-log" aria-hidden="true" class="header-anchor">#</a> Driver Log</h4> <p>En lugar de enviar sus correos electrónicos, el driver de correos <code>log</code> escribirá todos los mensajes de correo electrónico en tus archivos de logs para su inspección. Para obtener más información sobre cómo configurar su aplicación por entorno, revisa la <a href="/docs/%7B%7Bversion%7D%7D/configuration#environment-configuration">configuración en la documentación</a>.</p> <h4 id="destinatario-universal"><a href="#destinatario-universal" aria-hidden="true" class="header-anchor">#</a> Destinatario Universal</h4> <p>Otra solución proporcionada por Laravel es establecer un destinatario universal de todos los correos electrónicos enviados por el framework. De esta forma, todos los correos electrónicos generados por tu aplicación serán enviados a una dirección específica, en lugar de la dirección realmente especificada al enviar el mensaje. Esto se puede hacer a través de la opción <code>to</code> en tu archivo de configuración <code>config/mail.php</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'to'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'address'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'example@example.com'</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'name'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Example'</span>
<span class="token punctuation">]</span><span class="token punctuation">,</span>
</code></pre></div><h4 id="mailtrap"><a href="#mailtrap" aria-hidden="true" class="header-anchor">#</a> Mailtrap</h4> <p>Finalmente, puedes usar un servicio como <a href="https://mailtrap.io" target="_blank" rel="noopener noreferrer">Mailtrap<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> y el driver <code>smtp</code> para enviar sus mensajes de correo electrónico a un buzón 'ficticio' donde puedes verlos en un verdadero cliente de correo electrónico. Este enfoque tiene el beneficio de permitirle inspeccionar realmente los correos electrónicos finales en el visor de mensajes de Mailtrap.</p> <p><a name="events"></a></p> <h2 id="eventos"><a href="#eventos" aria-hidden="true" class="header-anchor">#</a> Eventos</h2> <p>Laravel dispara dos eventos durante el proceso de envío de mensajes de correo. El evento <code>MessageSending</code> se dispara antes de que se envíe un mensaje, mientras que el evento<code>MessageSent</code> se dispara después de que se ha enviado un mensaje. Recuerda, estos eventos se disparan cuando el correo <em>se envía</em>, no cuando se pone en cola. Puedes registrar un detector de eventos para este evento en tu <code>EventServiceProvider</code>:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
* The event listener mappings for the application.
*
* @var array
*/</span>
<span class="token keyword">protected</span> <span class="token variable">$listen</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
    <span class="token single-quoted-string string">'Illuminate\Mail\Events\MessageSending'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'App\Listeners\LogSendingMessage'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token single-quoted-string string">'Illuminate\Mail\Events\MessageSent'</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token punctuation">[</span>
        <span class="token single-quoted-string string">'App\Listeners\LogSentMessage'</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></div> <div class="page-edit"><!----> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/helpers.html" class="prev">
          Helpers
        </a></span> <span class="next"><a href="/notifications.html">
          Notificaciones
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/assets/js/app.bf22240a.js" defer></script><script src="/assets/js/48.b6beb9b8.js" defer></script>
  </body>
</html>
